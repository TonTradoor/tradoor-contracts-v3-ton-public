{"name":"OrderBook","code":"te6ccgECwgEAPE0AART/APSkE/S88sgLAQIBYgIDA9LQAdDTAwFxsKMB+kABINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiFRQUwNvBPhhAvhi2zwRFREXERURFBEWERQRExEVERMREhEUERIRERETEREREBESERAPEREPDhEQDlUd2zzy4IK8EBECASAEBQIBIKytAgEgBgcCASAICQIBSA4PAgEgCgsAubd6ME4LnYerpZXPY9CdhzrJUKNs0E4TusalpWyPlmRadeW/vixHME4ECrgDcAzscpnLB1XI5LZYcE4TsunLVmnZbmdB0s2yjN0UkE4IGc6tPOK/OkoWA6wtxMj2UAIZsRQ2zzbPFcQXw9sYYLwMApmzHrbPBEVERYRFREUERURFBETERQRExESERMREhERERIREREQEREREA8REA9VDts8VxBfD2xhIG6SMG2ZIG7y0IBvKW8J4iBukjBt3oLwNAAIlATqBAQEoAln0DW+hkjBt3yBukjBtjofQ2zxsGW8J4kcAEbCvu1E0NIAAYAB1sm7jQ1aXBmczovL1FtTnhNS1R3OHl0bUtBZlhWMVdCbWZHOG5lcGFCUnJScml6Y0tiVmhLSGhVTWWCAEVgHjAnAh10nCH5UwINcLH94gghCIYcxzuo8IMNs8bB3bPH/gIIIQc2LQnLoSExQVATzI+EMBzH8BygARFhEVERQRExESEREREFXg2zzJ7VQsBM6AINchcCHXScIflTAg1wsf3iCCEOic1F+64wIgghD+o2txuo86MNMfAYIQ/qNrcbry4IHTP9MHWWwSMCWBAQEiWfQNb6GSMG3fIG6SMG2Oh9DbPGwabwriIG6RW+MOf+CCEP9X5Ve6FrMXGAH20x8BghCIYcxzuvLggfpAIdcLAcMAjh0BINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiJIxbeIB0gABktIAkm0B4vpAIdcLAcMAjh0BINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiJIxbeIB0gABktIAkm0B4tIAGgP2NREVESERFREUESARFBETER8RExESER4REhERER0REREQERwREA8RGw8OERoODREZDQwRGAwLERcLChEWCgkRIQkIESAIBxEfBwYRHgYFER0FBBEcBAMRGwMCERoCAREZAREY2zxWF26zlFYWbrOR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GFcYVxlXGfhCVhpus5owERkgbvLQgBEZklca4oEBAW0gbpIwbY6NIG7y0IBvKchVgNs8yeIQJFYVASBulTBZ9FowlEEz9BXicAIBERQBERPIVSCCECRUZsRQBMsfEsoAgQEBzwCBAQHPAMlOPgL6BREbBYEBAVYfBlYeBgURIAUEESIEAxEiAwIRIgIBESDIVYDbPMkQNAIRGgIBERUBIG6VMFn0WjCUQTP0FeL4KBERERkREREQERgREA8RFw8OERYODREVDQwRFAwLERMLChESCgkREQkIERAIEH8QbhBdEJwaSbBGcBAl2zxOpgK6yIJYwAAAAAAAAAAAAAAAAQHLZ8zJcPsAAREXAX8BERVxECNtbW3bPPhCDhEWDg0RFQ0MERQMCxETCwoREgoJEREJCBEQCBB/EG4QXRBMEDtKkBBoEGcQNRA0cNs8qqME6vhBbyQvgQEBKln0DW+hkjBt3yBukjBtjofQ2zxsGW8J4oF/fSFus/L0IG7y0IBvKTEn4w8REhEWERIREREVEREREBEUERAPERMPDhESDg0REQ0MERAMEL8QrhCdEIwQexBqEFkQSBA3RhRFUwERHQFWHwERH0dAQUID+FQbqYFLaQrbPKcDViGqAKBWIKARFRElERURFBEkERQRExEjERMREhEiERIREREhEREREBEgERAPER8PDhEeDg0RHQ0MERwMCxEbCwoRGgoJERkJCBEYCAcRFwcGERYGBRElBQQRJAQDESMDAhEiAgERIQERINs8AREhAaCVjEMD+FQbqYFLaQrbPKcGViGnA6BWIKARFRElERURFBEkERQRExEjERMREhEiERIREREhEREREBEgERAPER8PDhEeDg0RHQ0MERwMCxEbCwoRGgoJERkJCBEYCAcRFwcGERYGBRElBQQRJAQDESMDAhEiAgERIQERINs8AREhAaCVjEQE+Ns8Vhlus5cRGSBu8tCAlFcZ+ELif4EBAVYfBlYkBlYkBgURJAUEESMEAxEjAwIRGwIBESQBESHIVYDbPMkQIwERGwFWGAEgbpUwWfRaMJRBM/QV4gMRGAMCERYCAREVAREccBEcgEARFX8RFRA0ECPIVWDbPMkmBAMRGQOOTkVGABYBERgBvgERFgHy9AAiggnoSACgAREYAb4BERYB8vQAeoIQ6JzUX1AIyx8WygAUyz9YINdJ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WjCUQTP0FeL4KBA8GBsT2zxwpgGwUJrLB1AHINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8WFYEBAc8AE4EBAc8AAciBAQHPABKBAQHPABLKACJus5p/AcoAEoEBAc8AlTJwWMoA4shQA3EAtCBulTBwAcsBjh4g10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIzxbiUAMgbpUwcAHLAY4eINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8W4skBzMkBzABy0x8BghANp475uvLggYEBAdcAgQEB1wCBAQHXANIA1AHQgQEB1wCBAQHXAIEBAdcAMBA3EDYQNRA0Auz4QW8kgUtpUyuhVTHbPKoAVhugVhqgvvL0gV/yJ1YbvvL0+EJwVHAAESARIREgER8RIREfER4RIREeER0RIREdERwRIREcERsRIREbERoRIREaERkRIREZERgRIREYERcRIREXERYRIREWERURIREVERQRIREUlXYE7PhBbyQpgQEBJ1n0DW+hkjBt3yBukjBtjofQ2zxsHm8O4oF/fSFus/L0IG7y0IBvLl8DKsABjp5UHtyBS2kN2zyqAVYiqgCgViGgggnoSACgG74Z8vSOllQe3IFLaQ3bPKoAViKgViGgG74Z8vTi+EIRFxEkEReSlZWBBDqPCDDbPGwX2zx/4CCCEO8BwrS64wIgghCasQtGund4eXoC3hETESERExESESEREhERESEREREQESEREA8RIQ8OESEODREhDQwRIQwLESELEEkQSBBHEEYQRVYh2zww+EIRFhEXERYRFREWERURFBEVERQRExEUERMREhETERIRERESEREREBERERAPERAPVQ7bPJ+jALbTHwGCEPX9a2668uCB+kAh1wsBwwCOHQEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIkjFt4gGBAQHXAIEBAdcA1AHQgQEB1wD0BIEBAdcA9AQwEEcQRhBFBNRb+EFvJCuBAQEpWfQNb6GSMG3fIG6SMG2Oh9DbPGwebw7igX99IW6z8vQgbvLQgG8uMSzAAeMPERIRFhESERERFRERERARFBEQDxETDw4REg4NERENDBEQDFU7AxEeAwIRHwIBEScBIBEfkoiJigN6MNs8bBZfA/hBbySCAKD3+EJWFwHHBfL0KYEBAShZ9A1voZIwbd8gbpIwbY6H0Ns8bB5vDuIgbpJfCOMOf5GSkwN8jwgw2zxsF9s8f+CCEJRqmLa6jqfTHwGCEJRqmLa68uCB0z8BMcgBghCv+Q9XWMsfyz/J+EIBcG3bPH/gMHB7fH0A8NMfAYIQmrELRrry4IH6QCHXCwHDAI4dASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IiSMW3iAYEBAdcA+kABINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiAHSANQB0IEBAdcAgQEB1wD0BDAQNxA2EDUQNAP2+EFvJFQTI4FLaQTbPKcGVhunA6BWGqARFREfERURFBEeERQRExEdERMREhEcERIREREbEREREBEaERAPERkPDhEYDg0RFw0MERYMCxEfCwoRHgoJER0JCBEcCAcRGwcGERoGBREZBQQRGAQDERcDAhEWAgERHwERHts8lYx+ATptbSJus5lbIG7y0IBvIgGRMuIQJHADBIBCUCPbPKoC/gERHwGgggnoSACgAREWAb4BER4B8vRwgQEL+EIqWXFBM/QKb6GUAdcAMJJbbeIgbrOWMSBu8tCAkTDiggCg9wHy9PhCVhtus5owERogbvLQgBEaklcb4lYbpIEBAXNwUwBwIfgjf234QhCcCxElC1YkCwoRJAoRJwHIVdDbPMmlfwP+AhEcAgERGgFWGwEgbpUwWfRaMJRBM/QV4nCAQH9zVHMzEDgHESAHBhEbBgURHQVANHACAREbAREaEIkQZxBWEEUQNBAjyFWQ2zzJKAQDERQDAhEWAhETARRDMG1t2zwLERULChEUCgkREwkIERIIBxERBwYREAYQXxBOED1MupCqgAAQEEkQWBA2QAUD3hEWESMRFhEVESIRFREUESERFBETESARExESER8REhERER4REREQER0REA8RHA8OERsODREaDQwRGQwLERgLChEkCgkRIwkIESIIBxEhBwYRIAYFER8FBBEeBAMRHQMCERwCVhgCESXbPFYfwAHjD4KDhAC+gV5tAbPy9HCBAQv4Qi9ZcUEz9ApvoZQB1wAwkltt4iBus5YxIG7y0ICRMOIgnYIAmxcjVhqg+CO78vTeggCg9/hCE8cFkX+RIOIS8vSznYIAmxcBVhWg+CO78vSRMOIB+iekgQEBcwFWGwFWHwFWIgERHchVQFBFgQEBzwASgQEBzwCBAQHPAMhYINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8WEoEBAc8AyQHMyRAqAREZAVKQIG6VMFn0WjCUQTP0FeJWGW6zlxEZIG7y0ICUVxn4QuL4Qn8phQLuVxZXGVcZVxlXGVcZVxpXG/hCVhJus5owEREgbvLQgBERklcS4oEBAW0gbpIwbY6NIG7y0IBvLshV0Ns8yeICERUCVhIBIG6VMFn0WjCUQTP0FeICERcCAREQAQ/IVSCCEJe0JupQBMsfEssHgQEBzwCBAQHPAMmlhwL+ChEiCgkRIQmBAQFWIQoJESEJViAJCBEgCAcRKAcGESYGBREnBQQRHAQDERwDAhEcAgERJgERJ8hV0Ns8yQMREwMQLwEREQEgbpUwWfRaMJRBM/QV4vgoDBEZDAsRGAsKERcKCREWCQgRFQgHERQHBhETBgUREgUEEREEAxEQA6WGATAQLxBOEDwQSxCKEIkQaBBHFhA1RDAS2zymArLIgljAAAAAAAAAAAAAAAABActnzMlw+wAefwERF3EQI21tbds8+EIJERYJCBEVCAcRFAcGERMGBRESBQQREQQDERADT+AQjBBrEIoQKRAoEFYQRRA0EnDbPKqjA/4BERABUf6BS2kP2zynA1YmqgCgViWgERURKhEVERQRKREUERMRKBETERIRJxESERERJhERERARJREQDxEkDw4RIw4NESINDBEhDAsRIAsKER8KCREeCQgRHQgHERwHBhEbBgURGgUEERkEAxEYAwIRFwIBERYBESrbPAERKwGglYyLA/4BERABUf6BS2kP2zynBlYmpwOgViWgERURKhEVERQRKREUERMRKBETERIRJxESERERJhERERARJREQDxEkDw4RIw4NESINDBEhDAsRIAsKER8KCREeCQgRHQgHERwHBhEbBgURGgUEERkEAxEYAwIRFwIBERYBESrbPAERKwGglYyNA/zbPFYlbrOXESUgbvLQgJRXJfhC4n+BAQFWHggHER4HVh0HBhEdBlYcBlYcBlYcBlYlBgURLgUEESUEEwIRKAIBESgBESfIVdDbPMkCERQCAREaAVYfASBulTBZ9FowlEEz9BXiBhEdBgURFQUEERwEAxETAwIREQIBERABD3COpY8AFgERIgG+AREgAfL0ARz4QW8k2zxWEqoAoFYRoJUAIoIJ6EgAoAERIgG+AREgAfL0AJiBXm0Bs/L0cIEBC/hCLllxQTP0Cm+hlAHXADCSW23iIG6zljEgbvLQgJEw4oIAoPcB8vSCAJsXIVYYoPgju/L0gUGMAVYWoPgjvPL0AqARGIBAER1/ER0QZxBWEEUQNBAjyFWQ2zzJVEEUAxESAwIRFgIRFQEUQzBtbds8BBEVBAMRFAMCERMCARESAREREN9NvhwQmhB5BggHBEVVA5CqAKiCEP9X5VdQC8sfGcs/F8sHUAUg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIzxYTgQEBzwCBAQHPAAHIgQEBzwASygASyz8SgQEBzwAS9ADJAcwASNMfAYIQ7wHCtLry4IGBAQHXAIEBAdcA0z/SAIEBAdcA9ARVUAGy0weBAQHXAPpAASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IgB0gCBAQHXANQB0IEBAdcAgQEB1wDSAIEBAdcA1DDQgQEB1wDSANIAAZWBAQHXAJJtAeKUA6ogbvLQgG8uMizACpF/kyzAC+KOlgEREAFR/oFLaQ/bPKoAViSgHb4b8vSOngEREAFR/oFLaQ/bPKoBViSqAKCCCehIAKAdvhvy9OIowAqRf5MowAvilZWWAMr6QCHXCwHDAI4dASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IiSMW3iAdQw0PpAIdcLAcMAjh0BINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiJIxbeIxEJ4QnRCcEJsQmgBkbDH6QAEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIMPoAMXHXIfoAMfoAMKcDqwACBOMPl5gD4DZfBDQ0NymBAQEpWfQNb6GSMG3fIG6SMG2OINCBAQHXAIEBAdcAgQEB1wDUAdCBAQHXADAUQzBsFG8E4iBus48mIG7y0IBvJCPCAJMiwgCRcOKSbCLjDSHCAJMgwgCRcOKTWzYw4w2TMDYw4oEBAW2ZmpsB/FNowAOXMCsgbvLQgN5WGKSBAQFzAVYTAVYTUlIRFMhVQFBFgQEBzwASgQEBzwCBAQHPAMhYINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8WEoEBAc8AyQHMyQIRGwIBERABVhoBIG6VMFn0WjCUQTP0FeJWGBCsEJsQiqQB/IAN+EJwVHAAUwARHxEpER8RHhEoER4RHREnER0RHBEmERwRGxElERsRGhEkERoRGREjERkRGBEiERgRFxEhERcRFhEgERYRFREpERURFBEoERQRExEnERMREhEmERIRERElEREREBEkERAPESMPDhEiDg0RIQ0MESAMCxEpC5wB/IAO+EJwVHAAUwARIREnESERIBEmESARHxElER8RHhEkER4RHREjER0RHBEiERwRGxEnERsRGhEmERoRGRElERkRGBEkERgRFxEjERcRFhEiERYRFREnERURFBEmERQRExElERMREhEkERIREREjEREREBEiERAPEScPDhEmDp4D+iBukjBtjo0gbvLQgG8uyFXQ2zzJ4icQOwEgbpUwWfRaMJRBM/QV4kRTyFUgghD+zzp/UATLHxLLB4EBAc8AgQEBzwDJyIJYwAAAAAAAAAAAAAAAAQHLZ8zJcPsAIm6zjpECIG7y0IB/WAZxECNtbW3bPJIyNOIjbrORM+MNpaqiAv4KESgKEHkQaFYmCFYiCAYRKwYFESoFBBErBAMRKgMCESsCAREqAREr2zwwERURHxEVERQRHhEUERMRHRETERIRHBESERERGxERERARGhEQDxEZDw4RGA4NERcNDBEWDAsRFQsKERQKCRETCQgREggHEREHBhEQBhBfEE4QPUyqn50AAgsBwg0RJQ0MESQMEHsQagkRIgkQeBBXBhEiBts8MBEVERsRFREUERoRFBETERkRExESERgREhERERcREREQERYREA8RFQ8OERQODRETDQwREgwLERELChEQChCfEI4QfRBsVVWfAfQspCzACpF/kyzAC+KOPSmzgQEBVHdlJ8hVMFA0gQEBzwCBAQHPAIEBAc8AAciBAQHPAMkBzMkCERECVhABIG6VMFn0WjCUQTP0FeKOESzADJEpmSzADZEpkimz4uIP4oEBAfgjcG1tbVYTBVYSBVYUBVYTBVYTBVYTBaACwFYTBVYcBVYQBVUDyFXQ2zzJAhESAlYQASBulTBZ9FowlEEz9BXiEM0QrS4QrhCeEI4QNwYQXgQREAQCERAeVRXIVdDbPMnIgljAAAAAAAAAAAAAAAABActnzMlw+wBVIKWhAPSCEO4qmDFQD8sfHcsHG4EBAc8AUAkg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIzxYXygAVgQEBzwADyIEBAc8AEoEBAc8AygASgQEBzwACyIEBAc8AE4EBAc8AE4EBAc8AA8iBAQHPABSBAQHPAMlYzMkBzMkBzAESAyBu8tCAcNs8owFC+EFvJBNfAwGhVhOhVhKhIMIAjopwAXIQI21tbds8kVviqgJgEHkQaBBXEEYQNUQNgQEBD8hV0Ns8yRA4FSBulTBZ9FowlEEz9BXi+CgQPBYbE9s8paYB1FDeywcbgQEBzwBQCSDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFhfKABWBAQHPAAPIgQEBzwASgQEBzwDKABKBAQHPAALIgQEBzwATygAjbrOafwHKABOBAQHPAJYzcFADygDiUAOnAvRWExEWERoRFhEVERkRFREUERgRFBETERcRExESERoREhERERkREREQERgREA8RFw8OERoODREZDQwRGAwLERcLChEaCgkRGQkIERgIBxEXBwYRGgYFERkFBBEYBAMRFwMCERoCAREZAREYcBEYgEARHHARHNs8BBEYBKipAL4gbpUwcAHLAY4eINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8W4shQBCBulTBwAcsBjh4g10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIzxbiyVADzMlYzMkBzAC2yIIQD4p+pQHKHxTKP1j6AgEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIzxYBINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8WcAHKAHD6AsjJ0M8WyQFiAxEXAwIRGgIBERkBFEMwbW3bPBERERUREREQERQREA8REw8OERIODRERDQwREAxVO6oByshxAcoBUAcBygBwAcoCUAUg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIzxZQA/oCcAHKaCNus5F/kyRus+KXMzMBcAHKAOMNIW6znH8BygABIG7y0IABzJUxcAHKAOLJAfsAqwCYfwHKAMhwAcoAcAHKACRus51/AcoABCBu8tCAUATMljQDcAHKAOIkbrOdfwHKAAQgbvLQgFAEzJY0A3ABygDicAHKAAJ/AcoAAslYzAIBIK6vAgFitbYCAWawsQIZtQdbZ5tniuIL4e2MMLy9Apipm9s8ERURFhEVERQRFREUERMRFBETERIRExESEREREhERERAREREQDxEQD1UO2zxXEF8PbGEgbpIwbZkgbvLQgG8qbwriIG6SMG3evLICmKry2zwRFREWERURFBEVERQRExEUERMREhETERIRERESEREREBERERAPERAPVQ7bPFcQXw9sYSBukjBtmSBu8tCAbypvCuIgbpIwbd68sgE6gQEBJgJZ9A1voZIwbd8gbpIwbY6H0Ns8bBpvCuKzAe7TB/pAASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IgBgQEB1wCBAQHXANQB0IEBAdcAgQEB1wDSANIAAZWBAQHXAJJtAeLUMND6QCHXCwHDAI4dASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IiSMW3iAbQAaPpAIdcLAcMAjh0BINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiJIxbeIxEGoQaRBoEGcCASC3uAIZrpBtnm2eK4gvh7YwwLy9Aviq4SFukjFtjh0BINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiOIhbpIxbY4dASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4Iji2zwRFREXERURFBEWERQRExEVERMREhEUERIRERETEREREBESERAPEREPDhEQDlUdvLkCGKkd2zzbPFcQXw9sYby7AQzbPGyqbMq6ALhtIm6zjh4wgQELAiBu8tCAVE0zcUEz9ApvoZQB1wAwkltt4gGRMuJtIW6zjhwwgQELASBu8tCALFlxQTP0Cm+hlAHXADCSW23ikTHiVhdWF1YXVhdWF1YXVhdWFwACKwKG7UTQ1AH4Y9IAAY6o2zxXFhEUERURFBETERQRExESERMREhERERIREREQEREREA8REA9VDuAw+CjXCwqDCbry4InbPL6/AAIjAdCBAQHXAIEBAdcAgQEB1wDUAdCBAQHXAIEBAdcAgQEB1wDUMND6QAEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIAfpAASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IgB9ATTP8ABvHaBBwiBALSCEAvrwgCCCvrwgIIJycOAbXFtbW0jbSFtIW1tIvhCgQEL+EJ/JBBPIW6VW1n0WTCYyAHPAEEz9EHigQEL+EJ/JBBOIW6VW1n0WTCYyAHPAEEz9EHicCDBAJ76QAEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIAfQE9ATUMND0BNM/9ATTP/QE0z/UMND0BPQE0z8wERMRFhETERMRFRETERMRFBETAMzIcgHLAXABywASygfL/8nQINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiHAgyHIBywFwAcsAEsoHy//J0CDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IgODFD6HUm3RoRFBQM=","abi":"{\"name\":\"OrderBook\",\"types\":[{\"name\":\"StateInit\",\"header\":null,\"fields\":[{\"name\":\"code\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"data\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}}]},{\"name\":\"Context\",\"header\":null,\"fields\":[{\"name\":\"bounced\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"sender\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"raw\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false}}]},{\"name\":\"SendParameters\",\"header\":null,\"fields\":[{\"name\":\"bounce\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"to\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"mode\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"body\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"code\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"data\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"Deploy\",\"header\":2490013878,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"DeployOk\",\"header\":2952335191,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"FactoryDeploy\",\"header\":1829761339,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"cashback\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"ChangeOwner\",\"header\":2174598809,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"newOwner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"ChangeOwnerOk\",\"header\":846932810,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"newOwner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"TokenNotification\",\"header\":1935855772,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"from\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"forwardPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false,\"format\":\"remainder\"}}]},{\"name\":\"TokenExcesses\",\"header\":3576854235,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"UpdateConfig\",\"header\":2288110707,\"fields\":[{\"name\":\"executor\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"enableExecutor\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":true}},{\"name\":\"compensator\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"enableCompensator\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":true}},{\"name\":\"minTimeDelayExecutor\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}},{\"name\":\"maxTimeDelayExecutor\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}},{\"name\":\"minTimeDelayTrader\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}},{\"name\":\"minPendingTimeDelayCompensator\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}},{\"name\":\"minExecutionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}},{\"name\":\"gasConsumption\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}},{\"name\":\"minTonsForStorage\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}},{\"name\":\"usdtWallet\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"pool\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}}]},{\"name\":\"CreateDecreaseRBFPositionOrder\",\"header\":2702271213,\"fields\":[{\"name\":\"executionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"liquidityDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"CancelRBFPositionOrder\",\"header\":3161392643,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}}]},{\"name\":\"ExecuteRBFPositionOrder\",\"header\":636249025,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"pricesLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"prices\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"UpdatePrice\",\"valueFormat\":\"ref\"}}]},{\"name\":\"UpdateRBFPosition\",\"header\":3902592095,\"fields\":[{\"name\":\"isIncrease\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"liquidityDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"pricesLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"prices\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"UpdatePrice\",\"valueFormat\":\"ref\"}}]},{\"name\":\"UpdateRBFPositionSuccess\",\"header\":485543809,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"receive\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"CompensateRBFPositionOrder\",\"header\":167321554,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"needRefund\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"isExecute\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"pricesLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"prices\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"UpdatePrice\",\"valueFormat\":\"ref\"}}]},{\"name\":\"CreateDecreaseLPPositionOrder\",\"header\":1912782205,\"fields\":[{\"name\":\"executionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"marginDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"liquidityDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"CancelLPPositionOrder\",\"header\":1477803963,\"fields\":[{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"ExecuteLPPositionOrder\",\"header\":3500233221,\"fields\":[{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"pricesLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"prices\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"UpdatePrice\",\"valueFormat\":\"ref\"}}]},{\"name\":\"LiquidateLPPositionOrder\",\"header\":1675438247,\"fields\":[{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"pricesLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"prices\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"UpdatePrice\",\"valueFormat\":\"ref\"}}]},{\"name\":\"UpdateLPPosition\",\"header\":4272122737,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"marginDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"liquidityDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"pricesLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"prices\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"UpdatePrice\",\"valueFormat\":\"ref\"}}]},{\"name\":\"UpdateLPPositionSuccess\",\"header\":1233766337,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"receive\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"CompensateLPPositionOrder\",\"header\":3086175268,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"needRefund\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"isExecute\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}}]},{\"name\":\"CreateDecreasePerpPositionOrder\",\"header\":229084921,\"fields\":[{\"name\":\"executionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"tokenId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"isLong\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"marginDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"sizeDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"triggerPrice\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"CancelPerpPositionOrder\",\"header\":4187297011,\"fields\":[{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"ExecutePerpPositionOrder\",\"header\":4127026030,\"fields\":[{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"pricesLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"prices\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"UpdatePrice\",\"valueFormat\":\"ref\"}},{\"name\":\"tpSlLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"tpSlOrders\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"int\"}}]},{\"name\":\"LiquidatePerpPositionOrder\",\"header\":2595294022,\"fields\":[{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"tokenId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"isLong\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"pricesLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"prices\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"UpdatePrice\",\"valueFormat\":\"ref\"}}]},{\"name\":\"UpdatePerpPosition\",\"header\":4283950423,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"marginDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"sizeDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"triggerPrice\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"triggerAbove\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"pricesLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"prices\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"UpdatePrice\",\"valueFormat\":\"ref\"}}]},{\"name\":\"UpdatePerpPositionSuccess\",\"header\":4009870004,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"receive\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"isClosed\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"tpSlLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"tpSlOrders\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"int\"}}]},{\"name\":\"CompensatePerpPositionOrder\",\"header\":1214351731,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"needRefund\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"isExecute\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}}]},{\"name\":\"RBFPositionOrderCreatedEvent\",\"header\":3479394200,\"fields\":[{\"name\":\"isIncrease\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"liquidityDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"executionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"RBFPositionOrderCancelledEvent\",\"header\":609511108,\"fields\":[{\"name\":\"isIncrease\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"RBFPositionOrderExecutedEvent\",\"header\":2435559759,\"fields\":[{\"name\":\"isIncrease\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"LPPositionOrderCreatedEvent\",\"header\":3912257011,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"marginDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"liquidityDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"executionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"LPPositionOrderCancelledEvent\",\"header\":275376848,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"LPPositionOrderExecutedEvent\",\"header\":3610195672,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"PerpPositionOrderCreatedEvent\",\"header\":3995768881,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"tokenId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"isLong\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"marginDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"sizeDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"triggerPrice\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"triggerAbove\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"tpSize\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"tpPrice\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"slSize\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"slPrice\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"executionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"PerpPositionOrderCancelledEvent\",\"header\":2545166058,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"PerpPositionOrderExecutedEvent\",\"header\":4274993791,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"TokenConfig\",\"header\":null,\"fields\":[{\"name\":\"name\",\"type\":{\"kind\":\"simple\",\"type\":\"string\",\"optional\":false}},{\"name\":\"enable\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}}]},{\"name\":\"ConfigData\",\"header\":null,\"fields\":[{\"name\":\"isExecutor\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":true}},{\"name\":\"isCompensator\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":true}},{\"name\":\"minTimeDelayExecutor\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"maxTimeDelayExecutor\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"minTimeDelayTrader\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"minExecutionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"gasConsumption\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"minTonsForStorage\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"usdtWallet\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"pool\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"JettonCallback\",\"header\":null,\"fields\":[{\"name\":\"orderType\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"receiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"RBFPositionOrder\",\"header\":null,\"fields\":[{\"name\":\"isIncrease\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"liquidityDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"executionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"blockTime\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"isPending\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"callbackId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}},{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"lastOperator\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}}]},{\"name\":\"LPPositionOrder\",\"header\":null,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"marginDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"liquidityDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"executionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"blockTime\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"isPending\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"callbackId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}},{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"lastOperator\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}}]},{\"name\":\"PerpPositionOrder\",\"header\":null,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"tokenId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"isLong\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"marginDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"sizeDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"triggerPrice\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"triggerAbove\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"executionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"blockTime\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"isPending\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"callbackId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}},{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"lastOperator\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}}]},{\"name\":\"PerpPositionOrderEx\",\"header\":null,\"fields\":[{\"name\":\"tpSize\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"tpPrice\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"slSize\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"slPrice\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"UpdatePrice\",\"header\":null,\"fields\":[{\"name\":\"tokenId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"price\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]}],\"receivers\":[{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"UpdateConfig\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"TokenNotification\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"TokenExcesses\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"CreateDecreaseRBFPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"CancelRBFPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"ExecuteRBFPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"UpdateRBFPositionSuccess\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"CreateDecreaseLPPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"CancelLPPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"ExecuteLPPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"UpdateLPPositionSuccess\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"LiquidateLPPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"CreateDecreasePerpPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"CancelPerpPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"ExecutePerpPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"UpdatePerpPositionSuccess\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"LiquidatePerpPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"Deploy\"}}],\"getters\":[{\"name\":\"configData\",\"arguments\":[{\"name\":\"executor\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"compensator\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}}],\"returnType\":{\"kind\":\"simple\",\"type\":\"ConfigData\",\"optional\":false}},{\"name\":\"rbfPositionOrder\",\"arguments\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}],\"returnType\":{\"kind\":\"simple\",\"type\":\"RBFPositionOrder\",\"optional\":true}},{\"name\":\"rbfPositionOrderIndexNext\",\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"lpPositionOrder\",\"arguments\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}],\"returnType\":{\"kind\":\"simple\",\"type\":\"LPPositionOrder\",\"optional\":true}},{\"name\":\"lpPositionOrderIndexNext\",\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"perpPositionOrder\",\"arguments\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}],\"returnType\":{\"kind\":\"simple\",\"type\":\"LPPositionOrder\",\"optional\":true}},{\"name\":\"perpPositionOrderIndexNext\",\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"owner\",\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}],\"errors\":{\"2\":{\"message\":\"Stack undeflow\"},\"3\":{\"message\":\"Stack overflow\"},\"4\":{\"message\":\"Integer overflow\"},\"5\":{\"message\":\"Integer out of expected range\"},\"6\":{\"message\":\"Invalid opcode\"},\"7\":{\"message\":\"Type check error\"},\"8\":{\"message\":\"Cell overflow\"},\"9\":{\"message\":\"Cell underflow\"},\"10\":{\"message\":\"Dictionary error\"},\"13\":{\"message\":\"Out of gas error\"},\"32\":{\"message\":\"Method ID not found\"},\"34\":{\"message\":\"Action is invalid or not supported\"},\"37\":{\"message\":\"Not enough TON\"},\"38\":{\"message\":\"Not enough extra-currencies\"},\"128\":{\"message\":\"Null reference exception\"},\"129\":{\"message\":\"Invalid serialization prefix\"},\"130\":{\"message\":\"Invalid incoming message\"},\"131\":{\"message\":\"Constraints error\"},\"132\":{\"message\":\"Access denied\"},\"133\":{\"message\":\"Contract stopped\"},\"134\":{\"message\":\"Invalid argument\"},\"135\":{\"message\":\"Code of a contract was not found\"},\"136\":{\"message\":\"Invalid address\"},\"137\":{\"message\":\"Masterchain support is not enabled for this contract\"},\"16780\":{\"message\":\"order expired\"},\"19305\":{\"message\":\"gas not enough\"},\"24173\":{\"message\":\"order is pending\"},\"24562\":{\"message\":\"execution fee not enough\"},\"32637\":{\"message\":\"order not exist\"},\"39703\":{\"message\":\"too early\"},\"41207\":{\"message\":\"invalid sender\"}},\"interfaces\":[\"org.ton.introspection.v0\",\"org.ton.abi.ipfs.v0\",\"org.ton.deploy.lazy.v0\",\"org.ton.chain.workchain.v0\",\"org.ton.ownable\"]}","init":{"kind":"direct","args":[],"prefix":{"bits":1,"value":0},"deployment":{"kind":"system-cell","system":"te6cckECxAEAPFcAAQHAAQEFoHshAgEU/wD0pBP0vPLICwMCAWIgBAIBIBAFAgEgCQYCAUgIBwB1sm7jQ1aXBmczovL1FtTnhNS1R3OHl0bUtBZlhWMVdCbWZHOG5lcGFCUnJScml6Y0tiVmhLSGhVTWWCAAEbCvu1E0NIAAYAIBIAsKALm3ejBOC52Hq6WVz2PQnYc6yVCjbNBOE7rGpaVsj5ZkWnXlv74sRzBOBAq4A3AM7HKZywdVyOS2WHBOE7Lpy1Zp2W5nQdLNsozdFJBOCBnOrTzivzpKFgOsLcTI9lACASAODAKZsx62zwRFREWERURFBEVERQRExEUERMREhETERIRERESEREREBERERAPERAPVQ7bPFcQXw9sYSBukjBtmSBu8tCAbylvCeIgbpIwbd6C/DQE6gQEBKAJZ9A1voZIwbd8gbpIwbY6H0Ns8bBlvCeK9AhmxFDbPNs8VxBfD2xhgvw8AAiUCASAZEQIBYhMSAhmukG2ebZ4riC+HtjDAvxsCASAWFAIYqR3bPNs8VxBfD2xhvxUAAisC+KrhIW6SMW2OHQEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCI4iFukjFtjh0BINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiOLbPBEVERcRFREUERYRFBETERURExESERQREhERERMREREQERIREA8REQ8OERAOVR2/FwEM2zxsqmzKGAC4bSJus44eMIEBCwIgbvLQgFRNM3FBM/QKb6GUAdcAMJJbbeIBkTLibSFus44cMIEBCwEgbvLQgCxZcUEz9ApvoZQB1wAwkltt4pEx4lYXVhdWF1YXVhdWF1YXVhcCASAcGgIZtQdbZ5tniuIL4e2MML8bAAIjAgFmHh0CmKry2zwRFREWERURFBEVERQRExEUERMREhETERIRERESEREREBERERAPERAPVQ7bPFcQXw9sYSBukjBtmSBu8tCAbypvCuIgbpIwbd6/HwKYqZvbPBEVERYRFREUERURFBETERQRExESERMREhERERIREREQEREREA8REA9VDts8VxBfD2xhIG6SMG2ZIG7y0IBvKm8K4iBukjBt3r8fATqBAQEmAln0DW+hkjBt3yBukjBtjofQ2zxsGm8K4rgD0tAB0NMDAXGwowH6QAEg10mBAQu68uCIINcLCiCB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KyBu8tCA3lYYpIEBAXMBVhMBVhNSUhEUyFVAUEWBAQHPABKBAQHPAIEBAc8AyFgg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIzxYSgQEBzwDJAczJAhEbAgEREAFWGgEgbpUwWfRaMJRBM/QV4lYYEKwQmxCKNgJgEHkQaBBXEEYQNUQNgQEBD8hV0Ns8yRA4FSBulTBZ9FowlEEz9BXi+CgQPBYbE9s8sZ8D4DZfBDQ0NymBAQEpWfQNb6GSMG3fIG6SMG2OINCBAQHXAIEBAdcAgQEB1wDUAdCBAQHXADAUQzBsFG8E4iBus48mIG7y0IBvJCPCAJMiwgCRcOKSbCLjDSHCAJMgwgCRcOKTWzYw4w2TMDYw4oEBAW08OjgD+iBukjBtjo0gbvLQgG8uyFXQ2zzJ4icQOwEgbpUwWfRaMJRBM/QV4kRTyFUgghD+zzp/UATLHxLLB4EBAc8AgQEBzwDJyIJYwAAAAAAAAAAAAAAAAQHLZ8zJcPsAIm6zjpECIG7y0IB/WAZxECNtbW3bPJIyNOIjbrORM+MNsac5ARIDIG7y0IBw2zyeAfyADvhCcFRwAFMAESERJxEhESARJhEgER8RJREfER4RJBEeER0RIxEdERwRIhEcERsRJxEbERoRJhEaERkRJREZERgRJBEYERcRIxEXERYRIhEWERURJxEVERQRJhEUERMRJRETERIRJBESERERIxERERARIhEQDxEnDw4RJg47AcINESUNDBEkDBB7EGoJESIJEHgQVwYRIgbbPDARFREbERURFBEaERQRExEZERMREhEYERIREREXEREREBEWERAPERUPDhEUDg0REw0MERIMCxERCwoREAoQnxCOEH0QbFVVUgH8gA34QnBUcABTABEfESkRHxEeESgRHhEdEScRHREcESYRHBEbESURGxEaESQRGhEZESMRGREYESIRGBEXESERFxEWESARFhEVESkRFREUESgRFBETEScRExESESYREhERESUREREQESQREA8RIw8OESIODREhDQwRIAwLESkLPQL+ChEoChB5EGhWJghWIggGESsGBREqBQQRKwQDESoDAhErAgERKgERK9s8MBEVER8RFREUER4RFBETER0RExESERwREhERERsREREQERoREA8RGQ8OERgODREXDQwRFgwLERULChEUCgkREwkIERIIBxERBwYREAYQXxBOED1MqlI+AAILAEjTHwGCEO8BwrS68uCBgQEB1wCBAQHXANM/0gCBAQHXAPQEVVAE1Fv4QW8kK4EBASlZ9A1voZIwbd8gbpIwbY6H0Ns8bB5vDuKBf30hbrPy9CBu8tCAby4xLMAB4w8REhEWERIREREVEREREBEUERAPERMPDhESDg0REQ0MERAMVTsDER4DAhEfAgERJwEgER+zRkRBA/zbPFYlbrOXESUgbvLQgJRXJfhC4n+BAQFWHggHER4HVh0HBhEdBlYcBlYcBlYcBlYlBgURLgUEESUEEwIRKAIBESgBESfIVdDbPMkCERQCAREaAVYfASBulTBZ9FowlEEz9BXiBhEdBgURFQUEERwEAxETAwIREQIBERABD3B+sUICoBEYgEARHX8RHRBnEFYQRRA0ECPIVZDbPMlUQRQDERIDAhEWAhEVARRDMG1t2zwEERUEAxEUAwIREwIBERIBEREQ302+HBCaEHkGCAcERVUDQ6cAqIIQ/1flV1ALyx8Zyz8XywdQBSDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFhOBAQHPAIEBAc8AAciBAQHPABLKABLLPxKBAQHPABL0AMkBzAP+AREQAVH+gUtpD9s8pwZWJqcDoFYloBEVESoRFREUESkRFBETESgRExESEScREhERESYREREQESUREA8RJA8OESMODREiDQwRIQwLESALChEfCgkRHgkIER0IBxEcBwYRGwYFERoFBBEZBAMRGAMCERcCAREWAREq2zwBESsBoKKDRQAiggnoSACgAREiAb4BESAB8vQD/gEREAFR/oFLaQ/bPKcDViaqAKBWJaARFREqERURFBEpERQRExEoERMREhEnERIREREmEREREBElERAPESQPDhEjDg0RIg0MESEMCxEgCwoRHwoJER4JCBEdCAcRHAcGERsGBREaBQQRGQQDERgDAhEXAgERFgERKts8ARErAaCig0cAFgERIgG+AREgAfL0ALbTHwGCEPX9a2668uCB+kAh1wsBwwCOHQEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIkjFt4gGBAQHXAIEBAdcA1AHQgQEB1wD0BIEBAdcA9AQwEEcQRhBFBOz4QW8kKYEBASdZ9A1voZIwbd8gbpIwbY6H0Ns8bB5vDuKBf30hbrPy9CBu8tCAby5fAyrAAY6eVB7cgUtpDds8qgFWIqoAoFYhoIIJ6EgAoBu+GfL0jpZUHtyBS2kN2zyqAFYioFYhoBu+GfL04vhCERcRJBEXs6KiSgPeERYRIxEWERURIhEVERQRIREUERMRIBETERIRHxESERERHhERERARHREQDxEcDw4RGw4NERoNDBEZDAsRGAsKESQKCREjCQgRIggHESEHBhEgBgURHwUEER4EAxEdAwIRHAJWGAIRJds8Vh/AAeMPik1LAu5XFlcZVxlXGVcZVxlXGlcb+EJWEm6zmjARESBu8tCAERGSVxLigQEBbSBukjBtjo0gbvLQgG8uyFXQ2zzJ4gIRFQJWEgEgbpUwWfRaMJRBM/QV4gIRFwIBERABD8hVIIIQl7Qm6lAEyx8SyweBAQHPAIEBAc8AybFMArLIgljAAAAAAAAAAAAAAAABActnzMlw+wAefwERF3EQI21tbds8+EIJERYJCBEVCAcRFAcGERMGBRESBQQREQQDERADT+AQjBBrEIoQKRAoEFYQRRA0EnDbPKeeAfonpIEBAXMBVhsBVh8BViIBER3IVUBQRYEBAc8AEoEBAc8AgQEBzwDIWCDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFhKBAQHPAMkBzMkQKgERGQFSkCBulTBZ9FowlEEz9BXiVhlus5cRGSBu8tCAlFcZ+ELi+EJ/KU4C/goRIgoJESEJgQEBViEKCREhCVYgCQgRIAgHESgHBhEmBgURJwUEERwEAxEcAwIRHAIBESYBESfIVdDbPMkDERMDEC8BEREBIG6VMFn0WjCUQTP0FeL4KAwRGQwLERgLChEXCgkRFgkIERUIBxEUBwYREwYFERIFBBERBAMREAOxTwEwEC8QThA8EEsQihCJEGgQRxYQNUQwEts8nwLs+EFvJIFLaVMroVUx2zyqAFYboFYaoL7y9IFf8idWG77y9PhCcFRwABEgESERIBEfESERHxEeESERHhEdESERHREcESERHBEbESERGxEaESERGhEZESERGREYESERGBEXESERFxEWESERFhEVESERFREUESERFKJRAt4RExEhERMREhEhERIREREhEREREBEhERAPESEPDhEhDg0RIQ0MESEMCxEhCxBJEEgQRxBGEEVWIds8MPhCERYRFxEWERUR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C9s8pwZWIqcDoFYhoBEVESYRFREUESURFBETESQRExESESMREhERESIREREQESEREA8RIA8OER8ODREeDQwRHQwLERwLChEbCgkRGgkIERkIBxEYBwYRFwYFERYFBBEmBAMRJQMCESQCAREjAREi2zwBESMBoKKDZgAiggnoSACgAREaAb4BERgB8vQD+FQcuoFLaQvbPKcDViKqAKBWIaARFREmERURFBElERQRExEkERMREhEjERIREREiEREREBEhERAPESAPDhEfDg0RHg0MER0MCxEcCwoRGwoJERoJCBEZCAcRGAcGERcGBREWBQQRJgQDESUDAhEkAgERIwERIts8AREjAaCig2gAFgERGgG+AREYAfL0BOz4QW8kK4EBASdZ9A1voZIwbd8gbpIwbY6H0Ns8bBpvCuKBf30hbrPy9CBu8tCAbypfAybAAY6eVBqYgUtpCds8qgFWHqoAoFYdoIIJ6EgAoBe+FfL0jpZUGpiBS2kJ2zyqAFYeoFYdoBe+FfL04vhCERcRIBEXuKKiagPeERYRHxEWERURHhEVERQRHREUERMRHBETERIRGxESERERGhERERARGREQDxEYDw4RIA4NER8NDBEeDAsRHQsKERwKCREbCQgRGggHERkHBhEYBgURIAUEER8EAxEeAwIRHQJWGQIRGds8VhzAAeMPim1rAthXFlcWVxlXGvhCVhdus5owERYgbvLQgBEWklcX4oEBAW0gbpIwbY6NIG7y0IBvKshVkNs8yeJWFwEgbpUwWfRaMJRBM/QV4gIRGAIBERUBERTIVSCCEBBp6tBQBMsfEssHgQEBzwCBAQHPAMm2bAK6yIJYwAAAAAAAAAAAAAAAAQHLZ8zJcPsAARETAX8BERhxECNtbW3bPPhCDREWDQwRFQwLERQLChETCgkREgkIEREIBxEQBxBvEF4QTRA8S6AQSBAnEEZFMERAcNs8p54B+iekgQEBcgFWHAFWGgFWIAERHshVQFBFgQEBzwASgQEBzwCBAQHPAMhYINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8WEoEBAc8AyQHMyRAqAREaAVKQIG6VMFn0WjCUQTP0FeJWGm6zlxEaIG7y0ICUVxr4QuL4Qn8pbgL+BhEfBoEBAVYfB1YbBwYRIwYFESQFBBEdBAMRHQMCER0CAREjAREkyFWQ2zzJEwIRFAIBERYBIG6VMFn0WjCUQTP0FeL4KBEQERkREA8RGA8OERcODREWDQwRFQwLERQLChETCgkREgkIEREIBxEQBxBvEF4QTRCrGBBXEDRBMLZvAQTbPJ8E9vhBbySBS2lTJ6FVMds8qgBWF6BWFqC+8vSBX/IjVhe+8vQmpIEBAXL4QvgjcG1tbSpRWlFdRRVQRAPIVZDbPMkpEDsBIG6VMFn0WjCUQTP0FeJy+EJVIVJayFVQ2zzJyIJYwAAAAAAAAAAAAAAAAQHLZ8zJcPsA+EIQVqK2mnEBBgHbPJ4CqDDTHwGCEBzwz4G68uCBgQEB1wCBAQHXANM/VSBsE/hBbySCAKD3+EJWFwHHBfL0LYEBAShZ9A1voZIwbd8gbpIwbY6H0Ns8bBlvCeIgbpJfCOMOf71zA3ogbvLQgG8pMieOk1QbqYFLaQrbPKoAVh+gGL4W8vSOm1QbqYFLaQrbPKoBVh+qAKCCCehIAKAYvhby9OIjoqJ0AgTjD3d1AvxWEqSBAQFxVG3TUn7IVUBQRYEBAc8AEoEBAc8AgQEBzwDIWCDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFhKBAQHPAMkBzMkCERUCGlYUASBulTBZ9FowlEEz9BXiVhIQRoEBASQHEEYFERYFBANQmshVgNs8yRA8QVC7dgEuIG6VMFn0WjCUQTP0FeL4KBA8GhsT2zyfA/45XwWBAQFtIG6SMG2OjSBu8tCAbynIVYDbPMniJhA+ASBulTBZ9FowlEEz9BXif0BTyFUgghCRK7FPUATLHxLKAIEBAc8AgQEBzwDJyIJYwAAAAAAAAAAAAAAAAQHLZ8zJcPsAKW6zjpAJIG7y0IB/WHEQI21tbds8kjkw4iduu6d4AR6zjokHIG7y0IBw2zyRN+KeAbQw0x8BghAl7GPBuvLggYEBAdcAgQEB1wD6QCHXCwHDAI4dASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IiSMW3iAdQB0IEBAdcA9AQwECUQJBAjbBXbPH96BOr4QW8kL4EBASpZ9A1voZIwbd8gbpIwbY6H0Ns8bBlvCeKBf30hbrPy9CBu8tCAbykxJ+MPERIRFhESERERFRERERARFBEQDxETDw4REg4NERENDBEQDBC/EK4QnRCMEHsQahBZEEgQN0YURVMBER0BVh8BER+9gX97BPjbPFYZbrOXERkgbvLQgJRXGfhC4n+BAQFWHwZWJAZWJAYFESQFBBEjBAMRIwMCERsCAREkAREhyFWA2zzJECMBERsBVhgBIG6VMFn0WjCUQTP0FeIDERgDAhEWAgERFQERHHARHIBAERV/ERUQNBAjyFVg2zzJJgQDERkDfrt9fAFqAhERAhEQARRDMG1t2zwJERUJCBEUCAcREwcGERIGBRERBQQREAQQP07cEIoJEFgQN0UWQ0SnAHqCEOic1F9QCMsfFsoAFMs/WCDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFoEBAc8Ayz+BAQHPAPQAAJiBXm0Bs/L0cIEBC/hCLllxQTP0Cm+hlAHXADCSW23iIG6zljEgbvLQgJEw4oIAoPcB8vSCAJsXIVYYoPgju/L0gUGMAVYWoPgjvPL0A/hUG6mBS2kK2zynBlYhpwOgViCgERURJREVERQRJBEUERMRIxETERIRIhESERERIRERERARIBEQDxEfDw4RHg4NER0NDBEcDAsRGwsKERoKCREZCQgRGAgHERcHBhEWBgURJQUEESQEAxEjAwIRIgIBESEBESDbPAERIQGgooOAACKCCehIAKABERgBvgERFgHy9AP4VBupgUtpCts8pwNWIaoAoFYgoBEVESURFREUESQRFBETESMRExESESIREhERESEREREQESAREA8RHw8OER4ODREdDQwRHAwLERsLChEaCgkRGQkIERgIBxEXBwYRFgYFESUFBBEkBAMRIwMCESICAREhAREg2zwBESEBoKKDggAWAREYAb4BERYB8vQBHPhBbyTbPFYSqgCgVhGgogT0+EFvJC2BAQEoWfQNb6GSMG3fIG6SMG2Oh9DbPGwZbwnigX99IW6z8vQgbvLQgG8pXwMljp5UGYeBS2kI2zyqAVYdqgCgVhygggnoSACgFr4U8vSOllQZh4FLaQjbPKoAVh2gVhygFr4U8vTi+EIRFxEfERcRFhEeERa9oqKFA84RFREdERURFBEcERQRExEbERMREhEaERIREREZEREREBEYERAPER8PDhEeDg0RHQ0MERwMCxEbCwoRGgoJERkJCBEYCAcRHwcGER4GBREdBQQRHAQDERsDAhEaAlYeAhEe2zxWGOMPioiGAthXGFcYVxlXGfhCVhpus5ow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lTBZ9FowlEEz9BXicVEwRlNSC8hVUNs8yciCWMAAAAAAAAAAAAAAAAEBy2fMyXD7AFAGBZ+2mpkBBNs8ngCOghDpME3zUAfLHxXLB1ADINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8WgQEBzwCBAQHPAAHIgQEBzwASgQEBzwDJAcwEVvhBbyRDMFIw2zyqAFIwoFYYoFYXoLmOhFsg2zzgUzC5joRbINs84CFWGLmin5+cA3yOhFsg2zzgMzMopIEBAX/4I3BtbW0oUVpRXEUVUEQDyFWA2zzJKxA9ASBulTBZ9FowlEEz9BXif1QiE1QkXJ+7nQHCyFVAghDPY1eYUAbLHxTKAFgg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIzxaBAQHPAIEBAc8AAciBAQHPAMkBzMnIgljAAAAAAAAAAAAAAAABActnzMlw+wAQeAHbPJ4BQvhBbyQTXwMBoVYToVYSoSDCAI6KcAFyECNtbW3bPJFb4qcC9FYTERYRGhEWERURGREVERQRGBEUERMRFxETERIRGhESERERGRERERARGBEQDxEXDw4RGg4NERkNDBEYDAsRFwsKERoKCREZCQgRGAgHERcHBhEaBgURGQUEERgEAxEXAwIRGgIBERkBERhwERiAQBEccBEc2zwEERgEoaABYgMRFwMCERoCAREZARRDMG1t2zwREREVEREREBEUERAPERMPDhESDg0REQ0MERAMVTunALbIghAPin6lAcofFMo/WPoCASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFgEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIzxZwAcoAcPoCyMnQzxbJAGRsMfpAASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4Igw+gAxcdch+gAx+gAwpwOrAAP2NREVESERFREUESARFBETER8RExESER4REhERER0REREQERwREA8RGw8OERoODREZDQwRGAwLERcLChEWCgkRIQkIESAIBxEfBwYRHgYFER0FBBEcBAMRGwMCERoCAREZAREY2zxWF26zlFYWbrORcOKUVxZXFuMNVh9uqqmkAfyzlFYebrORcOKOL4EBCxEgIG7y0IARHyBu8tCAEDgCESACAREfAXEhbpVbWfRZMJjIAc8AQTP0QeIFlFce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"}},"sources":{"contracts/order/messages.tact":"aW1wb3J0ICIuL3N0cnVjdHMiOwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBKRVRUT04gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KCm1lc3NhZ2UoMHg3MzYyZDA5YykgVG9rZW5Ob3RpZmljYXRpb24gewogICAgcXVlcnlJZDogSW50IGFzIHVpbnQ2NDsKICAgIGFtb3VudDogSW50IGFzIGNvaW5zOwogICAgZnJvbTogQWRkcmVzczsKICAgIGZvcndhcmRQYXlsb2FkOiBTbGljZSBhcyByZW1haW5pbmc7IC8vIENvbW1lbnQgVGV4dCBtZXNzYWdlIHdoZW4gVHJhbnNmZXIgdGhlIGpldHRvbiAKfQoKbWVzc2FnZSgweGQ1MzI3NmRiKSBUb2tlbkV4Y2Vzc2VzIHsKICAgIHF1ZXJ5SWQ6IEludCBhcyB1aW50NjQ7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gYWRtaW4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KbWVzc2FnZSBVcGRhdGVDb25maWcgewogICAgZXhlY3V0b3I6IEFkZHJlc3M/OwogICAgZW5hYmxlRXhlY3V0b3I6IEJvb2w/OwogICAgY29tcGVuc2F0b3I6IEFkZHJlc3M/OwogICAgZW5hYmxlQ29tcGVuc2F0b3I6IEJvb2w/OwogICAgbWluVGltZURlbGF5RXhlY3V0b3I6IEludD87CiAgICBtYXhUaW1lRGVsYXlFeGVjdXRvcjogSW50PzsKICAgIG1pblRpbWVEZWxheVRyYWRlcjogSW50PzsKICAgIG1pblBlbmRpbmdUaW1lRGVsYXlDb21wZW5zYXRvcjogSW50PzsKICAgIG1pbkV4ZWN1dGlvbkZlZTogSW50PzsKICAgIGdhc0NvbnN1bXB0aW9uOiBJbnQ/OwogICAgbWluVG9uc0ZvclN0b3JhZ2U6IEludD87CiAgICB1c2R0V2FsbGV0OiBBZGRyZXNzPzsKICAgIHBvb2w6IEFkZHJlc3M/Owp9CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IFJCRiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwptZXNzYWdlIENyZWF0ZURlY3JlYXNlUkJGUG9zaXRpb25PcmRlciB7CiAgICBleGVjdXRpb25GZWU6IEludDsKICAgIGxpcXVpZGl0eURlbHRhOiBJbnQ7Cn0KCm1lc3NhZ2UgQ2FuY2VsUkJGUG9zaXRpb25PcmRlciB7CiAgICBvcmRlcklkOiBJbnQ7CiAgICB0cnhJZDogSW50OwogICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3M/Owp9CgptZXNzYWdlIEV4ZWN1dGVSQkZQb3NpdGlvbk9yZGVyIHsKICAgIG9yZGVySWQ6IEludDsKICAgIHRyeElkOiBJbnQ7CiAgICBleGVjdXRpb25GZWVSZWNlaXZlcjogQWRkcmVzcz87CiAgICBwcmljZXNMZW5ndGg6IEludDsKICAgIHByaWNlczogbWFwPEludCwgVXBkYXRlUHJpY2U+Owp9CgptZXNzYWdlKDB4ZTg5Y2Q0NWYpIFVwZGF0ZVJCRlBvc2l0aW9uIHsKICAgIGlzSW5jcmVhc2U6IEJvb2w7CiAgICBvcmRlcklkOiBJbnQgYXMgdWludDY0OwogICAgYWNjb3VudDogQWRkcmVzczsKICAgIGxpcXVpZGl0eURlbHRhOiBJbnQ7CiAgICB0cnhJZDogSW50IGFzIHVpbnQ2NDsKICAgIHByaWNlc0xlbmd0aDogSW50OwogICAgcHJpY2VzOiBtYXA8SW50LCBVcGRhdGVQcmljZT47Cn0KCm1lc3NhZ2UoMHgxY2YwY2Y4MSkgVXBkYXRlUkJGUG9zaXRpb25TdWNjZXNzIHsKICAgIG9yZGVySWQ6IEludDsKICAgIHJlY2VpdmU6IEludDsKICAgIHRyeElkOiBJbnQgYXMgdWludDY0Owp9CgptZXNzYWdlIENvbXBlbnNhdGVSQkZQb3NpdGlvbk9yZGVyIHsKICAgIG9yZGVySWQ6IEludDsKICAgIHRyeElkOiBJbnQ7CiAgICBuZWVkUmVmdW5kOiBCb29sOwogICAgaXNFeGVjdXRlOiBCb29sOwogICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3M/OwogICAgcHJpY2VzTGVuZ3RoOiBJbnQ7CiAgICBwcmljZXM6IG1hcDxJbnQsIFVwZGF0ZVByaWNlPjsKfQovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IExQID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCm1lc3NhZ2UgQ3JlYXRlRGVjcmVhc2VMUFBvc2l0aW9uT3JkZXIgewogICAgZXhlY3V0aW9uRmVlOiBJbnQ7CiAgICBtYXJnaW5EZWx0YTogSW50OwogICAgbGlxdWlkaXR5RGVsdGE6IEludDsKfQoKbWVzc2FnZSBDYW5jZWxMUFBvc2l0aW9uT3JkZXIgewogICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3M/OwogICAgb3JkZXJJZDogSW50OwogICAgdHJ4SWQ6IEludDsKfQoKbWVzc2FnZSBFeGVjdXRlTFBQb3NpdGlvbk9yZGVyIHsKICAgIGV4ZWN1dGlvbkZlZVJlY2VpdmVyOiBBZGRyZXNzPzsKICAgIG9yZGVySWQ6IEludDsKICAgIHRyeElkOiBJbnQ7CiAgICBwcmljZXNMZW5ndGg6IEludDsKICAgIHByaWNlczogbWFwPEludCwgVXBkYXRlUHJpY2U+Owp9CgptZXNzYWdlIExpcXVpZGF0ZUxQUG9zaXRpb25PcmRlciB7CiAgICBleGVjdXRpb25GZWVSZWNlaXZlcjogQWRkcmVzcz87CiAgICBhY2NvdW50OiBBZGRyZXNzOwogICAgdHJ4SWQ6IEludDsKICAgIHByaWNlc0xlbmd0aDogSW50OwogICAgcHJpY2VzOiBtYXA8SW50LCBVcGRhdGVQcmljZT47Cn0KCm1lc3NhZ2UoMHhmZWEzNmI3MSkgVXBkYXRlTFBQb3NpdGlvbiB7CiAgICBvcmRlcklkOiBJbnQgYXMgdWludDY0OwogICAgb3BUeXBlOiBJbnQgYXMgdWludDg7CiAgICBhY2NvdW50OiBBZGRyZXNzOwogICAgbWFyZ2luRGVsdGE6IEludDsKICAgIGxpcXVpZGl0eURlbHRhOiBJbnQ7CiAgICB0cnhJZDogSW50IGFzIHVpbnQ2NDsKICAgIHByaWNlc0xlbmd0aDogSW50OwogICAgcHJpY2VzOiBtYXA8SW50LCBVcGRhdGVQcmljZT47Cn0KCm1lc3NhZ2UoMHg0OTg5YzdjMSkgVXBkYXRlTFBQb3NpdGlvblN1Y2Nlc3MgewogICAgb3JkZXJJZDogSW50OwogICAgcmVjZWl2ZTogSW50OwogICAgdHJ4SWQ6IEludCBhcyB1aW50NjQ7Cn0KCm1lc3NhZ2UgQ29tcGVuc2F0ZUxQUG9zaXRpb25PcmRlciB7CiAgICBvcmRlcklkOiBJbnQ7CiAgICB0cnhJZDogSW50OwogICAgbmVlZFJlZnVuZDogQm9vbDsKICAgIGlzRXhlY3V0ZTogQm9vbDsKICAgIGV4ZWN1dGlvbkZlZVJlY2VpdmVyOiBBZGRyZXNzPzsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBQZXJwID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCm1lc3NhZ2UgQ3JlYXRlRGVjcmVhc2VQZXJwUG9zaXRpb25PcmRlciB7CiAgICBleGVjdXRpb25GZWU6IEludDsKICAgIG9wVHlwZTogSW50OwogICAgdG9rZW5JZDogSW50OwogICAgaXNMb25nOiBCb29sOwogICAgbWFyZ2luRGVsdGE6IEludDsKICAgIHNpemVEZWx0YTogSW50OwogICAgdHJpZ2dlclByaWNlOiBJbnQ7Cn0KCm1lc3NhZ2UgQ2FuY2VsUGVycFBvc2l0aW9uT3JkZXIgewogICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3M/OwogICAgb3JkZXJJZDogSW50OwogICAgdHJ4SWQ6IEludDsKfQoKbWVzc2FnZSBFeGVjdXRlUGVycFBvc2l0aW9uT3JkZXIgewogICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3M/OwogICAgb3JkZXJJZDogSW50OwogICAgdHJ4SWQ6IEludDsKICAgIHByaWNlc0xlbmd0aDogSW50OwogICAgcHJpY2VzOiBtYXA8SW50LCBVcGRhdGVQcmljZT47CiAgICB0cFNsTGVuZ3RoOiBJbnQ7CiAgICB0cFNsT3JkZXJzOiBtYXA8SW50LCBJbnQ+Owp9CgptZXNzYWdlIExpcXVpZGF0ZVBlcnBQb3NpdGlvbk9yZGVyIHsKICAgIGV4ZWN1dGlvbkZlZVJlY2VpdmVyOiBBZGRyZXNzPzsKICAgIHRva2VuSWQ6IEludDsKICAgIGFjY291bnQ6IEFkZHJlc3M7CiAgICBpc0xvbmc6IEJvb2w7CiAgICB0cnhJZDogSW50OwogICAgcHJpY2VzTGVuZ3RoOiBJbnQ7CiAgICBwcmljZXM6IG1hcDxJbnQsIFVwZGF0ZVByaWNlPjsKfQoKbWVzc2FnZSBVcGRhdGVQZXJwUG9zaXRpb24gewogICAgb3JkZXJJZDogSW50IGFzIHVpbnQ2NDsKICAgIG9wVHlwZTogSW50IGFzIHVpbnQ4OwogICAgYWNjb3VudDogQWRkcmVzczsKICAgIG1hcmdpbkRlbHRhOiBJbnQ7CiAgICBzaXplRGVsdGE6IEludDsKICAgIHRyaWdnZXJQcmljZTogSW50OwogICAgdHJpZ2dlckFib3ZlOiBCb29sOwogICAgdHJ4SWQ6IEludCBhcyB1aW50NjQ7CiAgICBwcmljZXNMZW5ndGg6IEludDsKICAgIHByaWNlczogbWFwPEludCwgVXBkYXRlUHJpY2U+Owp9CgptZXNzYWdlIFVwZGF0ZVBlcnBQb3NpdGlvblN1Y2Nlc3MgewogICAgb3JkZXJJZDogSW50OwogICAgcmVjZWl2ZTogSW50OwogICAgdHJ4SWQ6IEludCBhcyB1aW50NjQ7CiAgICBpc0Nsb3NlZDogQm9vbDsKICAgIHRwU2xMZW5ndGg6IEludDsKICAgIHRwU2xPcmRlcnM6IG1hcDxJbnQsIEludD47Cn0KCm1lc3NhZ2UgQ29tcGVuc2F0ZVBlcnBQb3NpdGlvbk9yZGVyIHsKICAgIG9yZGVySWQ6IEludDsKICAgIHRyeElkOiBJbnQ7CiAgICBuZWVkUmVmdW5kOiBCb29sOwogICAgaXNFeGVjdXRlOiBCb29sOwogICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3M/Owp9","contracts/order/events.tact":"Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBSQkYgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KLy8gaW5jcmVhc2UgUkJGCm1lc3NhZ2UgUkJGUG9zaXRpb25PcmRlckNyZWF0ZWRFdmVudCB7CiAgICBpc0luY3JlYXNlOiBCb29sOwogICAgYWNjb3VudDogQWRkcmVzczsKICAgIGxpcXVpZGl0eURlbHRhOiBJbnQ7CiAgICBleGVjdXRpb25GZWU6IEludDsKICAgIG9yZGVySWQ6IEludDsKfQoKbWVzc2FnZSBSQkZQb3NpdGlvbk9yZGVyQ2FuY2VsbGVkRXZlbnQgewogICAgaXNJbmNyZWFzZTogQm9vbDsKICAgIG9yZGVySWQ6IEludDsKICAgIHRyeElkOiBJbnQ7Cn0KCm1lc3NhZ2UgUkJGUG9zaXRpb25PcmRlckV4ZWN1dGVkRXZlbnQgewogICAgaXNJbmNyZWFzZTogQm9vbDsKICAgIG9yZGVySWQ6IEludDsKICAgIHRyeElkOiBJbnQ7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gTFAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KbWVzc2FnZSBMUFBvc2l0aW9uT3JkZXJDcmVhdGVkRXZlbnQgewogICAgb3BUeXBlOiBJbnQgYXMgdWludDg7CiAgICBhY2NvdW50OiBBZGRyZXNzOwogICAgbWFyZ2luRGVsdGE6IEludDsKICAgIGxpcXVpZGl0eURlbHRhOiBJbnQ7CiAgICBleGVjdXRpb25GZWU6IEludDsKICAgIG9yZGVySWQ6IEludDsKfQoKbWVzc2FnZSBMUFBvc2l0aW9uT3JkZXJDYW5jZWxsZWRFdmVudCB7CiAgICBvcFR5cGU6IEludCBhcyB1aW50ODsKICAgIG9yZGVySWQ6IEludDsKICAgIHRyeElkOiBJbnQ7Cn0KCm1lc3NhZ2UgTFBQb3NpdGlvbk9yZGVyRXhlY3V0ZWRFdmVudCB7CiAgICBvcFR5cGU6IEludCBhcyB1aW50ODsKICAgIG9yZGVySWQ6IEludDsKICAgIHRyeElkOiBJbnQ7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gUGVycCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwptZXNzYWdlIFBlcnBQb3NpdGlvbk9yZGVyQ3JlYXRlZEV2ZW50IHsKICAgIG9wVHlwZTogSW50IGFzIHVpbnQ4OwogICAgdG9rZW5JZDogSW50OwogICAgYWNjb3VudDogQWRkcmVzczsKICAgIGlzTG9uZzogQm9vbDsKICAgIG1hcmdpbkRlbHRhOiBJbnQ7CiAgICBzaXplRGVsdGE6IEludDsKICAgIHRyaWdnZXJQcmljZTogSW50OwogICAgdHJpZ2dlckFib3ZlOiBCb29sOwogICAgdHBTaXplOiBJbnQ7CiAgICB0cFByaWNlOiBJbnQ7CiAgICBzbFNpemU6IEludDsKICAgIHNsUHJpY2U6IEludDsKICAgIGV4ZWN1dGlvbkZlZTogSW50OwogICAgb3JkZXJJZDogSW50Owp9CgptZXNzYWdlIFBlcnBQb3NpdGlvbk9yZGVyQ2FuY2VsbGVkRXZlbnQgewogICAgb3BUeXBlOiBJbnQgYXMgdWludDg7CiAgICBvcmRlcklkOiBJbnQ7CiAgICB0cnhJZDogSW50Owp9CgptZXNzYWdlIFBlcnBQb3NpdGlvbk9yZGVyRXhlY3V0ZWRFdmVudCB7CiAgICBvcFR5cGU6IEludCBhcyB1aW50ODsKICAgIG9yZGVySWQ6IEludDsKICAgIHRyeElkOiBJbnQ7Cn0=","contracts/order/structs.tact":"Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBDb25maWcgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8Kc3RydWN0IFRva2VuQ29uZmlnIHsKICAgIG5hbWU6IFN0cmluZzsKICAgIGVuYWJsZTogQm9vbDsKfQoKc3RydWN0IENvbmZpZ0RhdGEgewogICAgaXNFeGVjdXRvcjogQm9vbD87CiAgICBpc0NvbXBlbnNhdG9yOiBCb29sPzsKICAgIG1pblRpbWVEZWxheUV4ZWN1dG9yOiBJbnQ7CiAgICBtYXhUaW1lRGVsYXlFeGVjdXRvcjogSW50OwogICAgbWluVGltZURlbGF5VHJhZGVyOiBJbnQ7CiAgICBtaW5FeGVjdXRpb25GZWU6IEludDsKICAgIGdhc0NvbnN1bXB0aW9uOiBJbnQ7CiAgICBtaW5Ub25zRm9yU3RvcmFnZTogSW50OwogICAgdXNkdFdhbGxldDogQWRkcmVzczsKICAgIHBvb2w6IEFkZHJlc3M7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQ2FsbGJhY2sgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8Kc3RydWN0IEpldHRvbkNhbGxiYWNrIHsKICAgIG9yZGVyVHlwZTogSW50OwogICAgb3JkZXJJZDogSW50OwogICAgYW1vdW50OiBJbnQ7CiAgICByZWNlaXZlcjogQWRkcmVzczsKICAgIHRyeElkOiBJbnQ7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gUkJGID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCnN0cnVjdCBSQkZQb3NpdGlvbk9yZGVyIHsKICAgIGlzSW5jcmVhc2U6IEJvb2w7CiAgICBhY2NvdW50OiBBZGRyZXNzOwogICAgbGlxdWlkaXR5RGVsdGE6IEludDsKICAgIGV4ZWN1dGlvbkZlZTogSW50OwogICAgYmxvY2tUaW1lOiBJbnQ7CiAgICBpc1BlbmRpbmc6IEJvb2w7CiAgICBjYWxsYmFja0lkOiBJbnQ/OwogICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3M/OwogICAgbGFzdE9wZXJhdG9yOiBBZGRyZXNzPzsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBMUCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwpzdHJ1Y3QgTFBQb3NpdGlvbk9yZGVyIHsKICAgIG9wVHlwZTogSW50IGFzIHVpbnQ4OwogICAgYWNjb3VudDogQWRkcmVzczsKICAgIG1hcmdpbkRlbHRhOiBJbnQ7CiAgICBsaXF1aWRpdHlEZWx0YTogSW50OwogICAgZXhlY3V0aW9uRmVlOiBJbnQ7CiAgICBibG9ja1RpbWU6IEludDsKICAgIGlzUGVuZGluZzogQm9vbDsKICAgIGNhbGxiYWNrSWQ6IEludD87CiAgICBleGVjdXRpb25GZWVSZWNlaXZlcjogQWRkcmVzcz87CiAgICBsYXN0T3BlcmF0b3I6IEFkZHJlc3M/Owp9CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IFBlcnAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8Kc3RydWN0IFBlcnBQb3NpdGlvbk9yZGVyIHsKICAgIG9wVHlwZTogSW50IGFzIHVpbnQ4OwogICAgdG9rZW5JZDogSW50OwogICAgYWNjb3VudDogQWRkcmVzczsKICAgIGlzTG9uZzogQm9vbDsKICAgIG1hcmdpbkRlbHRhOiBJbnQ7CiAgICBzaXplRGVsdGE6IEludDsKICAgIHRyaWdnZXJQcmljZTogSW50OwogICAgdHJpZ2dlckFib3ZlOiBCb29sOwogICAgZXhlY3V0aW9uRmVlOiBJbnQ7CiAgICBibG9ja1RpbWU6IEludDsKICAgIGlzUGVuZGluZzogQm9vbDsKICAgIGNhbGxiYWNrSWQ6IEludD87CiAgICBleGVjdXRpb25GZWVSZWNlaXZlcjogQWRkcmVzcz87CiAgICBsYXN0T3BlcmF0b3I6IEFkZHJlc3M/Owp9CgpzdHJ1Y3QgUGVycFBvc2l0aW9uT3JkZXJFeCB7CiAgICB0cFNpemU6IEludDsKICAgIHRwUHJpY2U6IEludDsKICAgIHNsU2l6ZTogSW50OwogICAgc2xQcmljZTogSW50Owp9CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IFByaWNlID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCnN0cnVjdCBVcGRhdGVQcmljZSB7CiAgICB0b2tlbklkOiBJbnQ7CiAgICBwcmljZTogSW50Owp9Cg==","contracts/order/constants.tact":"Y29uc3QgT1BfQ1JFQVRFX0lOQ1JFQVNFX1JCRl9QT1NJVElPTl9PUkRFUjogSW50ID0gMTsKY29uc3QgT1BfQ1JFQVRFX0lOQ1JFQVNFX0xQX1BPU0lUSU9OX09SREVSOiBJbnQgPSAyOwpjb25zdCBPUF9DUkVBVEVfSU5DUkVBU0VfUEVSUF9QT1NJVElPTl9PUkRFUjogSW50ID0gMzsKCmNvbnN0IE9QX0NBTkNFTF9JTkNSRUFTRV9SQkZfUE9TSVRJT05fT1JERVI6IEludCA9IDEwOwpjb25zdCBPUF9DQU5DRUxfREVDUkVBU0VfUkJGX1BPU0lUSU9OX09SREVSOiBJbnQgPSAxMTsKY29uc3QgT1BfQ0FOQ0VMX0lOQ1JFQVNFX0xQX1BPU0lUSU9OX09SREVSOiBJbnQgPSAxMjsKY29uc3QgT1BfQ0FOQ0VMX0RFQ1JFQVNFX0xQX1BPU0lUSU9OX09SREVSOiBJbnQgPSAxMzsKCmNvbnN0IE9SREVSX1RZUEVfUkJGOiBJbnQgPSAxOwpjb25zdCBPUkRFUl9UWVBFX0xQOiBJbnQgPSAyOwpjb25zdCBPUkRFUl9UWVBFX1BFUlA6IEludCA9IDM7Cgpjb25zdCBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFOiBJbnQgPSAxOwpjb25zdCBPUkRFUl9PUF9UWVBFX0RFQ1JFQVNFOiBJbnQgPSAyOwpjb25zdCBPUkRFUl9PUF9UWVBFX0xJUVVJREFUSU9OOiBJbnQgPSAzOwpjb25zdCBPUkRFUl9PUF9UWVBFX0FETDogSW50ID0gNDsKCmNvbnN0IE9SREVSX09QX1RZUEVfSU5DUkVBU0VfTUFSS0VUOiBJbnQgPSAxMDsKY29uc3QgT1JERVJfT1BfVFlQRV9JTkNSRUFTRV9MSU1JVDogSW50ID0gMTE7CmNvbnN0IE9SREVSX09QX1RZUEVfREVDUkVBU0VfTUFSS0VUOiBJbnQgPSAxMjsKY29uc3QgT1JERVJfT1BfVFlQRV9ERUNSRUFTRV9UUDogSW50ID0gMTM7CmNvbnN0IE9SREVSX09QX1RZUEVfREVDUkVBU0VfU0w6IEludCA9IDE0Owo=","contracts/order/order_book.tact":"aW1wb3J0ICJAc3RkbGliL2RlcGxveSI7CmltcG9ydCAiQHN0ZGxpYi9vd25hYmxlIjsKaW1wb3J0ICIuL21lc3NhZ2VzIjsKaW1wb3J0ICIuL2V2ZW50cyI7CmltcG9ydCAiLi9zdHJ1Y3RzIjsKaW1wb3J0ICIuL2NvbnN0YW50cyI7Cgpjb250cmFjdCBPcmRlckJvb2sgd2l0aCBEZXBsb3lhYmxlLCBPd25hYmxlIHsKICAgIAogICAgLy8gY29uZmlnCiAgICBtaW5UaW1lRGVsYXlFeGVjdXRvcjogSW50ID0gNjsgLy8gZXhlY3V0b3IgZXhlY3V0ZSBhZnRlciA2cwogICAgbWF4VGltZURlbGF5RXhlY3V0b3I6IEludCA9IDMwICogNjA7IC8vIGV4ZWN1dG9yIGV4ZWN1dGUgYmVmb3JlIDMwbWluCiAgICBtaW5UaW1lRGVsYXlUcmFkZXI6IEludCA9IDMgKiA2MDsgLy8gdHJhZGVyIGV4ZWN1dGUgYWZ0ZXIgM21pbgoKICAgIC8vIFRPRE8gZ2FzCiAgICBtaW5FeGVjdXRpb25GZWU6IEludCA9IHRvbigiMC4yIik7IC8vIGZlZSBmb3IgZXZlcnkgb3BlcmF0aW9uCiAgICBnYXNDb25zdW1wdGlvbjogSW50ID0gdG9uKCIwLjA1Iik7IC8vIG1pbiBjb25zdW1wdGlvbiBnYXMKICAgIG1pblRvbnNGb3JTdG9yYWdlOiBJbnQgPSB0b24oIjAuMDMiKTsgLy8gbWluIHN0b3JhZ2UgZ2FzCgogICAgdXNkdFdhbGxldDogQWRkcmVzczsgLy8gb3JkZXIgYm9vayBVU0RUIGpldHRvbiB3YWxsZXQgYWRkcmVzcwogICAgcG9vbDogQWRkcmVzczsgLy8gcG9vbCBhZGRyZXNzCgogICAgdG9rZW5Db25maWdzOiBtYXA8SW50LCBUb2tlbkNvbmZpZz47IC8vIHRva2VuSW5kZXggPT4gdG9rZW5Db25maWcKICAgIHRva2VuSW5kZXhOZXh0OiBJbnQgYXMgdWludDY0ID0gMTsKCiAgICAvLyBhZG1pbgogICAgb3duZXI6IEFkZHJlc3M7CiAgICBleGVjdXRvcnM6IG1hcDxBZGRyZXNzLCBCb29sPjsgLy8gYWNjb3VudCA9PiBlbmFibGVkCiAgICBjb21wZW5zYXRvcnM6IG1hcDxBZGRyZXNzLCBCb29sPjsgLy8gYWNjb3VudCA9PiBlbmFibGVkCgogICAgamV0dG9uQ2FsbGJhY2tzOiBtYXA8SW50LCBKZXR0b25DYWxsYmFjaz47IC8vIHF1ZXJ5SWQgPT4gY2FsbGJhY2sKICAgIGpldHRvbkNhbGxiYWNrUXVlcnlJZE5leHQ6IEludCBhcyB1aW50NjQgPSAxOwoKICAgIC8vIFJCRgogICAgcmJmUG9zaXRpb25PcmRlcnM6IG1hcDxJbnQsIFJCRlBvc2l0aW9uT3JkZXI+OyAvLyBvcmRlcklkID0+IG9yZGVyCiAgICByYmZQb3NpdGlvbk9yZGVySW5kZXhOZXh0OiBJbnQgYXMgdWludDY0ID0gMTsKCiAgICAvLyBMUAogICAgbHBQb3NpdGlvbk9yZGVyczogbWFwPEludCwgTFBQb3NpdGlvbk9yZGVyPjsgLy8gb3JkZXJJZCA9PiBvcmRlcgogICAgbHBQb3NpdGlvbk9yZGVySW5kZXhOZXh0OiBJbnQgYXMgdWludDY0ID0gMTsKCiAgICAvLyBQZXJwCiAgICBwZXJwUG9zaXRpb25PcmRlcnM6IG1hcDxJbnQsIFBlcnBQb3NpdGlvbk9yZGVyPjsgLy8gb3JkZXJJZCA9PiBvcmRlcgogICAgcGVycFBvc2l0aW9uT3JkZXJFeHM6IG1hcDxJbnQsIFBlcnBQb3NpdGlvbk9yZGVyRXg+OyAvLyBvcmRlcklkID0+IG9yZGVyRXgKICAgIHBlcnBQb3NpdGlvbk9yZGVySW5kZXhOZXh0OiBJbnQgYXMgdWludDY0ID0gMTsKCiAgICBpbml0KCkgewogICAgICAgIHNlbGYub3duZXIgPSBzZW5kZXIoKTsKCiAgICAgICAgc2VsZi5leGVjdXRvcnMuc2V0KHNlbmRlcigpLCB0cnVlKTsKICAgICAgICBzZWxmLmNvbXBlbnNhdG9ycy5zZXQoc2VuZGVyKCksIHRydWUpOwoKICAgICAgICBzZWxmLnVzZHRXYWxsZXQgPSBuZXdBZGRyZXNzKDAsIDApOwogICAgICAgIHNlbGYucG9vbCA9IG5ld0FkZHJlc3MoMCwgMCk7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQWRtaW4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgcmVjZWl2ZShtc2c6IFVwZGF0ZUNvbmZpZykgewogICAgICAgIHNlbGYucmVxdWlyZU93bmVyKCk7CiAgICAgICAgLy8gYXV0aAogICAgICAgIGlmIChtc2cuZXhlY3V0b3IgIT0gbnVsbCAmJiBtc2cuZW5hYmxlRXhlY3V0b3IgIT0gbnVsbCkgewogICAgICAgICAgICBzZWxmLmV4ZWN1dG9ycy5zZXQobXNnLmV4ZWN1dG9yISEsIG1zZy5lbmFibGVFeGVjdXRvciEhKTsKICAgICAgICB9CiAgICAgICAgaWYgKG1zZy5jb21wZW5zYXRvciAhPSBudWxsICYmIG1zZy5lbmFibGVDb21wZW5zYXRvciAhPSBudWxsKSB7CiAgICAgICAgICAgIHNlbGYuY29tcGVuc2F0b3JzLnNldChtc2cuY29tcGVuc2F0b3IhISwgbXNnLmVuYWJsZUNvbXBlbnNhdG9yISEpOwogICAgICAgIH0KICAgICAgICAvLyBjb25maWcKICAgICAgICBpZiAobXNnLm1pblRpbWVEZWxheUV4ZWN1dG9yICE9IG51bGwpewogICAgICAgICAgICBzZWxmLm1pblRpbWVEZWxheUV4ZWN1dG9yID0gbXNnLm1pblRpbWVEZWxheUV4ZWN1dG9yISE7CiAgICAgICAgfQogICAgICAgIGlmIChtc2cubWF4VGltZURlbGF5RXhlY3V0b3IgIT0gbnVsbCl7CiAgICAgICAgICAgIHNlbGYubWF4VGltZURlbGF5RXhlY3V0b3IgPSBtc2cubWF4VGltZURlbGF5RXhlY3V0b3IhITsKICAgICAgICB9CiAgICAgICAgaWYgKG1zZy5taW5UaW1lRGVsYXlUcmFkZXIgIT0gbnVsbCl7CiAgICAgICAgICAgIHNlbGYubWluVGltZURlbGF5VHJhZGVyID0gbXNnLm1pblRpbWVEZWxheVRyYWRlciEhOwogICAgICAgIH0KICAgICAgICBpZiAobXNnLm1pbkV4ZWN1dGlvbkZlZSAhPSBudWxsKXsKICAgICAgICAgICAgc2VsZi5taW5FeGVjdXRpb25GZWUgPSBtc2cubWluRXhlY3V0aW9uRmVlISE7CiAgICAgICAgfQogICAgICAgIGlmIChtc2cuZ2FzQ29uc3VtcHRpb24gIT0gbnVsbCl7CiAgICAgICAgICAgIHNlbGYuZ2FzQ29uc3VtcHRpb24gPSBtc2cuZ2FzQ29uc3VtcHRpb24hITsKICAgICAgICB9CiAgICAgICAgaWYgKG1zZy5taW5Ub25zRm9yU3RvcmFnZSAhPSBudWxsKXsKICAgICAgICAgICAgc2VsZi5taW5Ub25zRm9yU3RvcmFnZSA9IG1zZy5taW5Ub25zRm9yU3RvcmFnZSEhOwogICAgICAgIH0KICAgICAgICBpZiAobXNnLnVzZHRXYWxsZXQgIT0gbnVsbCl7CiAgICAgICAgICAgIHNlbGYudXNkdFdhbGxldCA9IG1zZy51c2R0V2FsbGV0ISE7CiAgICAgICAgfQogICAgICAgIGlmIChtc2cucG9vbCAhPSBudWxsKXsKICAgICAgICAgICAgc2VsZi5wb29sID0gbXNnLnBvb2whITsKICAgICAgICB9CiAgICAgICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICAgICAgdG86IHNlbmRlcigpLAogICAgICAgICAgICBib3VuY2U6IGZhbHNlLAogICAgICAgICAgICB2YWx1ZTogMCwKICAgICAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlCiAgICAgICAgfSk7CiAgICB9CgogICAgZ2V0IGZ1biBjb25maWdEYXRhKGV4ZWN1dG9yOiBBZGRyZXNzPywgY29tcGVuc2F0b3I6IEFkZHJlc3M/KTogQ29uZmlnRGF0YSB7CiAgICAgICAgbGV0IGlzRXhlY3V0b3I6IEJvb2w/ID0gbnVsbDsKICAgICAgICBpZiAoZXhlY3V0b3IgIT0gbnVsbCkgewogICAgICAgICAgICBpc0V4ZWN1dG9yID0gc2VsZi5leGVjdXRvcnMuZ2V0KGV4ZWN1dG9yISEpOwogICAgICAgIH0KICAgICAgICBsZXQgaXNDb21wZW5zYXRvcjogQm9vbD8gPSBudWxsOwogICAgICAgIGlmIChjb21wZW5zYXRvciAhPSBudWxsKSB7CiAgICAgICAgICAgIGlzQ29tcGVuc2F0b3IgPSBzZWxmLmNvbXBlbnNhdG9ycy5nZXQoY29tcGVuc2F0b3IhISk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gQ29uZmlnRGF0YXsKICAgICAgICAgICAgaXNFeGVjdXRvcjogaXNFeGVjdXRvciwKICAgICAgICAgICAgaXNDb21wZW5zYXRvcjogaXNDb21wZW5zYXRvciwKICAgICAgICAgICAgbWluVGltZURlbGF5RXhlY3V0b3I6IHNlbGYubWluVGltZURlbGF5RXhlY3V0b3IsCiAgICAgICAgICAgIG1heFRpbWVEZWxheUV4ZWN1dG9yOiBzZWxmLm1heFRpbWVEZWxheUV4ZWN1dG9yLAogICAgICAgICAgICBtaW5UaW1lRGVsYXlUcmFkZXI6IHNlbGYubWluVGltZURlbGF5VHJhZGVyLAogICAgICAgICAgICBtaW5FeGVjdXRpb25GZWU6IHNlbGYubWluRXhlY3V0aW9uRmVlLAogICAgICAgICAgICBnYXNDb25zdW1wdGlvbjogc2VsZi5nYXNDb25zdW1wdGlvbiwKICAgICAgICAgICAgbWluVG9uc0ZvclN0b3JhZ2U6IHNlbGYubWluVG9uc0ZvclN0b3JhZ2UsCiAgICAgICAgICAgIHVzZHRXYWxsZXQ6IHNlbGYudXNkdFdhbGxldCwKICAgICAgICAgICAgcG9vbDogc2VsZi5wb29sCiAgICAgICAgfTsKICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBUb2tlbiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCiAgICAvKioKICAgICogQGRldiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuIHRoZSBjb250cmFjdCByZWNlaXZlcyBhIFRva2VuTm90aWZpY2F0aW9uIG1lc3NhZ2UuCiAgICAqIEl0IGNoZWNrcyB0aGUgdG9rZW4gYW5kIGhhbmRsZXMgdGhlIGNvcnJlc3BvbmRpbmcgb3BlcmF0aW9uIGNvZGUuCiAgICAqIEBwYXJhbSBtc2cgVGhlIFRva2VuTm90aWZpY2F0aW9uIG1lc3NhZ2UgcmVjZWl2ZWQuCiAgICAqLwogICAgcmVjZWl2ZShtc2c6IFRva2VuTm90aWZpY2F0aW9uKSB7CiAgICAgICAgLy8ganVzdCBpZ25vcmUgb3RoZXIgdG9rZW4KICAgICAgICBpZiAoc2VuZGVyKCkgIT0gc2VsZi51c2R0V2FsbGV0KSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vIGdldCBvcCBjb2RlCiAgICAgICAgbGV0IG9wZXJhdGlvbjogU2xpY2UgPSBtc2cuZm9yd2FyZFBheWxvYWQubG9hZFJlZigpLmFzU2xpY2UoKTsKICAgICAgICBsZXQgb3BDb2RlOiBJbnQgPSBvcGVyYXRpb24ubG9hZEludCgzMik7CiAgICAgICAgaWYgKG9wQ29kZSA9PSBPUF9DUkVBVEVfSU5DUkVBU0VfUkJGX1BPU0lUSU9OX09SREVSKSB7CiAgICAgICAgICAgIGxldCBsaXF1aWRpdHlEZWx0YTogSW50ID0gb3BlcmF0aW9uLmxvYWRJbnQoMTI4KTsKICAgICAgICAgICAgbGV0IGV4ZWN1dGlvbkZlZTogSW50ID0gb3BlcmF0aW9uLmxvYWRDb2lucygpOwoKICAgICAgICAgICAgc2VsZi5oYW5kbGVDcmVhdGVJbmNyZWFzZVJCRlBvc2l0aW9uT3JkZXIobXNnLnF1ZXJ5SWQsIG1zZy5hbW91bnQsIG1zZy5mcm9tLCBleGVjdXRpb25GZWUsIGxpcXVpZGl0eURlbHRhKTsKICAgICAgICB9IAogICAgICAgIGVsc2UgaWYgKG9wQ29kZSA9PSBPUF9DUkVBVEVfSU5DUkVBU0VfTFBfUE9TSVRJT05fT1JERVIpIHsKICAgICAgICAgICAgbGV0IG1hcmdpbkRlbHRhOiBJbnQgPSBvcGVyYXRpb24ubG9hZEludCgxMjgpOwogICAgICAgICAgICBsZXQgbGlxdWlkaXR5RGVsdGE6IEludCA9IG9wZXJhdGlvbi5sb2FkSW50KDEyOCk7CiAgICAgICAgICAgIGxldCBleGVjdXRpb25GZWU6IEludCA9IG9wZXJhdGlvbi5sb2FkQ29pbnMoKTsKCiAgICAgICAgICAgIHNlbGYuaGFuZGxlQ3JlYXRlSW5jcmVhc2VMUFBvc2l0aW9uT3JkZXIobXNnLnF1ZXJ5SWQsIG1zZy5hbW91bnQsIG1zZy5mcm9tLCBleGVjdXRpb25GZWUsIG1hcmdpbkRlbHRhLCBsaXF1aWRpdHlEZWx0YSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKG9wQ29kZSA9PSBPUF9DUkVBVEVfSU5DUkVBU0VfUEVSUF9QT1NJVElPTl9PUkRFUikgewogICAgICAgICAgICBsZXQgbWFyZ2luRGVsdGE6IEludCA9IG9wZXJhdGlvbi5sb2FkSW50KDEyOCk7CiAgICAgICAgICAgIGxldCBsaXF1aWRpdHlEZWx0YTogSW50ID0gb3BlcmF0aW9uLmxvYWRJbnQoMTI4KTsKICAgICAgICAgICAgbGV0IGV4ZWN1dGlvbkZlZTogSW50ID0gb3BlcmF0aW9uLmxvYWRDb2lucygpOwoKICAgICAgICAgICAgc2VsZi5oYW5kbGVDcmVhdGVJbmNyZWFzZUxQUG9zaXRpb25PcmRlcihtc2cucXVlcnlJZCwgbXNnLmFtb3VudCwgbXNnLmZyb20sIGV4ZWN1dGlvbkZlZSwgbWFyZ2luRGVsdGEsIGxpcXVpZGl0eURlbHRhKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8vIHRyYW5zZmVyIGpldHRvbiBzdWNjZXNzIGNhbGxiYWNrCiAgICByZWNlaXZlKG1zZzogVG9rZW5FeGNlc3NlcykgewogICAgICAgIC8vIGdldCBjYWxsYmFjawogICAgICAgIGxldCBqZXR0b25DYWxsYmFja09wdDogSmV0dG9uQ2FsbGJhY2s/ID0gc2VsZi5qZXR0b25DYWxsYmFja3MuZ2V0KG1zZy5xdWVyeUlkKTsKICAgICAgICBpZiAoamV0dG9uQ2FsbGJhY2tPcHQgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGxldCBqZXR0b25DYWxsYmFjazogSmV0dG9uQ2FsbGJhY2sgPSBqZXR0b25DYWxsYmFja09wdCEhOwoKICAgICAgICAvLyBkZWxldGUgY2FsbGJhY2sKICAgICAgICBzZWxmLmpldHRvbkNhbGxiYWNrcy5zZXQobXNnLnF1ZXJ5SWQsIG51bGwpOwoKICAgICAgICAvLyBvcmRlciB0eXBlCiAgICAgICAgaWYgKGpldHRvbkNhbGxiYWNrLm9yZGVyVHlwZSA9PSBPUkRFUl9UWVBFX1JCRikgewogICAgICAgICAgICBzZWxmLmhhbmRlbFJCRlBvc2l0aW9uT3JkZXJDYWxsYmFjayhqZXR0b25DYWxsYmFjay5vcmRlcklkLCBqZXR0b25DYWxsYmFjay50cnhJZCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGpldHRvbkNhbGxiYWNrLm9yZGVyVHlwZSA9PSBPUkRFUl9UWVBFX0xQKSB7CiAgICAgICAgICAgIHNlbGYuaGFuZGVsTFBQb3NpdGlvbk9yZGVyQ2FsbGJhY2soamV0dG9uQ2FsbGJhY2sub3JkZXJJZCwgamV0dG9uQ2FsbGJhY2sudHJ4SWQpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChqZXR0b25DYWxsYmFjay5vcmRlclR5cGUgPT0gT1JERVJfVFlQRV9QRVJQKSB7CiAgICAgICAgICAgIHNlbGYuaGFuZGVsTFBQb3NpdGlvbk9yZGVyQ2FsbGJhY2soamV0dG9uQ2FsbGJhY2sub3JkZXJJZCwgamV0dG9uQ2FsbGJhY2sudHJ4SWQpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW4gcmVmdW5kSmV0dG9uKHF1ZXJ5SWQ6IEludCwgYW1vdW50OiBJbnQsIHRvOiBBZGRyZXNzLCByZXNwb25zZTogQWRkcmVzcykgewogICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgIHRvOiBzZWxmLnVzZHRXYWxsZXQsIAogICAgICAgICAgICB2YWx1ZTogMCwKICAgICAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLCAKICAgICAgICAgICAgYm91bmNlOiBmYWxzZSwKICAgICAgICAgICAgYm9keTogc2VsZi5jcmVhdGVKZXR0b25UcmFuc2ZlckJvZHkocXVlcnlJZCwgYW1vdW50LCB0bywgcmVzcG9uc2UpCiAgICAgICAgfSk7CiAgICB9CgogICAgLy8gdHJhbnNmZXIgZXhlY2VzcyB0b24KICAgIGZ1biByZWZ1bmRFeGVjZXNzVG9uKHRvOiBBZGRyZXNzLCBleGVjdXRpb25GZWU6IEludCkgewogICAgICAgIGxldCByZWZ1bmRWYWx1ZTogSW50ID0gY29udGV4dCgpLnZhbHVlIC0gZXhlY3V0aW9uRmVlIC0gc2VsZi5nYXNDb25zdW1wdGlvbiAtIHNlbGYubWluVG9uc0ZvclN0b3JhZ2U7CiAgICAgICAgaWYgKHJlZnVuZFZhbHVlID4gMCkgewogICAgICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgICAgICAgICAgdG86IHRvLAogICAgICAgICAgICAgICAgYm91bmNlOiBmYWxzZSwKICAgICAgICAgICAgICAgIHZhbHVlOiByZWZ1bmRWYWx1ZSwKICAgICAgICAgICAgICAgIG1vZGU6IFNlbmRJZ25vcmVFcnJvcnMKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1biBnZXRQb29sR2FzKCk6IEludCB7CiAgICAgICAgcmV0dXJuIGNvbnRleHQoKS5yZWFkRm9yd2FyZEZlZSgpICsgc2VsZi5nYXNDb25zdW1wdGlvbiAqIDIgKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFJCRiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IENyZWF0ZSBJbmNyZWFzZSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgZnVuIGhhbmRsZUNyZWF0ZUluY3JlYXNlUkJGUG9zaXRpb25PcmRlcihxdWVyeUlkOiBJbnQsIGpldHRvbkZyb21BbW91bnQ6IEludCwgYWNjb3VudDogQWRkcmVzcywgZXhlY3V0aW9uRmVlOiBJbnQsIGxpcXVpZGl0eURlbHRhOiBJbnQpIHsKICAgICAgICBsZXQgY3R4OiBDb250ZXh0ID0gY29udGV4dCgpOwoKICAgICAgICBpZiAoY3R4LnZhbHVlIDwgZXhlY3V0aW9uRmVlICsgY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiAyICsgc2VsZi5nYXNDb25zdW1wdGlvbiArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UpIHsKICAgICAgICAgICAgc2VsZi5yZWZ1bmRKZXR0b24ocXVlcnlJZCwgamV0dG9uRnJvbUFtb3VudCwgYWNjb3VudCwgYWNjb3VudCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChqZXR0b25Gcm9tQW1vdW50IDwgbGlxdWlkaXR5RGVsdGEpIHsKICAgICAgICAgICAgc2VsZi5yZWZ1bmRKZXR0b24ocXVlcnlJZCwgamV0dG9uRnJvbUFtb3VudCwgYWNjb3VudCwgYWNjb3VudCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChleGVjdXRpb25GZWUgPCBzZWxmLm1pbkV4ZWN1dGlvbkZlZSkgewogICAgICAgICAgICBzZWxmLnJlZnVuZEpldHRvbihxdWVyeUlkLCBqZXR0b25Gcm9tQW1vdW50LCBhY2NvdW50LCBhY2NvdW50KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8gYWRkIG5ldyBvcmRlcgogICAgICAgIGxldCBvcmRlcklkOiBJbnQgPSBzZWxmLnJiZlBvc2l0aW9uT3JkZXJJbmRleE5leHQ7CiAgICAgICAgc2VsZi5yYmZQb3NpdGlvbk9yZGVySW5kZXhOZXh0ID0gb3JkZXJJZCArIDE7CiAgICAgICAgc2VsZi5yYmZQb3NpdGlvbk9yZGVycy5zZXQob3JkZXJJZCwgUkJGUG9zaXRpb25PcmRlcnsKICAgICAgICAgICAgaXNJbmNyZWFzZTogdHJ1ZSwKICAgICAgICAgICAgYWNjb3VudDogYWNjb3VudCwKICAgICAgICAgICAgbGlxdWlkaXR5RGVsdGE6IGxpcXVpZGl0eURlbHRhLAogICAgICAgICAgICBleGVjdXRpb25GZWU6IGV4ZWN1dGlvbkZlZSwKICAgICAgICAgICAgYmxvY2tUaW1lOiBub3coKSwKICAgICAgICAgICAgaXNQZW5kaW5nOiBmYWxzZSwKICAgICAgICAgICAgY2FsbGJhY2tJZDogbnVsbCwKICAgICAgICAgICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IG51bGwsCiAgICAgICAgICAgIGxhc3RPcGVyYXRvcjogbnVsbAogICAgICAgIH0pOwoKICAgICAgICAvLyBldmVudAogICAgICAgIGVtaXQoUkJGUG9zaXRpb25PcmRlckNyZWF0ZWRFdmVudHsKICAgICAgICAgICAgaXNJbmNyZWFzZTogdHJ1ZSwKICAgICAgICAgICAgYWNjb3VudDogYWNjb3VudCwKICAgICAgICAgICAgbGlxdWlkaXR5RGVsdGE6IGxpcXVpZGl0eURlbHRhLAogICAgICAgICAgICBleGVjdXRpb25GZWU6IGV4ZWN1dGlvbkZlZSwKICAgICAgICAgICAgb3JkZXJJZDogb3JkZXJJZAogICAgICAgIH0udG9DZWxsKCkpOwoKICAgICAgICBzZWxmLnJlZnVuZEV4ZWNlc3NUb24oYWNjb3VudCwgZXhlY3V0aW9uRmVlKTsKICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IENyZWF0ZSBEZWNyZWFzZSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgcmVjZWl2ZShtc2c6IENyZWF0ZURlY3JlYXNlUkJGUG9zaXRpb25PcmRlcikgewogICAgICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CiAgICAgICAgLy8gY2hlY2sgZ2FzCiAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgLSBtc2cuZXhlY3V0aW9uRmVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICogMiArIHNlbGYuZ2FzQ29uc3VtcHRpb24gKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlLCAiZ2FzIG5vdCBlbm91Z2giKTsKICAgICAgICAvLyBjaGVjayBleGVjdXRpb24gZmVlCiAgICAgICAgcmVxdWlyZShtc2cuZXhlY3V0aW9uRmVlID49IHNlbGYubWluRXhlY3V0aW9uRmVlLCAiZXhlY3V0aW9uIGZlZSBub3QgZW5vdWdoIik7CgogICAgICAgIC8vIGFkZCBuZXcgb3JkZXIKICAgICAgICBsZXQgb3JkZXJJZDogSW50ID0gc2VsZi5yYmZQb3NpdGlvbk9yZGVySW5kZXhOZXh0OwogICAgICAgIHNlbGYucmJmUG9zaXRpb25PcmRlckluZGV4TmV4dCA9IHNlbGYucmJmUG9zaXRpb25PcmRlckluZGV4TmV4dCArIDE7CiAgICAgICAgc2VsZi5yYmZQb3NpdGlvbk9yZGVycy5zZXQob3JkZXJJZCwgUkJGUG9zaXRpb25PcmRlcnsKICAgICAgICAgICAgaXNJbmNyZWFzZTogZmFsc2UsCiAgICAgICAgICAgIGFjY291bnQ6IHNlbmRlcigpLAogICAgICAgICAgICBsaXF1aWRpdHlEZWx0YTogbXNnLmxpcXVpZGl0eURlbHRhLAogICAgICAgICAgICBleGVjdXRpb25GZWU6IG1zZy5leGVjdXRpb25GZWUsCiAgICAgICAgICAgIGJsb2NrVGltZTogbm93KCksCiAgICAgICAgICAgIGlzUGVuZGluZzogZmFsc2UsCiAgICAgICAgICAgIGNhbGxiYWNrSWQ6IG51bGwsCiAgICAgICAgICAgIGV4ZWN1dGlvbkZlZVJlY2VpdmVyOiBudWxsLAogICAgICAgICAgICBsYXN0T3BlcmF0b3I6IG51bGwKICAgICAgICB9KTsKCiAgICAgICAgLy8gZXZlbnQKICAgICAgICBlbWl0KFJCRlBvc2l0aW9uT3JkZXJDcmVhdGVkRXZlbnR7CiAgICAgICAgICAgIGlzSW5jcmVhc2U6IGZhbHNlLAogICAgICAgICAgICBhY2NvdW50OiBzZW5kZXIoKSwKICAgICAgICAgICAgbGlxdWlkaXR5RGVsdGE6IG1zZy5saXF1aWRpdHlEZWx0YSwKICAgICAgICAgICAgZXhlY3V0aW9uRmVlOiBtc2cuZXhlY3V0aW9uRmVlLAogICAgICAgICAgICBvcmRlcklkOiBvcmRlcklkCiAgICAgICAgfS50b0NlbGwoKSk7CgogICAgICAgIC8vIHRyYW5zZmVyIGV4ZWNlc3MgZ2FzCiAgICAgICAgc2VsZi5yZWZ1bmRFeGVjZXNzVG9uKHNlbmRlcigpLCBtc2cuZXhlY3V0aW9uRmVlKTsKICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IENhbmNlbCBJbmNyZWFzZSAvIERlY3JlYXNlID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCiAgICAvLyBjYW5jZWwgaW5jcmVhc2UgPT4gb3JkZXJCb29rIHdhbGxldCA9PiB1c2VyIHdhbGxldCA9PiB0b2tlbiBleGNlc3MgaGFuZGVsIGNhbmNlbCA9PiBleGNlc3MgZ2FzCiAgICAvLyBjYW5jZWwgZGVjcmVhc2UgPT4gZXhjZXNzIGdhcwogICAgcmVjZWl2ZShtc2c6IENhbmNlbFJCRlBvc2l0aW9uT3JkZXIpIHsKICAgICAgICBsZXQgY3R4OiBDb250ZXh0ID0gY29udGV4dCgpOwogICAgICAgIC8vIGNoZWNrIG9yZGVyCiAgICAgICAgbGV0IG9yZGVyT3B0OiBSQkZQb3NpdGlvbk9yZGVyPyA9IHNlbGYucmJmUG9zaXRpb25PcmRlcnMuZ2V0KG1zZy5vcmRlcklkKTsKICAgICAgICByZXF1aXJlKG9yZGVyT3B0ICE9IG51bGwsICJvcmRlciBub3QgZXhpc3QiKTsKICAgICAgICBsZXQgb3JkZXI6IFJCRlBvc2l0aW9uT3JkZXIgPSBvcmRlck9wdCEhOwoKICAgICAgICAvLyBjaGVjayBnYXMKICAgICAgICBpZiAob3JkZXIuaXNJbmNyZWFzZSkgewogICAgICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDQgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICogMiArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UgKyB0b24oIjAuMDMyIiksICJnYXMgbm90IGVub3VnaCIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlcXVpcmUoY3R4LnZhbHVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICogMiArIHNlbGYuZ2FzQ29uc3VtcHRpb24gKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlLCAiZ2FzIG5vdCBlbm91Z2giKTsKICAgICAgICB9CgogICAgICAgIHNlbGYuc2hvdWxkQ2FuY2VsKG9yZGVyLmJsb2NrVGltZSwgc2VuZGVyKCksIG9yZGVyLmlzUGVuZGluZyk7CgogICAgICAgIGlmIChvcmRlci5pc0luY3JlYXNlKSB7CiAgICAgICAgICAgIC8vIGFkZCBjYWxsYmFjawogICAgICAgICAgICBsZXQgY2FsbGJhY2tJZDogSW50ID0gc2VsZi5qZXR0b25DYWxsYmFja1F1ZXJ5SWROZXh0OwogICAgICAgICAgICBzZWxmLmpldHRvbkNhbGxiYWNrUXVlcnlJZE5leHQgPSBjYWxsYmFja0lkICsgMTsKICAgICAgICAgICAgc2VsZi5qZXR0b25DYWxsYmFja3Muc2V0KGNhbGxiYWNrSWQsIEpldHRvbkNhbGxiYWNrewogICAgICAgICAgICAgICAgb3JkZXJUeXBlOiBPUkRFUl9UWVBFX1JCRiwKICAgICAgICAgICAgICAgIG9yZGVySWQ6IG1zZy5vcmRlcklkLAogICAgICAgICAgICAgICAgYW1vdW50OiBvcmRlci5saXF1aWRpdHlEZWx0YSwKICAgICAgICAgICAgICAgIHJlY2VpdmVyOiBvcmRlci5hY2NvdW50LAogICAgICAgICAgICAgICAgdHJ4SWQ6IG1zZy50cnhJZAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIHVwZGF0ZSBvcmRlcgogICAgICAgICAgICBpZiAobXNnLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyID0gbXNnLmV4ZWN1dGlvbkZlZVJlY2VpdmVyISE7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciA9IHNlbmRlcigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG9yZGVyLmxhc3RPcGVyYXRvciA9IHNlbmRlcigpOwogICAgICAgICAgICBvcmRlci5pc1BlbmRpbmcgPSB0cnVlOwogICAgICAgICAgICBvcmRlci5jYWxsYmFja0lkID0gY2FsbGJhY2tJZDsKICAgICAgICAgICAgc2VsZi5yYmZQb3NpdGlvbk9yZGVycy5zZXQobXNnLm9yZGVySWQsIG9yZGVyKTsKCiAgICAgICAgICAgIC8vIHRyYW5zZmVyIGpldHRvbgogICAgICAgICAgICBzZWxmLnJlZnVuZEpldHRvbihjYWxsYmFja0lkLCBvcmRlci5saXF1aWRpdHlEZWx0YSwgb3JkZXIuYWNjb3VudCwgbXlBZGRyZXNzKCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGdldCBmZWUgcmVjZWl2ZXIKICAgICAgICAgICAgbGV0IGV4ZWN1dGlvbkZlZVJlY2VpdmVyOiBBZGRyZXNzID0gc2VuZGVyKCk7CiAgICAgICAgICAgIGlmIChtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXIgPSBtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIhITsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gZGVsZXRlIG9yZGVyCiAgICAgICAgICAgIHNlbGYucmJmUG9zaXRpb25PcmRlcnMuc2V0KG1zZy5vcmRlcklkLCBudWxsKTsKICAgICAgICAgICAgLy8gZXZlbnQKICAgICAgICAgICAgZW1pdChSQkZQb3NpdGlvbk9yZGVyQ2FuY2VsbGVkRXZlbnR7CiAgICAgICAgICAgICAgICBpc0luY3JlYXNlOiBmYWxzZSwKICAgICAgICAgICAgICAgIG9yZGVySWQ6IG1zZy5vcmRlcklkLAogICAgICAgICAgICAgICAgdHJ4SWQ6IG1zZy50cnhJZAogICAgICAgICAgICB9LnRvQ2VsbCgpKTsKCiAgICAgICAgICAgIC8vIHRyYW5zZmVyIGV4ZWN1dGlvbiBmZWUKICAgICAgICAgICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICAgICAgICAgIHRvOiBleGVjdXRpb25GZWVSZWNlaXZlciwKICAgICAgICAgICAgICAgIGJvdW5jZTogdHJ1ZSwKICAgICAgICAgICAgICAgIHZhbHVlOiBvcmRlci5leGVjdXRpb25GZWUsCiAgICAgICAgICAgICAgICBtb2RlOiBTZW5kUGF5R2FzU2VwYXJhdGVseQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIHRyYW5zZmVyIGV4ZWNlc3MgZ2FzCiAgICAgICAgICAgIHNlbGYucmVmdW5kRXhlY2Vzc1RvbihzZW5kZXIoKSwgMCk7CiAgICAgICAgfQogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gRXhlY3V0ZSBJbmNyZWFzZSAvIERlY3JlYXNlID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCiAgICAvLyBleGVjdXRlIGluY3JlYXNlID0+IGluY3JlYXNlIHBvc2l0aW9uIGZvciBwb29sID0+IGluY3JlYXNlIHN1Y2Nlc3MgLyBib3VuY2VkID0+IGV4Y2VzcyBnYXMKICAgIC8vIGV4ZWN1dGUgZGVjcmVhc2UgPT4gZGVjcmVhc2UgcG9zaXRpb24gZm9yIHBvb2wgPT4gZGVjcmVhc2Ugc3VjY2VzcyA9PiBvcmRlckJvb2sgd2FsbGV0ID0+IHVzZXIgd2FsbGV0ID0+IHRva2VuIGV4Y2Vzc2VzIGhhbmRlbCBjYW5jZWwgPT4gZXhjZXNzIGdhcwogICAgcmVjZWl2ZShtc2c6IEV4ZWN1dGVSQkZQb3NpdGlvbk9yZGVyKSB7CiAgICAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKCiAgICAgICAgLy8gY2hlY2sgb3JkZXIKICAgICAgICBsZXQgb3JkZXJPcHQ6IFJCRlBvc2l0aW9uT3JkZXI/ID0gc2VsZi5yYmZQb3NpdGlvbk9yZGVycy5nZXQobXNnLm9yZGVySWQpOwogICAgICAgIHJlcXVpcmUob3JkZXJPcHQgIT0gbnVsbCwgIm9yZGVyIG5vdCBleGlzdCIpOwoKICAgICAgICBsZXQgb3JkZXI6IFJCRlBvc2l0aW9uT3JkZXIgPSBvcmRlck9wdCEhOwoKICAgICAgICAvLyBjaGVjayBnYXMKICAgICAgICBpZiAob3JkZXIuaXNJbmNyZWFzZSkgewogICAgICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDMgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICogMiArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UgKyBzZWxmLmdldFBvb2xHYXMoKSwgImdhcyBub3QgZW5vdWdoIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiA2ICsgc2VsZi5nYXNDb25zdW1wdGlvbiAqIDMgKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlICsgc2VsZi5nZXRQb29sR2FzKCkgKyB0b24oIjAuMDMyIiksICJnYXMgbm90IGVub3VnaCIpOwogICAgICAgIH0KCiAgICAgICAgc2VsZi5zaG91bGRFeGVjdXRlKG9yZGVyLmJsb2NrVGltZSwgb3JkZXIuaXNQZW5kaW5nKTsKCiAgICAgICAgLy8gdXBkYXRlIG9yZGVyCiAgICAgICAgaWYgKG1zZy5leGVjdXRpb25GZWVSZWNlaXZlciAhPSBudWxsKSB7CiAgICAgICAgICAgIG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyID0gbXNnLmV4ZWN1dGlvbkZlZVJlY2VpdmVyISE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgb3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgPSBzZW5kZXIoKTsKICAgICAgICB9CiAgICAgICAgb3JkZXIuaXNQZW5kaW5nID0gdHJ1ZTsKICAgICAgICBzZWxmLnJiZlBvc2l0aW9uT3JkZXJzLnNldChtc2cub3JkZXJJZCwgb3JkZXIpOwoKICAgICAgICAvLyBzZW5kIHVwZGF0ZSBwb3NpdGlvbiBtc2cKICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgICAgICB0bzogc2VsZi5wb29sLAogICAgICAgICAgICB2YWx1ZTogMCwKICAgICAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLAogICAgICAgICAgICBib3VuY2U6IHRydWUsCiAgICAgICAgICAgIGJvZHk6IFVwZGF0ZVJCRlBvc2l0aW9uIHsKICAgICAgICAgICAgICAgIGlzSW5jcmVhc2U6IG9yZGVyLmlzSW5jcmVhc2UsCiAgICAgICAgICAgICAgICBvcmRlcklkOiBtc2cub3JkZXJJZCwKICAgICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQsCiAgICAgICAgICAgICAgICBhY2NvdW50OiBvcmRlci5hY2NvdW50LAogICAgICAgICAgICAgICAgbGlxdWlkaXR5RGVsdGE6IG9yZGVyLmxpcXVpZGl0eURlbHRhLAogICAgICAgICAgICAgICAgcHJpY2VzTGVuZ3RoOiBtc2cucHJpY2VzTGVuZ3RoLAogICAgICAgICAgICAgICAgcHJpY2VzOiBtc2cucHJpY2VzCiAgICAgICAgICAgIH0udG9DZWxsKCkKICAgICAgICB9KTsKICAgIH0KCiAgICAvLyBpbmNyZWFzZSBzdWNjZXNzIC8gYm91bmNlZCA9PiBleGNlc3MgZ2FzCiAgICAvLyBkZWNyZWFzZSBzdWNjZXNzID0+IG9yZGVyQm9vayB3YWxsZXQgPT4gdXNlciB3YWxsZXQgPT4gdG9rZW4gZXhjZXNzZXMgaGFuZGVsIGNhbmNlbCA9PiBleGNlc3MgZ2FzCiAgICByZWNlaXZlKG1zZzogVXBkYXRlUkJGUG9zaXRpb25TdWNjZXNzKSB7CiAgICAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKICAgICAgICByZXF1aXJlKHNlbmRlcigpID09IHNlbGYucG9vbCwgImludmFsaWQgc2VuZGVyIik7CgogICAgICAgIC8vIGdldCBvcmRlcgogICAgICAgIGxldCBvcmRlck9wdDogUkJGUG9zaXRpb25PcmRlcj8gPSBzZWxmLnJiZlBvc2l0aW9uT3JkZXJzLmdldChtc2cub3JkZXJJZCk7CiAgICAgICAgaWYgKG9yZGVyT3B0ID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBsZXQgb3JkZXI6IFJCRlBvc2l0aW9uT3JkZXIgPSBvcmRlck9wdCEhOwoKICAgICAgICAvLyBjaGVjayBnYXMKICAgICAgICBpZiAob3JkZXIuaXNJbmNyZWFzZSkgewogICAgICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDIgKyBzZWxmLmdhc0NvbnN1bXB0aW9uLCAiZ2FzIG5vdCBlbm91Z2giKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDQgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICogMiArIHRvbigiMC4wMzIiKSwgImdhcyBub3QgZW5vdWdoIik7CiAgICAgICAgfQoKICAgICAgICBpZiAob3JkZXIuaXNJbmNyZWFzZSkgewogICAgICAgICAgICAvLyBkZWxldGUgb3JkZXIKICAgICAgICAgICAgc2VsZi5yYmZQb3NpdGlvbk9yZGVycy5zZXQobXNnLm9yZGVySWQsIG51bGwpOwogICAgICAgICAgICAvLyBldmVudAogICAgICAgICAgICBlbWl0KFJCRlBvc2l0aW9uT3JkZXJFeGVjdXRlZEV2ZW50ewogICAgICAgICAgICAgICAgaXNJbmNyZWFzZTogdHJ1ZSwKICAgICAgICAgICAgICAgIG9yZGVySWQ6IG1zZy5vcmRlcklkLAogICAgICAgICAgICAgICAgdHJ4SWQ6IG1zZy50cnhJZAogICAgICAgICAgICB9LnRvQ2VsbCgpKTsKCiAgICAgICAgICAgIC8vIHRyYW5zZmVyIGV4ZWN1dGlvbiBmZWUKICAgICAgICAgICAgaWYgKG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgICAgICAgICAgdG86IG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyISEsCiAgICAgICAgICAgICAgICAgICAgYm91bmNlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvcmRlci5leGVjdXRpb25GZWUsCiAgICAgICAgICAgICAgICAgICAgbW9kZTogU2VuZFBheUdhc1NlcGFyYXRlbHkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyB0cmFuc2ZlciBleGVjZXNzIGdhcwogICAgICAgICAgICBpZiAob3JkZXIubGFzdE9wZXJhdG9yICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHNlbGYucmVmdW5kRXhlY2Vzc1RvbihvcmRlci5sYXN0T3BlcmF0b3IhISwgMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBhZGQgY2FsbGJhY2sKICAgICAgICAgICAgbGV0IGNhbGxiYWNrSWQ6IEludCA9IHNlbGYuamV0dG9uQ2FsbGJhY2tRdWVyeUlkTmV4dDsKICAgICAgICAgICAgc2VsZi5qZXR0b25DYWxsYmFja1F1ZXJ5SWROZXh0ID0gY2FsbGJhY2tJZCArIDE7CiAgICAgICAgICAgIHNlbGYuamV0dG9uQ2FsbGJhY2tzLnNldChjYWxsYmFja0lkLCBKZXR0b25DYWxsYmFja3sKICAgICAgICAgICAgICAgIG9yZGVyVHlwZTogT1JERVJfVFlQRV9SQkYsCiAgICAgICAgICAgICAgICBvcmRlcklkOiBtc2cub3JkZXJJZCwKICAgICAgICAgICAgICAgIGFtb3VudDogbXNnLnJlY2VpdmUsCiAgICAgICAgICAgICAgICByZWNlaXZlcjogb3JkZXIuYWNjb3VudCwKICAgICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBvcmRlci5jYWxsYmFja0lkID0gY2FsbGJhY2tJZDsKICAgICAgICAgICAgc2VsZi5yYmZQb3NpdGlvbk9yZGVycy5zZXQobXNnLm9yZGVySWQsIG9yZGVyKTsKCiAgICAgICAgICAgIC8vIHRyYW5zZmVyIGpldHRvbgogICAgICAgICAgICBzZWxmLnJlZnVuZEpldHRvbihjYWxsYmFja0lkLCBtc2cucmVjZWl2ZSwgb3JkZXIuYWNjb3VudCwgbXlBZGRyZXNzKCkpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyByZXNldCBvcmRlciBwZW5kaW5nCiAgICBib3VuY2VkKHNyYzogYm91bmNlZDxVcGRhdGVSQkZQb3NpdGlvbj4pIHsKCiAgICAgICAgLy8gZ2V0IG9yZGVyCiAgICAgICAgbGV0IG9yZGVyT3B0OiBSQkZQb3NpdGlvbk9yZGVyPyA9IHNlbGYucmJmUG9zaXRpb25PcmRlcnMuZ2V0KHNyYy5vcmRlcklkKTsKICAgICAgICBpZiAob3JkZXJPcHQgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGxldCBvcmRlcjogUkJGUG9zaXRpb25PcmRlciA9IG9yZGVyT3B0ISE7CgogICAgICAgIC8vIHVwZGF0ZSBwZW5kaW5nCiAgICAgICAgb3JkZXIuaXNQZW5kaW5nID0gZmFsc2U7CiAgICAgICAgc2VsZi5yYmZQb3NpdGlvbk9yZGVycy5zZXQoc3JjLm9yZGVySWQsIG9yZGVyKTsKICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IENhbGxiYWNrIENhbmNlbCBJbmNyZWFzZSAvIEV4ZWN1dGUgRGVjcmVhc2UgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIGZ1biBoYW5kZWxSQkZQb3NpdGlvbk9yZGVyQ2FsbGJhY2sob3JkZXJJZDogSW50LCB0cnhJZDogSW50KSB7CiAgICAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKCiAgICAgICAgLy8gY2hlY2sgZ2FzCiAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKyBzZWxmLmdhc0NvbnN1bXB0aW9uLCAiZ2FzIG5vdCBlbm91Z2giKTsKCiAgICAgICAgLy8gZ2V0IG9yZGVyCiAgICAgICAgbGV0IG9yZGVyT3B0OiBSQkZQb3NpdGlvbk9yZGVyPyA9IHNlbGYucmJmUG9zaXRpb25PcmRlcnMuZ2V0KG9yZGVySWQpOwogICAgICAgIGlmIChvcmRlck9wdCA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbGV0IG9yZGVyOiBSQkZQb3NpdGlvbk9yZGVyID0gb3JkZXJPcHQhITsKCiAgICAgICAgLy8gZGVsZXRlIG9yZGVyCiAgICAgICAgc2VsZi5yYmZQb3NpdGlvbk9yZGVycy5zZXQob3JkZXJJZCwgbnVsbCk7CgogICAgICAgIGlmIChvcmRlci5pc0luY3JlYXNlKSB7CiAgICAgICAgICAgIC8vIGV2ZW50CiAgICAgICAgICAgIGVtaXQoUkJGUG9zaXRpb25PcmRlckNhbmNlbGxlZEV2ZW50ewogICAgICAgICAgICAgICAgaXNJbmNyZWFzZTogdHJ1ZSwKICAgICAgICAgICAgICAgIG9yZGVySWQ6IG9yZGVySWQsCiAgICAgICAgICAgICAgICB0cnhJZDogdHJ4SWQKICAgICAgICAgICAgfS50b0NlbGwoKSk7CgogICAgICAgICAgICAvLyB0cmFuc2ZlciBleGVjdXRpb24gZmVlCiAgICAgICAgICAgIGlmIChvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgICAgICAgICAgICAgIHRvOiBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciEhLAogICAgICAgICAgICAgICAgICAgIGJvdW5jZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb3JkZXIuZXhlY3V0aW9uRmVlLAogICAgICAgICAgICAgICAgICAgIG1vZGU6IFNlbmRQYXlHYXNTZXBhcmF0ZWx5CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGV2ZW50CiAgICAgICAgICAgIGVtaXQoUkJGUG9zaXRpb25PcmRlckV4ZWN1dGVkRXZlbnR7CiAgICAgICAgICAgICAgICBpc0luY3JlYXNlOiBmYWxzZSwKICAgICAgICAgICAgICAgIG9yZGVySWQ6IG9yZGVySWQsCiAgICAgICAgICAgICAgICB0cnhJZDogdHJ4SWQKICAgICAgICAgICAgfS50b0NlbGwoKSk7CgogICAgICAgICAgICAvLyB0cmFuc2ZlciBleGVjdXRpb24gZmVlCiAgICAgICAgICAgIGlmIChvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgICAgICAgICAgICAgIHRvOiBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciEhLAogICAgICAgICAgICAgICAgICAgIGJvdW5jZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb3JkZXIuZXhlY3V0aW9uRmVlLAogICAgICAgICAgICAgICAgICAgIG1vZGU6IFNlbmRQYXlHYXNTZXBhcmF0ZWx5CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gdHJhbnNmZXIgZXhlY2VzcyBnYXMKICAgICAgICBpZiAob3JkZXIubGFzdE9wZXJhdG9yICE9IG51bGwpIHsKICAgICAgICAgICAgc2VsZi5yZWZ1bmRFeGVjZXNzVG9uKG9yZGVyLmxhc3RPcGVyYXRvciEhLCAwKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBDb21wZW5zYXRlID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCiAgICAvLyBjb21wZW5zYXRlIFJCRgogICAgLy8gcmVjZWl2ZShtc2c6IENvbXBlbnNhdGVSQkZQb3NpdGlvbk9yZGVyKSB7CiAgICAvLyAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKCiAgICAvLyAgICAgLy8gY2hlY2sgY29tcGVuc2F0b3IKICAgIC8vICAgICBsZXQgaXNDb21wZW5zYXRvcjogQm9vbCA9IGZhbHNlOwogICAgLy8gICAgIGxldCBpc0NvbXBlbnNhdG9yT3B0OiBCb29sPyA9IHNlbGYuY29tcGVuc2F0b3JzLmdldChzZW5kZXIoKSk7CiAgICAvLyAgICAgaWYgKGlzQ29tcGVuc2F0b3JPcHQgIT0gbnVsbCkgewogICAgLy8gICAgICAgICBpc0NvbXBlbnNhdG9yID0gaXNDb21wZW5zYXRvck9wdCEhOwogICAgLy8gICAgIH0KICAgIC8vICAgICByZXF1aXJlKGlzQ29tcGVuc2F0b3IsICJub3QgY29tcGVuc2F0b3IiKTsKICAgICAgICAKICAgIC8vICAgICAvLyBjaGVjayBvcmRlciBwZW5kaW5nCiAgICAvLyAgICAgbGV0IG9yZGVyT3B0OiBSQkZQb3NpdGlvbk9yZGVyPyA9IHNlbGYucmJmUG9zaXRpb25PcmRlcnMuZ2V0KG1zZy5vcmRlcklkKTsKICAgIC8vICAgICByZXF1aXJlKG9yZGVyT3B0ICE9IG51bGwsICJvcmRlciBub3QgZXhpc3QiKTsKICAgIC8vICAgICBsZXQgb3JkZXI6IFJCRlBvc2l0aW9uT3JkZXIgPSBvcmRlck9wdCEhOwoKICAgIC8vICAgICAvLyBjaGVjayBnYXMKICAgIC8vICAgICBpZiAob3JkZXIuaXNJbmNyZWFzZSkgewogICAgLy8gICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDMgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICogMiArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UgKyBzZWxmLmdldFBvb2xHYXMoKSwgImdhcyBub3QgZW5vdWdoIik7CiAgICAvLyAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiA2ICsgc2VsZi5nYXNDb25zdW1wdGlvbiAqIDMgKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlICsgc2VsZi5nZXRQb29sR2FzKCkgKyB0b24oIjAuMDMyIiksICJnYXMgbm90IGVub3VnaCIpOwogICAgLy8gICAgIH0KCiAgICAvLyAgICAgcmVxdWlyZShvcmRlci5pc1BlbmRpbmcsICJvcmRlciBub3QgcGVuZGluZyIpOwoKICAgIC8vICAgICAvLyByZWZ1bmQKICAgIC8vICAgICBpZiAobXNnLm5lZWRSZWZ1bmQpIHsKICAgIC8vICAgICAgICAgLy8gaW5jcmVhc2UgcG9zaXRpb24gZmFpbGVkLCBjYW5jZWwgb3JkZXIKICAgIC8vICAgICAgICAgLy8gcmVmdW5kIGpldHRvbiBmYWlsZWQKICAgIC8vICAgICAgICAgLy8gZ2V0IGNhbGxiYWNrCiAgICAvLyAgICAgICAgIHJlcXVpcmUob3JkZXIuY2FsbGJhY2tJZCAhPSBudWxsLCAiamV0dG9uIGNhbGxiYWNrIG5vdCBleGlzdCIpOwogICAgLy8gICAgICAgICBsZXQgY2FsbGJhY2tJZDogSW50ID0gb3JkZXIuY2FsbGJhY2tJZCEhOwogICAgLy8gICAgICAgICBsZXQgamV0dG9uQ2FsbGJhY2tPcHQ6IEpldHRvbkNhbGxiYWNrPyA9IHNlbGYuamV0dG9uQ2FsbGJhY2tzLmdldChjYWxsYmFja0lkKTsKICAgIC8vICAgICAgICAgaWYgKGpldHRvbkNhbGxiYWNrT3B0ID09IG51bGwpIHsKICAgIC8vICAgICAgICAgICAgIHJldHVybjsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgICBsZXQgamV0dG9uQ2FsbGJhY2s6IEpldHRvbkNhbGxiYWNrID0gamV0dG9uQ2FsbGJhY2tPcHQhITsKICAgIC8vICAgICAgICAgLy8gdXBkYXRlIHRyeElkCiAgICAvLyAgICAgICAgIGpldHRvbkNhbGxiYWNrLnRyeElkID0gbXNnLnRyeElkOwogICAgLy8gICAgICAgICBzZWxmLmpldHRvbkNhbGxiYWNrcy5zZXQoY2FsbGJhY2tJZCwgamV0dG9uQ2FsbGJhY2spOwoKICAgIC8vICAgICAgICAgLy8gdXBkYXRlIGV4ZWN1dGlvbiBmZWUgcmVjZWl2ZXIKICAgIC8vICAgICAgICAgaWYgKG1zZy5leGVjdXRpb25GZWVSZWNlaXZlciAhPSBudWxsKSB7CiAgICAvLyAgICAgICAgICAgICBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciA9IG1zZy5leGVjdXRpb25GZWVSZWNlaXZlciEhOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICAgIG9yZGVyLmxhc3RPcGVyYXRvciA9IHNlbmRlcigpOwogICAgLy8gICAgICAgICBzZWxmLnJiZlBvc2l0aW9uT3JkZXJzLnNldChtc2cub3JkZXJJZCwgb3JkZXIpOwoKICAgIC8vICAgICAgICAgLy8gdHJhbnNmZXIgamV0dG9uCiAgICAvLyAgICAgICAgIHNlbGYucmVmdW5kSmV0dG9uKGNhbGxiYWNrSWQsIGpldHRvbkNhbGxiYWNrLmFtb3VudCwgamV0dG9uQ2FsbGJhY2sucmVjZWl2ZXIsIG15QWRkcmVzcygpKTsKICAgIC8vICAgICAgICAgcmV0dXJuOwogICAgLy8gICAgIH0KCiAgICAvLyAgICAgaWYgKG1zZy5pc0V4ZWN1dGUpIHsKICAgIC8vICAgICAgICAgLy8gZGVsZXRlIG9yZGVyCiAgICAvLyAgICAgICAgIHNlbGYucmJmUG9zaXRpb25PcmRlcnMuc2V0KG1zZy5vcmRlcklkLCBudWxsKTsKICAgIC8vICAgICAgICAgLy8gZXZlbnQKICAgIC8vICAgICAgICAgZW1pdChSQkZQb3NpdGlvbk9yZGVyRXhlY3V0ZWRFdmVudHsKICAgIC8vICAgICAgICAgICAgIGlzSW5jcmVhc2U6IHRydWUsCiAgICAvLyAgICAgICAgICAgICBvcmRlcklkOiBtc2cub3JkZXJJZCwKICAgIC8vICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQKICAgIC8vICAgICAgICAgfS50b0NlbGwoKSk7CiAgICAvLyAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgICAgaWYgKG9yZGVyLmNhbGxiYWNrSWQgIT0gbnVsbCkgewogICAgLy8gICAgICAgICAgICAgLy8gZGVsZXRlIGNhbGxiYWNrCiAgICAvLyAgICAgICAgICAgICBzZWxmLmpldHRvbkNhbGxiYWNrcy5zZXQob3JkZXIuY2FsbGJhY2tJZCEhLCBudWxsKTsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgICAvLyBkZWxldGUgb3JkZXIKICAgIC8vICAgICAgICAgc2VsZi5yYmZQb3NpdGlvbk9yZGVycy5zZXQobXNnLm9yZGVySWQsIG51bGwpOwogICAgLy8gICAgICAgICAvLyBldmVudAogICAgLy8gICAgICAgICBlbWl0KFJCRlBvc2l0aW9uT3JkZXJDYW5jZWxsZWRFdmVudHsKICAgIC8vICAgICAgICAgICAgIGlzSW5jcmVhc2U6IHRydWUsCiAgICAvLyAgICAgICAgICAgICBvcmRlcklkOiBtc2cub3JkZXJJZCwKICAgIC8vICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQKICAgIC8vICAgICAgICAgfS50b0NlbGwoKSk7CiAgICAvLyAgICAgfQoKICAgIC8vICAgICAvLyB0cmFuc2ZlciBleGVjdXRpb24gZmVlCiAgICAvLyAgICAgaWYgKG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwpIHsKICAgIC8vICAgICAgICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgIC8vICAgICAgICAgICAgIHRvOiBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciEhLAogICAgLy8gICAgICAgICAgICAgYm91bmNlOiB0cnVlLAogICAgLy8gICAgICAgICAgICAgdmFsdWU6IG9yZGVyLmV4ZWN1dGlvbkZlZSwKICAgIC8vICAgICAgICAgICAgIG1vZGU6IFNlbmRQYXlHYXNTZXBhcmF0ZWx5CiAgICAvLyAgICAgICAgIH0pOwogICAgLy8gICAgIH0KCiAgICAvLyAgICAgLy8gdHJhbnNmZXIgZXhlY2VzcyBnYXMKICAgIC8vICAgICBzZWxmLnJlZnVuZEV4ZWNlc3NUb24oc2VuZGVyKCksIG9yZGVyLmV4ZWN1dGlvbkZlZSk7CiAgICAvLyAgICAgcmV0dXJuOwogICAgLy8gfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gR2V0dGVyID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCiAgICBnZXQgZnVuIHJiZlBvc2l0aW9uT3JkZXIob3JkZXJJZDogSW50KTogUkJGUG9zaXRpb25PcmRlcj8gewogICAgICAgIHJldHVybiBzZWxmLnJiZlBvc2l0aW9uT3JkZXJzLmdldChvcmRlcklkKTsKICAgIH0KCiAgICBnZXQgZnVuIHJiZlBvc2l0aW9uT3JkZXJJbmRleE5leHQoKTogSW50IHsKICAgICAgICByZXR1cm4gc2VsZi5yYmZQb3NpdGlvbk9yZGVySW5kZXhOZXh0OwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IExQID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQ3JlYXRlIEluY3JlYXNlID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCiAgICBmdW4gaGFuZGxlQ3JlYXRlSW5jcmVhc2VMUFBvc2l0aW9uT3JkZXIocXVlcnlJZDogSW50LCBqZXR0b25Gcm9tQW1vdW50OiBJbnQsIGFjY291bnQ6IEFkZHJlc3MsIGV4ZWN1dGlvbkZlZTogSW50LCBtYXJnaW5EZWx0YTogSW50LCBsaXF1aWRpdHlEZWx0YTogSW50KSB7CiAgICAgICAgZHVtcCgiaGFuZGxlQ3JlYXRlSW5jcmVhc2VMUFBvc2l0aW9uT3JkZXIiKTsKICAgICAgICBsZXQgY3R4OiBDb250ZXh0ID0gY29udGV4dCgpOwoKICAgICAgICBpZiAoY3R4LnZhbHVlIDwgZXhlY3V0aW9uRmVlICsgY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiAyICsgc2VsZi5nYXNDb25zdW1wdGlvbiArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UpIHsKICAgICAgICAgICAgZHVtcCgiZ2FzIG5vdCBlbm91Z2giKTsKICAgICAgICAgICAgc2VsZi5yZWZ1bmRKZXR0b24ocXVlcnlJZCwgamV0dG9uRnJvbUFtb3VudCwgYWNjb3VudCwgYWNjb3VudCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChqZXR0b25Gcm9tQW1vdW50IDwgbWFyZ2luRGVsdGEpIHsKICAgICAgICAgICAgc2VsZi5yZWZ1bmRKZXR0b24ocXVlcnlJZCwgamV0dG9uRnJvbUFtb3VudCwgYWNjb3VudCwgYWNjb3VudCk7CiAgICAgICAgICAgIGR1bXAoInJlZnVuZCBmcm9tIG5vdCBlbm91Z2ggbWFyZ2luIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChleGVjdXRpb25GZWUgPCBzZWxmLm1pbkV4ZWN1dGlvbkZlZSkgewogICAgICAgICAgICBzZWxmLnJlZnVuZEpldHRvbihxdWVyeUlkLCBqZXR0b25Gcm9tQW1vdW50LCBhY2NvdW50LCBhY2NvdW50KTsKICAgICAgICAgICAgZHVtcCgiZXhlY3V0aW9uIGZlZSBub3QgZW5vdWdoIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vIGFkZCBuZXcgb3JkZXIKICAgICAgICBsZXQgb3JkZXJJZDogSW50ID0gc2VsZi5scFBvc2l0aW9uT3JkZXJJbmRleE5leHQ7CiAgICAgICAgc2VsZi5scFBvc2l0aW9uT3JkZXJJbmRleE5leHQgPSBvcmRlcklkICsgMTsKICAgICAgICBzZWxmLmxwUG9zaXRpb25PcmRlcnMuc2V0KG9yZGVySWQsIExQUG9zaXRpb25PcmRlcnsKICAgICAgICAgICAgb3BUeXBlOiBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFLAogICAgICAgICAgICBhY2NvdW50OiBhY2NvdW50LAogICAgICAgICAgICBtYXJnaW5EZWx0YTogbWFyZ2luRGVsdGEsCiAgICAgICAgICAgIGxpcXVpZGl0eURlbHRhOiBsaXF1aWRpdHlEZWx0YSwKICAgICAgICAgICAgZXhlY3V0aW9uRmVlOiBleGVjdXRpb25GZWUsCiAgICAgICAgICAgIGJsb2NrVGltZTogbm93KCksCiAgICAgICAgICAgIGlzUGVuZGluZzogZmFsc2UsCiAgICAgICAgICAgIGNhbGxiYWNrSWQ6IG51bGwsCiAgICAgICAgICAgIGV4ZWN1dGlvbkZlZVJlY2VpdmVyOiBudWxsLAogICAgICAgICAgICBsYXN0T3BlcmF0b3I6IG51bGwKICAgICAgICB9KTsKCiAgICAgICAgLy8gZXZlbnQKICAgICAgICBlbWl0KExQUG9zaXRpb25PcmRlckNyZWF0ZWRFdmVudHsKICAgICAgICAgICAgb3BUeXBlOiBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFLAogICAgICAgICAgICBhY2NvdW50OiBhY2NvdW50LAogICAgICAgICAgICBtYXJnaW5EZWx0YTogbWFyZ2luRGVsdGEsCiAgICAgICAgICAgIGxpcXVpZGl0eURlbHRhOiBsaXF1aWRpdHlEZWx0YSwKICAgICAgICAgICAgZXhlY3V0aW9uRmVlOiBleGVjdXRpb25GZWUsCiAgICAgICAgICAgIG9yZGVySWQ6IG9yZGVySWQKICAgICAgICB9LnRvQ2VsbCgpKTsKCiAgICAgICAgc2VsZi5yZWZ1bmRFeGVjZXNzVG9uKGFjY291bnQsIGV4ZWN1dGlvbkZlZSk7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBDcmVhdGUgRGVjcmVhc2UgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIHJlY2VpdmUobXNnOiBDcmVhdGVEZWNyZWFzZUxQUG9zaXRpb25PcmRlcikgewogICAgICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CiAgICAgICAgLy8gY2hlY2sgZ2FzCiAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgLSBtc2cuZXhlY3V0aW9uRmVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICogMiArIHNlbGYuZ2FzQ29uc3VtcHRpb24gKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlLCAiZ2FzIG5vdCBlbm91Z2giKTsKICAgICAgICAvLyBjaGVjayBleGVjdXRpb24gZmVlCiAgICAgICAgcmVxdWlyZShtc2cuZXhlY3V0aW9uRmVlID49IHNlbGYubWluRXhlY3V0aW9uRmVlLCAiZXhlY3V0aW9uIGZlZSBub3QgZW5vdWdoIik7CgogICAgICAgIC8vIGFkZCBuZXcgb3JkZXIKICAgICAgICBsZXQgb3JkZXJJZDogSW50ID0gc2VsZi5scFBvc2l0aW9uT3JkZXJJbmRleE5leHQ7CiAgICAgICAgc2VsZi5scFBvc2l0aW9uT3JkZXJJbmRleE5leHQgPSBzZWxmLmxwUG9zaXRpb25PcmRlckluZGV4TmV4dCArIDE7CiAgICAgICAgc2VsZi5scFBvc2l0aW9uT3JkZXJzLnNldChvcmRlcklkLCBMUFBvc2l0aW9uT3JkZXJ7CiAgICAgICAgICAgIG9wVHlwZTogT1JERVJfT1BfVFlQRV9ERUNSRUFTRSwKICAgICAgICAgICAgYWNjb3VudDogc2VuZGVyKCksCiAgICAgICAgICAgIG1hcmdpbkRlbHRhOiBtc2cubWFyZ2luRGVsdGEsCiAgICAgICAgICAgIGxpcXVpZGl0eURlbHRhOiBtc2cubGlxdWlkaXR5RGVsdGEsCiAgICAgICAgICAgIGV4ZWN1dGlvbkZlZTogbXNnLmV4ZWN1dGlvbkZlZSwKICAgICAgICAgICAgYmxvY2tUaW1lOiBub3coKSwKICAgICAgICAgICAgaXNQZW5kaW5nOiBmYWxzZSwKICAgICAgICAgICAgY2FsbGJhY2tJZDogbnVsbCwKICAgICAgICAgICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IG51bGwsCiAgICAgICAgICAgIGxhc3RPcGVyYXRvcjogbnVsbAogICAgICAgIH0pOwoKICAgICAgICAvLyBldmVudAogICAgICAgIGVtaXQoTFBQb3NpdGlvbk9yZGVyQ3JlYXRlZEV2ZW50ewogICAgICAgICAgICBvcFR5cGU6IE9SREVSX09QX1RZUEVfREVDUkVBU0UsCiAgICAgICAgICAgIGFjY291bnQ6IHNlbmRlcigpLAogICAgICAgICAgICBtYXJnaW5EZWx0YTogbXNnLm1hcmdpbkRlbHRhLAogICAgICAgICAgICBsaXF1aWRpdHlEZWx0YTogbXNnLmxpcXVpZGl0eURlbHRhLAogICAgICAgICAgICBleGVjdXRpb25GZWU6IG1zZy5leGVjdXRpb25GZWUsCiAgICAgICAgICAgIG9yZGVySWQ6IG9yZGVySWQKICAgICAgICB9LnRvQ2VsbCgpKTsKCiAgICAgICAgLy8gdHJhbnNmZXIgZXhlY2VzcyBnYXMKICAgICAgICBzZWxmLnJlZnVuZEV4ZWNlc3NUb24oc2VuZGVyKCksIG1zZy5leGVjdXRpb25GZWUpOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQ2FuY2VsIEluY3JlYXNlIC8gRGVjcmVhc2UgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIC8vIGNhbmNlbCBpbmNyZWFzZSA9PiBvcmRlckJvb2sgd2FsbGV0ID0+IHVzZXIgd2FsbGV0ID0+IHRva2VuIGV4Y2VzcyBoYW5kZWwgY2FuY2VsID0+IGV4Y2VzcyBnYXMKICAgIC8vIGNhbmNlbCBkZWNyZWFzZSA9PiBleGNlc3MgZ2FzCiAgICByZWNlaXZlKG1zZzogQ2FuY2VsTFBQb3NpdGlvbk9yZGVyKSB7CiAgICAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKICAgICAgICAvLyBjaGVjayBvcmRlcgogICAgICAgIGxldCBvcmRlck9wdDogTFBQb3NpdGlvbk9yZGVyPyA9IHNlbGYubHBQb3NpdGlvbk9yZGVycy5nZXQobXNnLm9yZGVySWQpOwogICAgICAgIHJlcXVpcmUob3JkZXJPcHQgIT0gbnVsbCwgIm9yZGVyIG5vdCBleGlzdCIpOwogICAgICAgIGxldCBvcmRlcjogTFBQb3NpdGlvbk9yZGVyID0gb3JkZXJPcHQhITsKCiAgICAgICAgLy8gY2hlY2sgZ2FzCiAgICAgICAgaWYgKG9yZGVyLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFKSB7CiAgICAgICAgICAgIHJlcXVpcmUoY3R4LnZhbHVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICogNCArIHNlbGYuZ2FzQ29uc3VtcHRpb24gKiAyICsgc2VsZi5taW5Ub25zRm9yU3RvcmFnZSArIHRvbigiMC4wMzIiKSwgImdhcyBub3QgZW5vdWdoIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiAyICsgc2VsZi5nYXNDb25zdW1wdGlvbiArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UsICJnYXMgbm90IGVub3VnaCIpOwogICAgICAgIH0KCiAgICAgICAgc2VsZi5zaG91bGRDYW5jZWwob3JkZXIuYmxvY2tUaW1lLCBzZW5kZXIoKSwgb3JkZXIuaXNQZW5kaW5nKTsKCiAgICAgICAgaWYgKG9yZGVyLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFKSB7CiAgICAgICAgICAgIC8vIGFkZCBjYWxsYmFjawogICAgICAgICAgICBsZXQgY2FsbGJhY2tJZDogSW50ID0gc2VsZi5qZXR0b25DYWxsYmFja1F1ZXJ5SWROZXh0OwogICAgICAgICAgICBzZWxmLmpldHRvbkNhbGxiYWNrUXVlcnlJZE5leHQgPSBjYWxsYmFja0lkICsgMTsKICAgICAgICAgICAgc2VsZi5qZXR0b25DYWxsYmFja3Muc2V0KGNhbGxiYWNrSWQsIEpldHRvbkNhbGxiYWNrewogICAgICAgICAgICAgICAgb3JkZXJUeXBlOiBPUkRFUl9UWVBFX0xQLAogICAgICAgICAgICAgICAgb3JkZXJJZDogbXNnLm9yZGVySWQsCiAgICAgICAgICAgICAgICBhbW91bnQ6IG9yZGVyLm1hcmdpbkRlbHRhLAogICAgICAgICAgICAgICAgcmVjZWl2ZXI6IG9yZGVyLmFjY291bnQsCiAgICAgICAgICAgICAgICB0cnhJZDogbXNnLnRyeElkCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gdXBkYXRlIG9yZGVyCiAgICAgICAgICAgIGlmIChtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgb3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgPSBtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIhITsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyID0gc2VuZGVyKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb3JkZXIubGFzdE9wZXJhdG9yID0gc2VuZGVyKCk7CiAgICAgICAgICAgIG9yZGVyLmlzUGVuZGluZyA9IHRydWU7CiAgICAgICAgICAgIG9yZGVyLmNhbGxiYWNrSWQgPSBjYWxsYmFja0lkOwogICAgICAgICAgICBzZWxmLmxwUG9zaXRpb25PcmRlcnMuc2V0KG1zZy5vcmRlcklkLCBvcmRlcik7CgogICAgICAgICAgICAvLyB0cmFuc2ZlciBqZXR0b24KICAgICAgICAgICAgc2VsZi5yZWZ1bmRKZXR0b24oY2FsbGJhY2tJZCwgb3JkZXIubWFyZ2luRGVsdGEsIG9yZGVyLmFjY291bnQsIG15QWRkcmVzcygpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBnZXQgZmVlIHJlY2VpdmVyCiAgICAgICAgICAgIGxldCBleGVjdXRpb25GZWVSZWNlaXZlcjogQWRkcmVzcyA9IHNlbmRlcigpOwogICAgICAgICAgICBpZiAobXNnLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGV4ZWN1dGlvbkZlZVJlY2VpdmVyID0gbXNnLmV4ZWN1dGlvbkZlZVJlY2VpdmVyISE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIGRlbGV0ZSBvcmRlcgogICAgICAgICAgICBzZWxmLmxwUG9zaXRpb25PcmRlcnMuc2V0KG1zZy5vcmRlcklkLCBudWxsKTsKICAgICAgICAgICAgLy8gZXZlbnQKICAgICAgICAgICAgZW1pdChMUFBvc2l0aW9uT3JkZXJDYW5jZWxsZWRFdmVudHsKICAgICAgICAgICAgICAgIG9wVHlwZTogb3JkZXIub3BUeXBlLAogICAgICAgICAgICAgICAgb3JkZXJJZDogbXNnLm9yZGVySWQsCiAgICAgICAgICAgICAgICB0cnhJZDogbXNnLnRyeElkCiAgICAgICAgICAgIH0udG9DZWxsKCkpOwoKICAgICAgICAgICAgLy8gdHJhbnNmZXIgZXhlY3V0aW9uIGZlZQogICAgICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgICAgICAgICAgdG86IGV4ZWN1dGlvbkZlZVJlY2VpdmVyLAogICAgICAgICAgICAgICAgYm91bmNlOiB0cnVlLAogICAgICAgICAgICAgICAgdmFsdWU6IG9yZGVyLmV4ZWN1dGlvbkZlZSwKICAgICAgICAgICAgICAgIG1vZGU6IFNlbmRQYXlHYXNTZXBhcmF0ZWx5CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gdHJhbnNmZXIgZXhlY2VzcyBnYXMKICAgICAgICAgICAgc2VsZi5yZWZ1bmRFeGVjZXNzVG9uKHNlbmRlcigpLCAwKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBFeGVjdXRlIEluY3JlYXNlIC8gRGVjcmVhc2UgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIC8vIGV4ZWN1dGUgaW5jcmVhc2UgPT4gaW5jcmVhc2UgcG9zaXRpb24gZm9yIHBvb2wgPT4gaW5jcmVhc2Ugc3VjY2VzcyAvIGJvdW5jZWQgPT4gZXhjZXNzIGdhcwogICAgLy8gZXhlY3V0ZSBkZWNyZWFzZSA9PiBkZWNyZWFzZSBwb3NpdGlvbiBmb3IgcG9vbCA9PiBkZWNyZWFzZSBzdWNjZXNzID0+IG9yZGVyQm9vayB3YWxsZXQgPT4gdXNlciB3YWxsZXQgPT4gdG9rZW4gZXhjZXNzZXMgaGFuZGVsIGNhbmNlbCA9PiBleGNlc3MgZ2FzCiAgICByZWNlaXZlKG1zZzogRXhlY3V0ZUxQUG9zaXRpb25PcmRlcikgewogICAgICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CgogICAgICAgIC8vIGNoZWNrIG9yZGVyCiAgICAgICAgbGV0IG9yZGVyT3B0OiBMUFBvc2l0aW9uT3JkZXI/ID0gc2VsZi5scFBvc2l0aW9uT3JkZXJzLmdldChtc2cub3JkZXJJZCk7CiAgICAgICAgcmVxdWlyZShvcmRlck9wdCAhPSBudWxsLCAib3JkZXIgbm90IGV4aXN0Iik7CgogICAgICAgIGxldCBvcmRlcjogTFBQb3NpdGlvbk9yZGVyID0gb3JkZXJPcHQhITsKCiAgICAgICAgLy8gY2hlY2sgZ2FzCiAgICAgICAgaWYgKG9yZGVyLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFKSB7CiAgICAgICAgICAgIHJlcXVpcmUoY3R4LnZhbHVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICogMyArIHNlbGYuZ2FzQ29uc3VtcHRpb24gKiAyICsgc2VsZi5taW5Ub25zRm9yU3RvcmFnZSArIHNlbGYuZ2V0UG9vbEdhcygpLCAiZ2FzIG5vdCBlbm91Z2giKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDYgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICogMyArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UgKyBzZWxmLmdldFBvb2xHYXMoKSArIHRvbigiMC4wMzIiKSwgImdhcyBub3QgZW5vdWdoIik7CiAgICAgICAgfQoKICAgICAgICBzZWxmLnNob3VsZEV4ZWN1dGUob3JkZXIuYmxvY2tUaW1lLCBvcmRlci5pc1BlbmRpbmcpOwoKICAgICAgICAvLyB1cGRhdGUgb3JkZXIKICAgICAgICBpZiAobXNnLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwpIHsKICAgICAgICAgICAgb3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgPSBtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIhITsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciA9IHNlbmRlcigpOwogICAgICAgIH0KICAgICAgICBvcmRlci5pc1BlbmRpbmcgPSB0cnVlOwogICAgICAgIHNlbGYubHBQb3NpdGlvbk9yZGVycy5zZXQobXNnLm9yZGVySWQsIG9yZGVyKTsKCiAgICAgICAgLy8gc2VuZCB1cGRhdGUgcG9zaXRpb24gbXNnCiAgICAgICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICAgICAgdG86IHNlbGYucG9vbCwKICAgICAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgICAgIG1vZGU6IFNlbmRSZW1haW5pbmdWYWx1ZSwKICAgICAgICAgICAgYm91bmNlOiB0cnVlLAogICAgICAgICAgICBib2R5OiBVcGRhdGVMUFBvc2l0aW9uIHsKICAgICAgICAgICAgICAgIG9yZGVySWQ6IG1zZy5vcmRlcklkLAogICAgICAgICAgICAgICAgb3BUeXBlOiBvcmRlci5vcFR5cGUsCiAgICAgICAgICAgICAgICB0cnhJZDogbXNnLnRyeElkLAogICAgICAgICAgICAgICAgYWNjb3VudDogb3JkZXIuYWNjb3VudCwKICAgICAgICAgICAgICAgIG1hcmdpbkRlbHRhOiBvcmRlci5tYXJnaW5EZWx0YSwKICAgICAgICAgICAgICAgIGxpcXVpZGl0eURlbHRhOiBvcmRlci5saXF1aWRpdHlEZWx0YSwKICAgICAgICAgICAgICAgIHByaWNlc0xlbmd0aDogbXNnLnByaWNlc0xlbmd0aCwKICAgICAgICAgICAgICAgIHByaWNlczogbXNnLnByaWNlcwogICAgICAgICAgICB9LnRvQ2VsbCgpCiAgICAgICAgfSk7CiAgICAgICAgZHVtcCgiZXhlY3V0ZSBMUCBpbmNyZWFzZSBvcmRlciBzZW5kIG1zZyB0byBwb29sIik7CiAgICB9CgogICAgLy8gaW5jcmVhc2Ugc3VjY2VzcyAvIGJvdW5jZWQgPT4gZXhjZXNzIGdhcwogICAgLy8gZGVjcmVhc2Ugc3VjY2VzcyA9PiBvcmRlckJvb2sgd2FsbGV0ID0+IHVzZXIgd2FsbGV0ID0+IHRva2VuIGV4Y2Vzc2VzIGhhbmRlbCBjYW5jZWwgPT4gZXhjZXNzIGdhcwogICAgcmVjZWl2ZShtc2c6IFVwZGF0ZUxQUG9zaXRpb25TdWNjZXNzKSB7CiAgICAgICAgZHVtcCgicmVjZWl2ZSB1cGRhdGUgTFAgcG9zaXRpb24gc3VjY2VzcyIpOwogICAgICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CiAgICAgICAgcmVxdWlyZShzZW5kZXIoKSA9PSBzZWxmLnBvb2wsICJpbnZhbGlkIHNlbmRlciIpOwoKICAgICAgICAvLyBnZXQgb3JkZXIKICAgICAgICBsZXQgb3JkZXJPcHQ6IExQUG9zaXRpb25PcmRlcj8gPSBzZWxmLmxwUG9zaXRpb25PcmRlcnMuZ2V0KG1zZy5vcmRlcklkKTsKICAgICAgICBpZiAob3JkZXJPcHQgPT0gbnVsbCkgewogICAgICAgICAgICBkdW1wKCJvcmRlciBub3QgZXhpc3QiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBsZXQgb3JkZXI6IExQUG9zaXRpb25PcmRlciA9IG9yZGVyT3B0ISE7CgogICAgICAgIC8vIGNoZWNrIGdhcwogICAgICAgIGlmIChvcmRlci5vcFR5cGUgPT0gT1JERVJfT1BfVFlQRV9JTkNSRUFTRSkgewogICAgICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDIgKyBzZWxmLmdhc0NvbnN1bXB0aW9uLCAiZ2FzIG5vdCBlbm91Z2giKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDQgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICogMiArIHRvbigiMC4wMzIiKSwgImdhcyBub3QgZW5vdWdoIik7CiAgICAgICAgfQoKICAgICAgICBpZiAob3JkZXIub3BUeXBlID09IE9SREVSX09QX1RZUEVfSU5DUkVBU0UpIHsKICAgICAgICAgICAgLy8gZGVsZXRlIG9yZGVyCiAgICAgICAgICAgIHNlbGYubHBQb3NpdGlvbk9yZGVycy5zZXQobXNnLm9yZGVySWQsIG51bGwpOwogICAgICAgICAgICAvLyBldmVudAogICAgICAgICAgICBlbWl0KExQUG9zaXRpb25PcmRlckV4ZWN1dGVkRXZlbnR7CiAgICAgICAgICAgICAgICBvcFR5cGU6IG9yZGVyLm9wVHlwZSwKICAgICAgICAgICAgICAgIG9yZGVySWQ6IG1zZy5vcmRlcklkLAogICAgICAgICAgICAgICAgdHJ4SWQ6IG1zZy50cnhJZAogICAgICAgICAgICB9LnRvQ2VsbCgpKTsKCiAgICAgICAgICAgIC8vIHRyYW5zZmVyIGV4ZWN1dGlvbiBmZWUKICAgICAgICAgICAgaWYgKG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgICAgICAgICAgdG86IG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyISEsCiAgICAgICAgICAgICAgICAgICAgYm91bmNlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvcmRlci5leGVjdXRpb25GZWUsCiAgICAgICAgICAgICAgICAgICAgbW9kZTogU2VuZFBheUdhc1NlcGFyYXRlbHkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyB0cmFuc2ZlciBleGVjZXNzIGdhcwogICAgICAgICAgICBpZiAob3JkZXIubGFzdE9wZXJhdG9yICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHNlbGYucmVmdW5kRXhlY2Vzc1RvbihvcmRlci5sYXN0T3BlcmF0b3IhISwgMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsZXQgcmVjZWl2ZXI6IEFkZHJlc3MgPSBvcmRlci5hY2NvdW50OwogICAgICAgICAgICBpZiAob3JkZXIub3BUeXBlID09IE9SREVSX09QX1RZUEVfTElRVUlEQVRJT04pIHsKICAgICAgICAgICAgICAgIHJlY2VpdmVyID0gb3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIhITsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBhZGQgY2FsbGJhY2sKICAgICAgICAgICAgbGV0IGNhbGxiYWNrSWQ6IEludCA9IHNlbGYuamV0dG9uQ2FsbGJhY2tRdWVyeUlkTmV4dDsKICAgICAgICAgICAgc2VsZi5qZXR0b25DYWxsYmFja1F1ZXJ5SWROZXh0ID0gY2FsbGJhY2tJZCArIDE7CiAgICAgICAgICAgIHNlbGYuamV0dG9uQ2FsbGJhY2tzLnNldChjYWxsYmFja0lkLCBKZXR0b25DYWxsYmFja3sKICAgICAgICAgICAgICAgIG9yZGVyVHlwZTogT1JERVJfVFlQRV9MUCwKICAgICAgICAgICAgICAgIG9yZGVySWQ6IG1zZy5vcmRlcklkLAogICAgICAgICAgICAgICAgYW1vdW50OiBtc2cucmVjZWl2ZSwKICAgICAgICAgICAgICAgIHJlY2VpdmVyOiByZWNlaXZlciwKICAgICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBvcmRlci5jYWxsYmFja0lkID0gY2FsbGJhY2tJZDsKICAgICAgICAgICAgc2VsZi5scFBvc2l0aW9uT3JkZXJzLnNldChtc2cub3JkZXJJZCwgb3JkZXIpOwoKICAgICAgICAgICAgLy8gdHJhbnNmZXIgamV0dG9uCiAgICAgICAgICAgIHNlbGYucmVmdW5kSmV0dG9uKGNhbGxiYWNrSWQsIG1zZy5yZWNlaXZlLCByZWNlaXZlciwgbXlBZGRyZXNzKCkpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyByZXNldCBvcmRlciBwZW5kaW5nCiAgICBib3VuY2VkKHNyYzogYm91bmNlZDxVcGRhdGVMUFBvc2l0aW9uPikgewogICAgICAgIGR1bXAoImluY3JlYXNlIGxwIHBvc2l0aW9uIGZhaWxlZCIpOwoKICAgICAgICAvLyBnZXQgb3JkZXIKICAgICAgICBsZXQgb3JkZXJPcHQ6IExQUG9zaXRpb25PcmRlcj8gPSBzZWxmLmxwUG9zaXRpb25PcmRlcnMuZ2V0KHNyYy5vcmRlcklkKTsKICAgICAgICBpZiAob3JkZXJPcHQgPT0gbnVsbCkgewogICAgICAgICAgICBkdW1wKCJvcmRlciBub3QgZXhpc3QiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBsZXQgb3JkZXI6IExQUG9zaXRpb25PcmRlciA9IG9yZGVyT3B0ISE7CiAgICAgICAgaWYgKG9yZGVyLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0xJUVVJREFUSU9OKSB7CiAgICAgICAgICAgIC8vIGRlbGV0ZQogICAgICAgICAgICBzZWxmLmxwUG9zaXRpb25PcmRlcnMuc2V0KHNyYy5vcmRlcklkLCBudWxsKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyB1cGRhdGUgcGVuZGluZwogICAgICAgICAgICBvcmRlci5pc1BlbmRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgc2VsZi5scFBvc2l0aW9uT3JkZXJzLnNldChzcmMub3JkZXJJZCwgb3JkZXIpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IExpcXVpZGF0aW9uID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCiAgICByZWNlaXZlKG1zZzogTGlxdWlkYXRlTFBQb3NpdGlvbk9yZGVyKSB7CiAgICAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKCiAgICAgICAgLy8gY2hlY2sgZ2FzCiAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiA2ICsgc2VsZi5nYXNDb25zdW1wdGlvbiAqIDMgKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlICsgc2VsZi5nZXRQb29sR2FzKCkgKyB0b24oIjAuMDMyIiksICJnYXMgbm90IGVub3VnaCIpOwoKICAgICAgICAvLyBjaGVjayBzZW5kZXIKICAgICAgICBsZXQgaXNFeGVjdXRvcjogQm9vbCA9IGZhbHNlOwogICAgICAgIGxldCBpc0V4ZWN1dG9yT3B0OiBCb29sPyA9IHNlbGYuZXhlY3V0b3JzLmdldChzZW5kZXIoKSk7CiAgICAgICAgaWYgKGlzRXhlY3V0b3JPcHQgIT0gbnVsbCkgewogICAgICAgICAgICBpc0V4ZWN1dG9yID0gaXNFeGVjdXRvck9wdCEhOwogICAgICAgIH0KICAgICAgICByZXF1aXJlKGlzRXhlY3V0b3IsICJpbnZhbGlkIHNlbmRlciIpOwoKICAgICAgICAvLyBmZWUgcmVjZWl2ZXIKICAgICAgICBsZXQgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3MgPSBzZW5kZXIoKTsKICAgICAgICBpZiAobXNnLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwpIHsKICAgICAgICAgICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXIgPSBtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIhITsKICAgICAgICB9CgogICAgICAgIC8vIGFkZCBuZXcgb3JkZXIKICAgICAgICBsZXQgb3JkZXJJZDogSW50ID0gc2VsZi5scFBvc2l0aW9uT3JkZXJJbmRleE5leHQ7CiAgICAgICAgc2VsZi5scFBvc2l0aW9uT3JkZXJJbmRleE5leHQgPSBzZWxmLmxwUG9zaXRpb25PcmRlckluZGV4TmV4dCArIDE7CiAgICAgICAgc2VsZi5scFBvc2l0aW9uT3JkZXJzLnNldChvcmRlcklkLCBMUFBvc2l0aW9uT3JkZXJ7CiAgICAgICAgICAgIG9wVHlwZTogT1JERVJfT1BfVFlQRV9MSVFVSURBVElPTiwKICAgICAgICAgICAgYWNjb3VudDogbXNnLmFjY291bnQsCiAgICAgICAgICAgIG1hcmdpbkRlbHRhOiAwLAogICAgICAgICAgICBsaXF1aWRpdHlEZWx0YTogMCwKICAgICAgICAgICAgZXhlY3V0aW9uRmVlOiAwLAogICAgICAgICAgICBibG9ja1RpbWU6IG5vdygpLAogICAgICAgICAgICBpc1BlbmRpbmc6IHRydWUsCiAgICAgICAgICAgIGNhbGxiYWNrSWQ6IG51bGwsCiAgICAgICAgICAgIGV4ZWN1dGlvbkZlZVJlY2VpdmVyOiBleGVjdXRpb25GZWVSZWNlaXZlciwKICAgICAgICAgICAgbGFzdE9wZXJhdG9yOiBzZW5kZXIoKQogICAgICAgIH0pOwoKICAgICAgICAvLyBzZW5kIHVwZGF0ZSBwb3NpdGlvbiBtc2cKICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgICAgICB0bzogc2VsZi5wb29sLAogICAgICAgICAgICB2YWx1ZTogMCwKICAgICAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLAogICAgICAgICAgICBib3VuY2U6IHRydWUsCiAgICAgICAgICAgIGJvZHk6IFVwZGF0ZUxQUG9zaXRpb24gewogICAgICAgICAgICAgICAgb3BUeXBlOiBPUkRFUl9PUF9UWVBFX0xJUVVJREFUSU9OLAogICAgICAgICAgICAgICAgb3JkZXJJZDogb3JkZXJJZCwKICAgICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQsCiAgICAgICAgICAgICAgICBhY2NvdW50OiBtc2cuYWNjb3VudCwKICAgICAgICAgICAgICAgIG1hcmdpbkRlbHRhOiAwLAogICAgICAgICAgICAgICAgbGlxdWlkaXR5RGVsdGE6IDAsCiAgICAgICAgICAgICAgICBwcmljZXNMZW5ndGg6IG1zZy5wcmljZXNMZW5ndGgsCiAgICAgICAgICAgICAgICBwcmljZXM6IG1zZy5wcmljZXMKICAgICAgICAgICAgfS50b0NlbGwoKQogICAgICAgIH0pOwogICAgICAgIGR1bXAoImxpcXVpZGF0ZSBMUCBzZW5kIG1zZyB0byBwb29sIik7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBDYWxsYmFjayBDYW5jZWwgSW5jcmVhc2UgLyBFeGVjdXRlIERlY3JlYXNlIC8gRXhlY3V0ZSBMaXF1aWRhdGlvbiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgZnVuIGhhbmRlbExQUG9zaXRpb25PcmRlckNhbGxiYWNrKG9yZGVySWQ6IEludCwgdHJ4SWQ6IEludCkgewogICAgICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CgogICAgICAgIC8vIGNoZWNrIGdhcwogICAgICAgIHJlcXVpcmUoY3R4LnZhbHVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICsgc2VsZi5nYXNDb25zdW1wdGlvbiwgImdhcyBub3QgZW5vdWdoIik7CgogICAgICAgIC8vIGdldCBvcmRlcgogICAgICAgIGxldCBvcmRlck9wdDogTFBQb3NpdGlvbk9yZGVyPyA9IHNlbGYubHBQb3NpdGlvbk9yZGVycy5nZXQob3JkZXJJZCk7CiAgICAgICAgaWYgKG9yZGVyT3B0ID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBsZXQgb3JkZXI6IExQUG9zaXRpb25PcmRlciA9IG9yZGVyT3B0ISE7CgogICAgICAgIC8vIGRlbGV0ZSBvcmRlcgogICAgICAgIHNlbGYubHBQb3NpdGlvbk9yZGVycy5zZXQob3JkZXJJZCwgbnVsbCk7CgogICAgICAgIGlmIChvcmRlci5vcFR5cGUgPT0gT1JERVJfT1BfVFlQRV9JTkNSRUFTRSkgewogICAgICAgICAgICAvLyBldmVudAogICAgICAgICAgICBlbWl0KExQUG9zaXRpb25PcmRlckNhbmNlbGxlZEV2ZW50ewogICAgICAgICAgICAgICAgb3BUeXBlOiBvcmRlci5vcFR5cGUsCiAgICAgICAgICAgICAgICBvcmRlcklkOiBvcmRlcklkLAogICAgICAgICAgICAgICAgdHJ4SWQ6IHRyeElkCiAgICAgICAgICAgIH0udG9DZWxsKCkpOwoKICAgICAgICAgICAgLy8gdHJhbnNmZXIgZXhlY3V0aW9uIGZlZQogICAgICAgICAgICBpZiAob3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICAgICAgICAgICAgICB0bzogb3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIhISwKICAgICAgICAgICAgICAgICAgICBib3VuY2U6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG9yZGVyLmV4ZWN1dGlvbkZlZSwKICAgICAgICAgICAgICAgICAgICBtb2RlOiBTZW5kUGF5R2FzU2VwYXJhdGVseQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZHVtcCgiY2FuY2VsIExQIGluY3JlYXNlIG9yZGVyIHN1Y2Nlc3MiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBldmVudAogICAgICAgICAgICBlbWl0KExQUG9zaXRpb25PcmRlckV4ZWN1dGVkRXZlbnR7CiAgICAgICAgICAgICAgICBvcFR5cGU6IG9yZGVyLm9wVHlwZSwKICAgICAgICAgICAgICAgIG9yZGVySWQ6IG9yZGVySWQsCiAgICAgICAgICAgICAgICB0cnhJZDogdHJ4SWQKICAgICAgICAgICAgfS50b0NlbGwoKSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyB0cmFuc2ZlciBleGVjdXRpb24gZmVlCiAgICAgICAgICAgIGlmIChvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciAhPSBudWxsICYmIG9yZGVyLmV4ZWN1dGlvbkZlZSAhPSAwKSB7CiAgICAgICAgICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgICAgICAgICAgICAgIHRvOiBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciEhLAogICAgICAgICAgICAgICAgICAgIGJvdW5jZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb3JkZXIuZXhlY3V0aW9uRmVlLAogICAgICAgICAgICAgICAgICAgIG1vZGU6IFNlbmRQYXlHYXNTZXBhcmF0ZWx5CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gdHJhbnNmZXIgZXhlY2VzcyBnYXMKICAgICAgICBpZiAob3JkZXIubGFzdE9wZXJhdG9yICE9IG51bGwpIHsKICAgICAgICAgICAgc2VsZi5yZWZ1bmRFeGVjZXNzVG9uKG9yZGVyLmxhc3RPcGVyYXRvciEhLCAwKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBDb21wZW5zYXRlID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCiAgICAvLyByZWNlaXZlKG1zZzogQ29tcGVuc2F0ZUxQUG9zaXRpb25PcmRlcikgewogICAgLy8gICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CgogICAgLy8gICAgIC8vIGNoZWNrIGNvbXBlbnNhdG9yCiAgICAvLyAgICAgbGV0IGlzQ29tcGVuc2F0b3I6IEJvb2wgPSBmYWxzZTsKICAgIC8vICAgICBsZXQgaXNDb21wZW5zYXRvck9wdDogQm9vbD8gPSBzZWxmLmNvbXBlbnNhdG9ycy5nZXQoc2VuZGVyKCkpOwogICAgLy8gICAgIGlmIChpc0NvbXBlbnNhdG9yT3B0ICE9IG51bGwpIHsKICAgIC8vICAgICAgICAgaXNDb21wZW5zYXRvciA9IGlzQ29tcGVuc2F0b3JPcHQhITsKICAgIC8vICAgICB9CiAgICAvLyAgICAgcmVxdWlyZShpc0NvbXBlbnNhdG9yLCAibm90IGNvbXBlbnNhdG9yIik7CiAgICAgICAgCiAgICAvLyAgICAgLy8gY2hlY2sgb3JkZXIgcGVuZGluZwogICAgLy8gICAgIGxldCBvcmRlck9wdDogTFBQb3NpdGlvbk9yZGVyPyA9IHNlbGYubHBQb3NpdGlvbk9yZGVycy5nZXQobXNnLm9yZGVySWQpOwogICAgLy8gICAgIHJlcXVpcmUob3JkZXJPcHQgIT0gbnVsbCwgIm9yZGVyIG5vdCBleGlzdCIpOwogICAgLy8gICAgIGxldCBvcmRlcjogTFBQb3NpdGlvbk9yZGVyID0gb3JkZXJPcHQhITsKCiAgICAvLyAgICAgLy8gY2hlY2sgZ2FzCiAgICAvLyAgICAgaWYgKG9yZGVyLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFKSB7CiAgICAvLyAgICAgICAgIHJlcXVpcmUoY3R4LnZhbHVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICogMyArIHNlbGYuZ2FzQ29uc3VtcHRpb24gKiAyICsgc2VsZi5taW5Ub25zRm9yU3RvcmFnZSArIHNlbGYuZ2V0UG9vbEdhcygpLCAiZ2FzIG5vdCBlbm91Z2giKTsKICAgIC8vICAgICB9IGVsc2UgewogICAgLy8gICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDYgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICogMyArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UgKyBzZWxmLmdldFBvb2xHYXMoKSArIHRvbigiMC4wMzIiKSwgImdhcyBub3QgZW5vdWdoIik7CiAgICAvLyAgICAgfQoKICAgIC8vICAgICByZXF1aXJlKG9yZGVyLmlzUGVuZGluZywgIm9yZGVyIG5vdCBwZW5kaW5nIik7CgogICAgLy8gICAgIC8vIHJlZnVuZAogICAgLy8gICAgIGlmIChtc2cubmVlZFJlZnVuZCkgewogICAgLy8gICAgICAgICAvLyBpbmNyZWFzZSBwb3NpdGlvbiBmYWlsZWQsIGNhbmNlbCBvcmRlcgogICAgLy8gICAgICAgICAvLyByZWZ1bmQgamV0dG9uIGZhaWxlZAogICAgLy8gICAgICAgICAvLyBnZXQgY2FsbGJhY2sKICAgIC8vICAgICAgICAgcmVxdWlyZShvcmRlci5jYWxsYmFja0lkICE9IG51bGwsICJqZXR0b24gY2FsbGJhY2sgbm90IGV4aXN0Iik7CiAgICAvLyAgICAgICAgIGxldCBjYWxsYmFja0lkOiBJbnQgPSBvcmRlci5jYWxsYmFja0lkISE7CiAgICAvLyAgICAgICAgIGxldCBqZXR0b25DYWxsYmFja09wdDogSmV0dG9uQ2FsbGJhY2s/ID0gc2VsZi5qZXR0b25DYWxsYmFja3MuZ2V0KGNhbGxiYWNrSWQpOwogICAgLy8gICAgICAgICBpZiAoamV0dG9uQ2FsbGJhY2tPcHQgPT0gbnVsbCkgewogICAgLy8gICAgICAgICAgICAgcmV0dXJuOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICAgIGxldCBqZXR0b25DYWxsYmFjazogSmV0dG9uQ2FsbGJhY2sgPSBqZXR0b25DYWxsYmFja09wdCEhOwogICAgLy8gICAgICAgICAvLyB1cGRhdGUgdHJ4SWQKICAgIC8vICAgICAgICAgamV0dG9uQ2FsbGJhY2sudHJ4SWQgPSBtc2cudHJ4SWQ7CiAgICAvLyAgICAgICAgIHNlbGYuamV0dG9uQ2FsbGJhY2tzLnNldChjYWxsYmFja0lkLCBqZXR0b25DYWxsYmFjayk7CgogICAgLy8gICAgICAgICAvLyB1cGRhdGUgZXhlY3V0aW9uIGZlZSByZWNlaXZlcgogICAgLy8gICAgICAgICBpZiAobXNnLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwpIHsKICAgIC8vICAgICAgICAgICAgIG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyID0gbXNnLmV4ZWN1dGlvbkZlZVJlY2VpdmVyISE7CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgICAgb3JkZXIubGFzdE9wZXJhdG9yID0gc2VuZGVyKCk7CiAgICAvLyAgICAgICAgIHNlbGYubHBQb3NpdGlvbk9yZGVycy5zZXQobXNnLm9yZGVySWQsIG9yZGVyKTsKCiAgICAvLyAgICAgICAgIC8vIHRyYW5zZmVyIGpldHRvbgogICAgLy8gICAgICAgICBzZWxmLnJlZnVuZEpldHRvbihjYWxsYmFja0lkLCBqZXR0b25DYWxsYmFjay5hbW91bnQsIGpldHRvbkNhbGxiYWNrLnJlY2VpdmVyLCBteUFkZHJlc3MoKSk7CiAgICAvLyAgICAgICAgIHJldHVybjsKICAgIC8vICAgICB9CgogICAgLy8gICAgIGlmIChtc2cuaXNFeGVjdXRlKSB7CiAgICAvLyAgICAgICAgIC8vIGRlbGV0ZSBvcmRlcgogICAgLy8gICAgICAgICBzZWxmLmxwUG9zaXRpb25PcmRlcnMuc2V0KG1zZy5vcmRlcklkLCBudWxsKTsKICAgIC8vICAgICAgICAgLy8gZXZlbnQKICAgIC8vICAgICAgICAgZW1pdChMUFBvc2l0aW9uT3JkZXJFeGVjdXRlZEV2ZW50ewogICAgLy8gICAgICAgICAgICAgb3BUeXBlOiBvcmRlci5vcFR5cGUsCiAgICAvLyAgICAgICAgICAgICBvcmRlcklkOiBtc2cub3JkZXJJZCwKICAgIC8vICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQKICAgIC8vICAgICAgICAgfS50b0NlbGwoKSk7CiAgICAvLyAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgICAgaWYgKG9yZGVyLmNhbGxiYWNrSWQgIT0gbnVsbCkgewogICAgLy8gICAgICAgICAgICAgLy8gZGVsZXRlIGNhbGxiYWNrCiAgICAvLyAgICAgICAgICAgICBzZWxmLmpldHRvbkNhbGxiYWNrcy5zZXQob3JkZXIuY2FsbGJhY2tJZCEhLCBudWxsKTsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgICAvLyBkZWxldGUgb3JkZXIKICAgIC8vICAgICAgICAgc2VsZi5scFBvc2l0aW9uT3JkZXJzLnNldChtc2cub3JkZXJJZCwgbnVsbCk7CiAgICAvLyAgICAgICAgIC8vIGV2ZW50CiAgICAvLyAgICAgICAgIGVtaXQoTFBQb3NpdGlvbk9yZGVyQ2FuY2VsbGVkRXZlbnR7CiAgICAvLyAgICAgICAgICAgICBvcFR5cGU6IG9yZGVyLm9wVHlwZSwKICAgIC8vICAgICAgICAgICAgIG9yZGVySWQ6IG1zZy5vcmRlcklkLAogICAgLy8gICAgICAgICAgICAgdHJ4SWQ6IG1zZy50cnhJZAogICAgLy8gICAgICAgICB9LnRvQ2VsbCgpKTsKICAgIC8vICAgICB9CgogICAgLy8gICAgIC8vIHRyYW5zZmVyIGV4ZWN1dGlvbiBmZWUKICAgIC8vICAgICBpZiAob3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgIT0gbnVsbCAmJiBvcmRlci5leGVjdXRpb25GZWUgIT0gMCkgewogICAgLy8gICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgLy8gICAgICAgICAgICAgdG86IG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyISEsCiAgICAvLyAgICAgICAgICAgICBib3VuY2U6IHRydWUsCiAgICAvLyAgICAgICAgICAgICB2YWx1ZTogb3JkZXIuZXhlY3V0aW9uRmVlLAogICAgLy8gICAgICAgICAgICAgbW9kZTogU2VuZFBheUdhc1NlcGFyYXRlbHkKICAgIC8vICAgICAgICAgfSk7CiAgICAvLyAgICAgfQoKICAgIC8vICAgICAvLyB0cmFuc2ZlciBleGVjZXNzIGdhcwogICAgLy8gICAgIHNlbGYucmVmdW5kRXhlY2Vzc1RvbihzZW5kZXIoKSwgb3JkZXIuZXhlY3V0aW9uRmVlKTsKICAgIC8vICAgICByZXR1cm47CiAgICAvLyB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBHZXR0ZXIgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIGdldCBmdW4gbHBQb3NpdGlvbk9yZGVyKG9yZGVySWQ6IEludCk6IExQUG9zaXRpb25PcmRlcj8gewogICAgICAgIHJldHVybiBzZWxmLmxwUG9zaXRpb25PcmRlcnMuZ2V0KG9yZGVySWQpOwogICAgfQoKICAgIGdldCBmdW4gbHBQb3NpdGlvbk9yZGVySW5kZXhOZXh0KCk6IEludCB7CiAgICAgICAgcmV0dXJuIHNlbGYubHBQb3NpdGlvbk9yZGVySW5kZXhOZXh0OwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gUGVycCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBDcmVhdGUgSW5jcmVhc2UgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIGZ1biBoYW5kbGVDcmVhdGVJbmNyZWFzZVBlcnBQb3NpdGlvbk9yZGVyKHF1ZXJ5SWQ6IEludCwgamV0dG9uRnJvbUFtb3VudDogSW50LCBhY2NvdW50OiBBZGRyZXNzLCBleGVjdXRpb25GZWU6IEludCwgaXNNYXJrZXQ6IEJvb2wsCiAgICAgICAgdG9rZW5JZDogSW50LCBpc0xvbmc6IEJvb2wsIG1hcmdpbkRlbHRhOiBJbnQsIHNpemVEZWx0YTogSW50LCB0cmlnZ2VyUHJpY2U6IEludCwgdHBTaXplOiBJbnQsIHRwUHJpY2U6IEludCwgc2xTaXplOiBJbnQsIHNsUHJpY2U6IEludCkgewogICAgICAgIGR1bXAoImhhbmRsZUNyZWF0ZUluY3JlYXNlUGVycFBvc2l0aW9uT3JkZXIiKTsKICAgICAgICBsZXQgY3R4OiBDb250ZXh0ID0gY29udGV4dCgpOwoKICAgICAgICBpZiAoY3R4LnZhbHVlIDwgZXhlY3V0aW9uRmVlICsgY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiAyICsgc2VsZi5nYXNDb25zdW1wdGlvbiArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UpIHsKICAgICAgICAgICAgZHVtcCgiZ2FzIG5vdCBlbm91Z2giKTsKICAgICAgICAgICAgc2VsZi5yZWZ1bmRKZXR0b24ocXVlcnlJZCwgamV0dG9uRnJvbUFtb3VudCwgYWNjb3VudCwgYWNjb3VudCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChqZXR0b25Gcm9tQW1vdW50IDwgbWFyZ2luRGVsdGEpIHsKICAgICAgICAgICAgc2VsZi5yZWZ1bmRKZXR0b24ocXVlcnlJZCwgamV0dG9uRnJvbUFtb3VudCwgYWNjb3VudCwgYWNjb3VudCk7CiAgICAgICAgICAgIGR1bXAoInJlZnVuZCBmcm9tIG5vdCBlbm91Z2ggbWFyZ2luIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChleGVjdXRpb25GZWUgPCBzZWxmLm1pbkV4ZWN1dGlvbkZlZSkgewogICAgICAgICAgICBzZWxmLnJlZnVuZEpldHRvbihxdWVyeUlkLCBqZXR0b25Gcm9tQW1vdW50LCBhY2NvdW50LCBhY2NvdW50KTsKICAgICAgICAgICAgZHVtcCgiZXhlY3V0aW9uIGZlZSBub3QgZW5vdWdoIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vIGFkZCBuZXcgb3JkZXIKICAgICAgICBsZXQgb3BUeXBlOiBJbnQgPSAwOwogICAgICAgIGlmIChpc01hcmtldCkgewogICAgICAgICAgICBvcFR5cGUgPSBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFX01BUktFVDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBvcFR5cGUgPSBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFX0xJTUlUOwogICAgICAgIH0KICAgICAgICBzZWxmLmNyZWF0ZVBlcnBPcmRlcihvcFR5cGUsIGFjY291bnQsIHRva2VuSWQsIGlzTG9uZywgbWFyZ2luRGVsdGEsIHNpemVEZWx0YSwgdHJpZ2dlclByaWNlLCAKICAgICAgICAgICAgdHBTaXplLCB0cFByaWNlLCBzbFNpemUsIHNsUHJpY2UsIGV4ZWN1dGlvbkZlZSk7CgogICAgICAgIHNlbGYucmVmdW5kRXhlY2Vzc1RvbihhY2NvdW50LCBleGVjdXRpb25GZWUpOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQ3JlYXRlIERlY3JlYXNlID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCiAgICByZWNlaXZlKG1zZzogQ3JlYXRlRGVjcmVhc2VQZXJwUG9zaXRpb25PcmRlcikgewogICAgICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CiAgICAgICAgLy8gY2hlY2sgZ2FzCiAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgLSBtc2cuZXhlY3V0aW9uRmVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICogMiArIHNlbGYuZ2FzQ29uc3VtcHRpb24gKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlLCAiZ2FzIG5vdCBlbm91Z2giKTsKICAgICAgICAvLyBjaGVjayBleGVjdXRpb24gZmVlIFRPRE8gdHAvc2wKICAgICAgICByZXF1aXJlKG1zZy5leGVjdXRpb25GZWUgPj0gc2VsZi5taW5FeGVjdXRpb25GZWUsICJleGVjdXRpb24gZmVlIG5vdCBlbm91Z2giKTsKCiAgICAgICAgLy8gYWRkIG5ldyBvcmRlcgogICAgICAgIHNlbGYuY3JlYXRlUGVycE9yZGVyKG1zZy5vcFR5cGUsIHNlbmRlcigpLCBtc2cudG9rZW5JZCwgbXNnLmlzTG9uZywgbXNnLm1hcmdpbkRlbHRhLCBtc2cuc2l6ZURlbHRhLCBtc2cudHJpZ2dlclByaWNlLCAKICAgICAgICAgICAgICAgIDAsIDAsIDAsIDAsIG1zZy5leGVjdXRpb25GZWUpOwoKICAgICAgICAvLyB0cmFuc2ZlciBleGVjZXNzIGdhcwogICAgICAgIHNlbGYucmVmdW5kRXhlY2Vzc1RvbihzZW5kZXIoKSwgbXNnLmV4ZWN1dGlvbkZlZSk7CiAgICB9CgogICAgZnVuIGNyZWF0ZVBlcnBPcmRlcihvcFR5cGU6IEludCwgYWNjb3VudDogQWRkcmVzcywgdG9rZW5JZDogSW50LCBpc0xvbmc6IEJvb2wsIG1hcmdpbkRlbHRhOiBJbnQsIHNpemVEZWx0YTogSW50LCB0cmlnZ2VyUHJpY2U6IEludCwgCiAgICAgICAgdHBTaXplOiBJbnQsIHRwUHJpY2U6IEludCwgc2xTaXplOiBJbnQsIHNsUHJpY2U6IEludCwgZXhlY3V0aW9uRmVlOiBJbnQpOiBJbnQgewogICAgICAgIGxldCB0cmlnZ2VyQWJvdmU6IEJvb2wgPSBmYWxzZTsKCiAgICAgICAgbGV0IG9yZGVySWQ6IEludCA9IHNlbGYucGVycFBvc2l0aW9uT3JkZXJJbmRleE5leHQ7CiAgICAgICAgc2VsZi5wZXJwUG9zaXRpb25PcmRlckluZGV4TmV4dCA9IG9yZGVySWQgKyAxOwoKICAgICAgICBpZiAob3BUeXBlID09IE9SREVSX09QX1RZUEVfSU5DUkVBU0VfTUFSS0VUIHx8IG9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFX0xJTUlUKSB7CiAgICAgICAgICAgIC8vIGluY3JlYXNlIGZvciBsb25nIG9yZGVyLCBtdXN0IHRyaWdnZXIgYmVsb3cgdGhlIHByaWNlCiAgICAgICAgICAgIHRyaWdnZXJBYm92ZSA9ICFpc0xvbmc7CiAgICAgICAgICAgIHNlbGYucGVycFBvc2l0aW9uT3JkZXJFeHMuc2V0KG9yZGVySWQsIFBlcnBQb3NpdGlvbk9yZGVyRXh7CiAgICAgICAgICAgICAgICB0cFNpemU6IHRwU2l6ZSwKICAgICAgICAgICAgICAgIHRwUHJpY2U6IHRwUHJpY2UsCiAgICAgICAgICAgICAgICBzbFNpemU6IHNsU2l6ZSwKICAgICAgICAgICAgICAgIHNsUHJpY2U6IHNsUHJpY2UKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKG9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0RFQ1JFQVNFX01BUktFVCkgewogICAgICAgICAgICAgICAgLy8gZGVjcmVhc2UgZm9yIGxvbmcgbWFya2V0IG9yZGVyLCBtdXN0IHRyaWdnZXIgYWJvdmUgdGhlIHByaWNlCiAgICAgICAgICAgICAgICB0cmlnZ2VyQWJvdmUgPSBpc0xvbmc7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAob3BUeXBlID09IE9SREVSX09QX1RZUEVfREVDUkVBU0VfVFApIHsKICAgICAgICAgICAgICAgICAgICAvLyB0cCBmb3IgbG9uZyBsaW1pdCBvcmRlciwgbXVzdCB0cmlnZ2VyIGFib3ZlIHRoZSBwcmljZQogICAgICAgICAgICAgICAgICAgIHRyaWdnZXJBYm92ZSA9IGlzTG9uZzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlckFib3ZlID0gIWlzTG9uZzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgc2VsZi5wZXJwUG9zaXRpb25PcmRlcnMuc2V0KG9yZGVySWQsIFBlcnBQb3NpdGlvbk9yZGVyewogICAgICAgICAgICBvcFR5cGU6IG9wVHlwZSwKICAgICAgICAgICAgdG9rZW5JZDogdG9rZW5JZCwKICAgICAgICAgICAgYWNjb3VudDogYWNjb3VudCwKICAgICAgICAgICAgaXNMb25nOiBpc0xvbmcsCiAgICAgICAgICAgIG1hcmdpbkRlbHRhOiBtYXJnaW5EZWx0YSwKICAgICAgICAgICAgc2l6ZURlbHRhOiBzaXplRGVsdGEsCiAgICAgICAgICAgIHRyaWdnZXJQcmljZTogdHJpZ2dlclByaWNlLAogICAgICAgICAgICB0cmlnZ2VyQWJvdmU6IHRyaWdnZXJBYm92ZSwKICAgICAgICAgICAgZXhlY3V0aW9uRmVlOiBleGVjdXRpb25GZWUsCiAgICAgICAgICAgIGJsb2NrVGltZTogbm93KCksCiAgICAgICAgICAgIGlzUGVuZGluZzogZmFsc2UsCiAgICAgICAgICAgIGNhbGxiYWNrSWQ6IG51bGwsCiAgICAgICAgICAgIGV4ZWN1dGlvbkZlZVJlY2VpdmVyOiBudWxsLAogICAgICAgICAgICBsYXN0T3BlcmF0b3I6IG51bGwKICAgICAgICB9KTsKICAgICAgICAvLyBldmVudAogICAgICAgIGVtaXQoUGVycFBvc2l0aW9uT3JkZXJDcmVhdGVkRXZlbnR7CiAgICAgICAgICAgIG9wVHlwZTogb3BUeXBlLAogICAgICAgICAgICB0b2tlbklkOiB0b2tlbklkLAogICAgICAgICAgICBhY2NvdW50OiBhY2NvdW50LAogICAgICAgICAgICBpc0xvbmc6IGlzTG9uZywKICAgICAgICAgICAgbWFyZ2luRGVsdGE6IG1hcmdpbkRlbHRhLAogICAgICAgICAgICBzaXplRGVsdGE6IHNpemVEZWx0YSwKICAgICAgICAgICAgZXhlY3V0aW9uRmVlOiBleGVjdXRpb25GZWUsCiAgICAgICAgICAgIG9yZGVySWQ6IG9yZGVySWQsCiAgICAgICAgICAgIHRyaWdnZXJQcmljZTogdHJpZ2dlclByaWNlLAogICAgICAgICAgICB0cmlnZ2VyQWJvdmU6IHRyaWdnZXJBYm92ZSwKICAgICAgICAgICAgdHBTaXplOiB0cFNpemUsCiAgICAgICAgICAgIHRwUHJpY2U6IHRwUHJpY2UsCiAgICAgICAgICAgIHNsU2l6ZTogc2xTaXplLAogICAgICAgICAgICBzbFByaWNlOiBzbFByaWNlCiAgICAgICAgfS50b0NlbGwoKSk7CiAgICAgICAgcmV0dXJuIG9yZGVySWQ7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBDYW5jZWwgSW5jcmVhc2UgLyBEZWNyZWFzZSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgLy8gY2FuY2VsIGluY3JlYXNlID0+IG9yZGVyQm9vayB3YWxsZXQgPT4gdXNlciB3YWxsZXQgPT4gdG9rZW4gZXhjZXNzIGhhbmRlbCBjYW5jZWwgPT4gZXhjZXNzIGdhcwogICAgLy8gY2FuY2VsIGRlY3JlYXNlID0+IGV4Y2VzcyBnYXMKICAgIHJlY2VpdmUobXNnOiBDYW5jZWxQZXJwUG9zaXRpb25PcmRlcikgewogICAgICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CiAgICAgICAgLy8gY2hlY2sgb3JkZXIKICAgICAgICBsZXQgb3JkZXJPcHQ6IFBlcnBQb3NpdGlvbk9yZGVyPyA9IHNlbGYucGVycFBvc2l0aW9uT3JkZXJzLmdldChtc2cub3JkZXJJZCk7CiAgICAgICAgcmVxdWlyZShvcmRlck9wdCAhPSBudWxsLCAib3JkZXIgbm90IGV4aXN0Iik7CiAgICAgICAgbGV0IG9yZGVyOiBQZXJwUG9zaXRpb25PcmRlciA9IG9yZGVyT3B0ISE7CgogICAgICAgIC8vIGNoZWNrIGdhcwogICAgICAgIGlmIChvcmRlci5vcFR5cGUgPT0gT1JERVJfT1BfVFlQRV9JTkNSRUFTRSkgewogICAgICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDQgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICogMiArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UgKyB0b24oIjAuMDMyIiksICJnYXMgbm90IGVub3VnaCIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlcXVpcmUoY3R4LnZhbHVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICogMiArIHNlbGYuZ2FzQ29uc3VtcHRpb24gKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlLCAiZ2FzIG5vdCBlbm91Z2giKTsKICAgICAgICB9CgogICAgICAgIHNlbGYuc2hvdWxkQ2FuY2VsKG9yZGVyLmJsb2NrVGltZSwgc2VuZGVyKCksIG9yZGVyLmlzUGVuZGluZyk7CgogICAgICAgIGlmIChvcmRlci5vcFR5cGUgPT0gT1JERVJfT1BfVFlQRV9JTkNSRUFTRSkgewogICAgICAgICAgICAvLyBhZGQgY2FsbGJhY2sKICAgICAgICAgICAgbGV0IGNhbGxiYWNrSWQ6IEludCA9IHNlbGYuamV0dG9uQ2FsbGJhY2tRdWVyeUlkTmV4dDsKICAgICAgICAgICAgc2VsZi5qZXR0b25DYWxsYmFja1F1ZXJ5SWROZXh0ID0gY2FsbGJhY2tJZCArIDE7CiAgICAgICAgICAgIHNlbGYuamV0dG9uQ2FsbGJhY2tzLnNldChjYWxsYmFja0lkLCBKZXR0b25DYWxsYmFja3sKICAgICAgICAgICAgICAgIG9yZGVyVHlwZTogT1JERVJfVFlQRV9QRVJQLAogICAgICAgICAgICAgICAgb3JkZXJJZDogbXNnLm9yZGVySWQsCiAgICAgICAgICAgICAgICBhbW91bnQ6IG9yZGVyLm1hcmdpbkRlbHRhLAogICAgICAgICAgICAgICAgcmVjZWl2ZXI6IG9yZGVyLmFjY291bnQsCiAgICAgICAgICAgICAgICB0cnhJZDogbXNnLnRyeElkCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gdXBkYXRlIG9yZGVyCiAgICAgICAgICAgIGlmIChtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgb3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgPSBtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIhITsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyID0gc2VuZGVyKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb3JkZXIubGFzdE9wZXJhdG9yID0gc2VuZGVyKCk7CiAgICAgICAgICAgIG9yZGVyLmlzUGVuZGluZyA9IHRydWU7CiAgICAgICAgICAgIG9yZGVyLmNhbGxiYWNrSWQgPSBjYWxsYmFja0lkOwogICAgICAgICAgICBzZWxmLnBlcnBQb3NpdGlvbk9yZGVycy5zZXQobXNnLm9yZGVySWQsIG9yZGVyKTsKCiAgICAgICAgICAgIC8vIHRyYW5zZmVyIGpldHRvbgogICAgICAgICAgICBzZWxmLnJlZnVuZEpldHRvbihjYWxsYmFja0lkLCBvcmRlci5tYXJnaW5EZWx0YSwgb3JkZXIuYWNjb3VudCwgbXlBZGRyZXNzKCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGdldCBmZWUgcmVjZWl2ZXIKICAgICAgICAgICAgbGV0IGV4ZWN1dGlvbkZlZVJlY2VpdmVyOiBBZGRyZXNzID0gc2VuZGVyKCk7CiAgICAgICAgICAgIGlmIChtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXIgPSBtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIhITsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gZGVsZXRlIG9yZGVyCiAgICAgICAgICAgIHNlbGYucGVycFBvc2l0aW9uT3JkZXJzLnNldChtc2cub3JkZXJJZCwgbnVsbCk7CiAgICAgICAgICAgIC8vIGV2ZW50CiAgICAgICAgICAgIGVtaXQoUGVycFBvc2l0aW9uT3JkZXJDYW5jZWxsZWRFdmVudHsKICAgICAgICAgICAgICAgIG9wVHlwZTogb3JkZXIub3BUeXBlLAogICAgICAgICAgICAgICAgb3JkZXJJZDogbXNnLm9yZGVySWQsCiAgICAgICAgICAgICAgICB0cnhJZDogbXNnLnRyeElkCiAgICAgICAgICAgIH0udG9DZWxsKCkpOwoKICAgICAgICAgICAgLy8gdHJhbnNmZXIgZXhlY3V0aW9uIGZlZQogICAgICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgICAgICAgICAgdG86IGV4ZWN1dGlvbkZlZVJlY2VpdmVyLAogICAgICAgICAgICAgICAgYm91bmNlOiB0cnVlLAogICAgICAgICAgICAgICAgdmFsdWU6IG9yZGVyLmV4ZWN1dGlvbkZlZSwKICAgICAgICAgICAgICAgIG1vZGU6IFNlbmRQYXlHYXNTZXBhcmF0ZWx5CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gdHJhbnNmZXIgZXhlY2VzcyBnYXMKICAgICAgICAgICAgc2VsZi5yZWZ1bmRFeGVjZXNzVG9uKHNlbmRlcigpLCAwKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBFeGVjdXRlIEluY3JlYXNlIC8gRGVjcmVhc2UgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIC8vIGV4ZWN1dGUgaW5jcmVhc2UgPT4gaW5jcmVhc2UgcG9zaXRpb24gZm9yIHBvb2wgPT4gaW5jcmVhc2Ugc3VjY2VzcyAvIGJvdW5jZWQgPT4gZXhjZXNzIGdhcwogICAgLy8gZXhlY3V0ZSBkZWNyZWFzZSA9PiBkZWNyZWFzZSBwb3NpdGlvbiBmb3IgcG9vbCA9PiBkZWNyZWFzZSBzdWNjZXNzID0+IG9yZGVyQm9vayB3YWxsZXQgPT4gdXNlciB3YWxsZXQgPT4gdG9rZW4gZXhjZXNzZXMgaGFuZGVsIGNhbmNlbCA9PiBleGNlc3MgZ2FzCiAgICByZWNlaXZlKG1zZzogRXhlY3V0ZVBlcnBQb3NpdGlvbk9yZGVyKSB7CiAgICAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKCiAgICAgICAgLy8gY2hlY2sgb3JkZXIKICAgICAgICBsZXQgb3JkZXJPcHQ6IFBlcnBQb3NpdGlvbk9yZGVyPyA9IHNlbGYucGVycFBvc2l0aW9uT3JkZXJzLmdldChtc2cub3JkZXJJZCk7CiAgICAgICAgcmVxdWlyZShvcmRlck9wdCAhPSBudWxsLCAib3JkZXIgbm90IGV4aXN0Iik7CgogICAgICAgIGxldCBvcmRlcjogUGVycFBvc2l0aW9uT3JkZXIgPSBvcmRlck9wdCEhOwoKICAgICAgICAvLyBjaGVjayBnYXMKICAgICAgICBpZiAob3JkZXIub3BUeXBlID09IE9SREVSX09QX1RZUEVfSU5DUkVBU0UpIHsKICAgICAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiAzICsgc2VsZi5nYXNDb25zdW1wdGlvbiAqIDIgKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlICsgc2VsZi5nZXRQb29sR2FzKCksICJnYXMgbm90IGVub3VnaCIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlcXVpcmUoY3R4LnZhbHVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICogNiArIHNlbGYuZ2FzQ29uc3VtcHRpb24gKiAzICsgc2VsZi5taW5Ub25zRm9yU3RvcmFnZSArIHNlbGYuZ2V0UG9vbEdhcygpICsgdG9uKCIwLjAzMiIpLCAiZ2FzIG5vdCBlbm91Z2giKTsKICAgICAgICB9CgogICAgICAgIHNlbGYuc2hvdWxkRXhlY3V0ZShvcmRlci5ibG9ja1RpbWUsIG9yZGVyLmlzUGVuZGluZyk7CgogICAgICAgIC8vIHVwZGF0ZSBvcmRlcgogICAgICAgIGlmIChtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgIT0gbnVsbCkgewogICAgICAgICAgICBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciA9IG1zZy5leGVjdXRpb25GZWVSZWNlaXZlciEhOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyID0gc2VuZGVyKCk7CiAgICAgICAgfQogICAgICAgIG9yZGVyLmlzUGVuZGluZyA9IHRydWU7CiAgICAgICAgc2VsZi5wZXJwUG9zaXRpb25PcmRlcnMuc2V0KG1zZy5vcmRlcklkLCBvcmRlcik7CgogICAgICAgIC8vIHNlbmQgdXBkYXRlIHBvc2l0aW9uIG1zZwogICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgIHRvOiBzZWxmLnBvb2wsCiAgICAgICAgICAgIHZhbHVlOiAwLAogICAgICAgICAgICBtb2RlOiBTZW5kUmVtYWluaW5nVmFsdWUsCiAgICAgICAgICAgIGJvdW5jZTogdHJ1ZSwKICAgICAgICAgICAgYm9keTogVXBkYXRlUGVycFBvc2l0aW9uIHsKICAgICAgICAgICAgICAgIG9yZGVySWQ6IG1zZy5vcmRlcklkLAogICAgICAgICAgICAgICAgb3BUeXBlOiBvcmRlci5vcFR5cGUsCiAgICAgICAgICAgICAgICB0cnhJZDogbXNnLnRyeElkLAogICAgICAgICAgICAgICAgYWNjb3VudDogb3JkZXIuYWNjb3VudCwKICAgICAgICAgICAgICAgIG1hcmdpbkRlbHRhOiBvcmRlci5tYXJnaW5EZWx0YSwKICAgICAgICAgICAgICAgIHNpemVEZWx0YTogb3JkZXIuc2l6ZURlbHRhLAogICAgICAgICAgICAgICAgdHJpZ2dlclByaWNlOiBvcmRlci50cmlnZ2VyUHJpY2UsCiAgICAgICAgICAgICAgICB0cmlnZ2VyQWJvdmU6IG9yZGVyLnRyaWdnZXJBYm92ZSwKICAgICAgICAgICAgICAgIHByaWNlc0xlbmd0aDogbXNnLnByaWNlc0xlbmd0aCwKICAgICAgICAgICAgICAgIHByaWNlczogbXNnLnByaWNlcwogICAgICAgICAgICB9LnRvQ2VsbCgpCiAgICAgICAgfSk7CiAgICAgICAgZHVtcCgiZXhlY3V0ZSBQZXJwIGluY3JlYXNlIG9yZGVyIHNlbmQgbXNnIHRvIHBvb2wiKTsKICAgIH0KCiAgICAvLyBpbmNyZWFzZSBzdWNjZXNzIC8gYm91bmNlZCA9PiBleGNlc3MgZ2FzCiAgICAvLyBkZWNyZWFzZSBzdWNjZXNzID0+IG9yZGVyQm9vayB3YWxsZXQgPT4gdXNlciB3YWxsZXQgPT4gdG9rZW4gZXhjZXNzZXMgaGFuZGVsIGNhbmNlbCA9PiBleGNlc3MgZ2FzCiAgICByZWNlaXZlKG1zZzogVXBkYXRlUGVycFBvc2l0aW9uU3VjY2VzcykgewogICAgICAgIGR1bXAoInJlY2VpdmUgdXBkYXRlIFBlcnAgcG9zaXRpb24gc3VjY2VzcyIpOwogICAgICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CiAgICAgICAgcmVxdWlyZShzZW5kZXIoKSA9PSBzZWxmLnBvb2wsICJpbnZhbGlkIHNlbmRlciIpOwoKICAgICAgICAvLyBnZXQgb3JkZXIKICAgICAgICBsZXQgb3JkZXJPcHQ6IFBlcnBQb3NpdGlvbk9yZGVyPyA9IHNlbGYucGVycFBvc2l0aW9uT3JkZXJzLmdldChtc2cub3JkZXJJZCk7CiAgICAgICAgaWYgKG9yZGVyT3B0ID09IG51bGwpIHsKICAgICAgICAgICAgZHVtcCgib3JkZXIgbm90IGV4aXN0Iik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbGV0IG9yZGVyOiBQZXJwUG9zaXRpb25PcmRlciA9IG9yZGVyT3B0ISE7CgogICAgICAgIC8vIGNoZWNrIGdhcwogICAgICAgIGlmIChvcmRlci5vcFR5cGUgPT0gT1JERVJfT1BfVFlQRV9JTkNSRUFTRV9NQVJLRVQgfHwgb3JkZXIub3BUeXBlID09IE9SREVSX09QX1RZUEVfSU5DUkVBU0VfTElNSVQpIHsKICAgICAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiAyICsgc2VsZi5nYXNDb25zdW1wdGlvbiwgImdhcyBub3QgZW5vdWdoIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiA0ICsgc2VsZi5nYXNDb25zdW1wdGlvbiAqIDIgKyB0b24oIjAuMDMyIiksICJnYXMgbm90IGVub3VnaCIpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG9yZGVyLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFX01BUktFVCB8fCBvcmRlci5vcFR5cGUgPT0gT1JERVJfT1BfVFlQRV9JTkNSRUFTRV9MSU1JVCkgewogICAgICAgICAgICBsZXQgb3JkZXJFeE9wdDogUGVycFBvc2l0aW9uT3JkZXJFeD8gPSBzZWxmLnBlcnBQb3NpdGlvbk9yZGVyRXhzLmdldChtc2cub3JkZXJJZCk7CiAgICAgICAgICAgIGlmIChvcmRlckV4T3B0ICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGxldCBvcmRlckV4OiBQZXJwUG9zaXRpb25PcmRlckV4ID0gb3JkZXJFeE9wdCEhOwoKICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSB0cC9zbAogICAgICAgICAgICAgICAgaWYgKG9yZGVyRXgudHBTaXplID4gMCAmJiBvcmRlckV4LnRwUHJpY2UgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5jcmVhdGVQZXJwT3JkZXIoT1JERVJfT1BfVFlQRV9ERUNSRUFTRV9UUCwgc2VuZGVyKCksIG9yZGVyLnRva2VuSWQsIG9yZGVyLmlzTG9uZywgMCwgb3JkZXJFeC50cFNpemUsIG9yZGVyRXgudHBQcmljZSwgCiAgICAgICAgICAgICAgICAgICAgICAgIDAsIDAsIDAsIDAsIDApOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChvcmRlckV4LnNsU2l6ZSA+IDAgJiYgb3JkZXJFeC5zbFByaWNlID4gMCkgewogICAgICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlUGVycE9yZGVyKE9SREVSX09QX1RZUEVfREVDUkVBU0VfU0wsIHNlbmRlcigpLCBvcmRlci50b2tlbklkLCBvcmRlci5pc0xvbmcsIDAsIG9yZGVyRXguc2xTaXplLCBvcmRlckV4LnNsUHJpY2UsIAogICAgICAgICAgICAgICAgICAgICAgICAwLCAwLCAwLCAwLCAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gZGVsZXRlIG9yZGVyCiAgICAgICAgICAgIHNlbGYucGVycFBvc2l0aW9uT3JkZXJzLnNldChtc2cub3JkZXJJZCwgbnVsbCk7CiAgICAgICAgICAgIC8vIGV2ZW50CiAgICAgICAgICAgIGVtaXQoUGVycFBvc2l0aW9uT3JkZXJFeGVjdXRlZEV2ZW50ewogICAgICAgICAgICAgICAgb3BUeXBlOiBvcmRlci5vcFR5cGUsCiAgICAgICAgICAgICAgICBvcmRlcklkOiBtc2cub3JkZXJJZCwKICAgICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQKICAgICAgICAgICAgfS50b0NlbGwoKSk7CgogICAgICAgICAgICAvLyB0cmFuc2ZlciBleGVjdXRpb24gZmVlCiAgICAgICAgICAgIGlmIChvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgICAgICAgICAgICAgIHRvOiBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciEhLAogICAgICAgICAgICAgICAgICAgIGJvdW5jZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb3JkZXIuZXhlY3V0aW9uRmVlLAogICAgICAgICAgICAgICAgICAgIG1vZGU6IFNlbmRQYXlHYXNTZXBhcmF0ZWx5CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gdHJhbnNmZXIgZXhlY2VzcyBnYXMKICAgICAgICAgICAgaWYgKG9yZGVyLmxhc3RPcGVyYXRvciAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBzZWxmLnJlZnVuZEV4ZWNlc3NUb24ob3JkZXIubGFzdE9wZXJhdG9yISEsIDApOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGV0IHJlY2VpdmVyOiBBZGRyZXNzID0gb3JkZXIuYWNjb3VudDsKICAgICAgICAgICAgaWYgKG9yZGVyLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0xJUVVJREFUSU9OKSB7CiAgICAgICAgICAgICAgICByZWNlaXZlciA9IG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyISE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gYWRkIGNhbGxiYWNrCiAgICAgICAgICAgIGxldCBjYWxsYmFja0lkOiBJbnQgPSBzZWxmLmpldHRvbkNhbGxiYWNrUXVlcnlJZE5leHQ7CiAgICAgICAgICAgIHNlbGYuamV0dG9uQ2FsbGJhY2tRdWVyeUlkTmV4dCA9IGNhbGxiYWNrSWQgKyAxOwogICAgICAgICAgICBzZWxmLmpldHRvbkNhbGxiYWNrcy5zZXQoY2FsbGJhY2tJZCwgSmV0dG9uQ2FsbGJhY2t7CiAgICAgICAgICAgICAgICBvcmRlclR5cGU6IE9SREVSX1RZUEVfUEVSUCwKICAgICAgICAgICAgICAgIG9yZGVySWQ6IG1zZy5vcmRlcklkLAogICAgICAgICAgICAgICAgYW1vdW50OiBtc2cucmVjZWl2ZSwKICAgICAgICAgICAgICAgIHJlY2VpdmVyOiByZWNlaXZlciwKICAgICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBvcmRlci5jYWxsYmFja0lkID0gY2FsbGJhY2tJZDsKICAgICAgICAgICAgc2VsZi5wZXJwUG9zaXRpb25PcmRlcnMuc2V0KG1zZy5vcmRlcklkLCBvcmRlcik7CgogICAgICAgICAgICAvLyB0cmFuc2ZlciBqZXR0b24KICAgICAgICAgICAgc2VsZi5yZWZ1bmRKZXR0b24oY2FsbGJhY2tJZCwgbXNnLnJlY2VpdmUsIHJlY2VpdmVyLCBteUFkZHJlc3MoKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIHJlc2V0IG9yZGVyIHBlbmRpbmcKICAgIGJvdW5jZWQoc3JjOiBib3VuY2VkPFVwZGF0ZVBlcnBQb3NpdGlvbj4pIHsKICAgICAgICBkdW1wKCJpbmNyZWFzZSBwZXJwIHBvc2l0aW9uIGZhaWxlZCIpOwoKICAgICAgICAvLyBnZXQgb3JkZXIKICAgICAgICBsZXQgb3JkZXJPcHQ6IFBlcnBQb3NpdGlvbk9yZGVyPyA9IHNlbGYucGVycFBvc2l0aW9uT3JkZXJzLmdldChzcmMub3JkZXJJZCk7CiAgICAgICAgaWYgKG9yZGVyT3B0ID09IG51bGwpIHsKICAgICAgICAgICAgZHVtcCgib3JkZXIgbm90IGV4aXN0Iik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbGV0IG9yZGVyOiBQZXJwUG9zaXRpb25PcmRlciA9IG9yZGVyT3B0ISE7CiAgICAgICAgaWYgKG9yZGVyLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0xJUVVJREFUSU9OKSB7CiAgICAgICAgICAgIC8vIGRlbGV0ZQogICAgICAgICAgICBzZWxmLnBlcnBQb3NpdGlvbk9yZGVycy5zZXQoc3JjLm9yZGVySWQsIG51bGwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIHVwZGF0ZSBwZW5kaW5nCiAgICAgICAgICAgIG9yZGVyLmlzUGVuZGluZyA9IGZhbHNlOwogICAgICAgICAgICBzZWxmLnBlcnBQb3NpdGlvbk9yZGVycy5zZXQoc3JjLm9yZGVySWQsIG9yZGVyKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBMaXF1aWRhdGlvbiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgcmVjZWl2ZShtc2c6IExpcXVpZGF0ZVBlcnBQb3NpdGlvbk9yZGVyKSB7CiAgICAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKCiAgICAgICAgLy8gY2hlY2sgZ2FzCiAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiA2ICsgc2VsZi5nYXNDb25zdW1wdGlvbiAqIDMgKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlICsgc2VsZi5nZXRQb29sR2FzKCkgKyB0b24oIjAuMDMyIiksICJnYXMgbm90IGVub3VnaCIpOwoKICAgICAgICAvLyBjaGVjayBzZW5kZXIKICAgICAgICBsZXQgaXNFeGVjdXRvcjogQm9vbCA9IGZhbHNlOwogICAgICAgIGxldCBpc0V4ZWN1dG9yT3B0OiBCb29sPyA9IHNlbGYuZXhlY3V0b3JzLmdldChzZW5kZXIoKSk7CiAgICAgICAgaWYgKGlzRXhlY3V0b3JPcHQgIT0gbnVsbCkgewogICAgICAgICAgICBpc0V4ZWN1dG9yID0gaXNFeGVjdXRvck9wdCEhOwogICAgICAgIH0KICAgICAgICByZXF1aXJlKGlzRXhlY3V0b3IsICJpbnZhbGlkIHNlbmRlciIpOwoKICAgICAgICAvLyBmZWUgcmVjZWl2ZXIKICAgICAgICBsZXQgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3MgPSBzZW5kZXIoKTsKICAgICAgICBpZiAobXNnLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwpIHsKICAgICAgICAgICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXIgPSBtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIhITsKICAgICAgICB9CgogICAgICAgIC8vIGFkZCBuZXcgb3JkZXIKICAgICAgICBsZXQgb3JkZXJJZDogSW50ID0gc2VsZi5wZXJwUG9zaXRpb25PcmRlckluZGV4TmV4dDsKICAgICAgICBzZWxmLnBlcnBQb3NpdGlvbk9yZGVySW5kZXhOZXh0ID0gc2VsZi5wZXJwUG9zaXRpb25PcmRlckluZGV4TmV4dCArIDE7CiAgICAgICAgc2VsZi5wZXJwUG9zaXRpb25PcmRlcnMuc2V0KG9yZGVySWQsIFBlcnBQb3NpdGlvbk9yZGVyewogICAgICAgICAgICBvcFR5cGU6IE9SREVSX09QX1RZUEVfTElRVUlEQVRJT04sCiAgICAgICAgICAgIHRva2VuSWQ6IG1zZy50b2tlbklkLAogICAgICAgICAgICBhY2NvdW50OiBtc2cuYWNjb3VudCwKICAgICAgICAgICAgaXNMb25nOiBtc2cuaXNMb25nLAogICAgICAgICAgICBtYXJnaW5EZWx0YTogMCwKICAgICAgICAgICAgc2l6ZURlbHRhOiAwLAogICAgICAgICAgICB0cmlnZ2VyUHJpY2U6IDAsCiAgICAgICAgICAgIHRyaWdnZXJBYm92ZTogZmFsc2UsCiAgICAgICAgICAgIGV4ZWN1dGlvbkZlZTogMCwKICAgICAgICAgICAgYmxvY2tUaW1lOiBub3coKSwKICAgICAgICAgICAgaXNQZW5kaW5nOiB0cnVlLAogICAgICAgICAgICBjYWxsYmFja0lkOiBudWxsLAogICAgICAgICAgICBleGVjdXRpb25GZWVSZWNlaXZlcjogZXhlY3V0aW9uRmVlUmVjZWl2ZXIsCiAgICAgICAgICAgIGxhc3RPcGVyYXRvcjogc2VuZGVyKCkKICAgICAgICB9KTsKCiAgICAgICAgLy8gc2VuZCB1cGRhdGUgcG9zaXRpb24gbXNnCiAgICAgICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICAgICAgdG86IHNlbGYucG9vbCwKICAgICAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgICAgIG1vZGU6IFNlbmRSZW1haW5pbmdWYWx1ZSwKICAgICAgICAgICAgYm91bmNlOiB0cnVlLAogICAgICAgICAgICBib2R5OiBVcGRhdGVQZXJwUG9zaXRpb24gewogICAgICAgICAgICAgICAgb3BUeXBlOiBPUkRFUl9PUF9UWVBFX0xJUVVJREFUSU9OLAogICAgICAgICAgICAgICAgb3JkZXJJZDogb3JkZXJJZCwKICAgICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQsCiAgICAgICAgICAgICAgICBhY2NvdW50OiBtc2cuYWNjb3VudCwKICAgICAgICAgICAgICAgIG1hcmdpbkRlbHRhOiAwLAogICAgICAgICAgICAgICAgc2l6ZURlbHRhOiAwLAogICAgICAgICAgICAgICAgdHJpZ2dlclByaWNlOiAwLAogICAgICAgICAgICAgICAgdHJpZ2dlckFib3ZlOiBmYWxzZSwKICAgICAgICAgICAgICAgIHByaWNlc0xlbmd0aDogbXNnLnByaWNlc0xlbmd0aCwKICAgICAgICAgICAgICAgIHByaWNlczogbXNnLnByaWNlcwogICAgICAgICAgICB9LnRvQ2VsbCgpCiAgICAgICAgfSk7CiAgICAgICAgZHVtcCgibGlxdWlkYXRlIHBlcnAgc2VuZCBtc2cgdG8gcG9vbCIpOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQ2FsbGJhY2sgQ2FuY2VsIEluY3JlYXNlIC8gRXhlY3V0ZSBEZWNyZWFzZSAvIEV4ZWN1dGUgTGlxdWlkYXRpb24gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIGZ1biBoYW5kZWxQZXJwUG9zaXRpb25PcmRlckNhbGxiYWNrKG9yZGVySWQ6IEludCwgdHJ4SWQ6IEludCkgewogICAgICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CgogICAgICAgIC8vIGNoZWNrIGdhcwogICAgICAgIHJlcXVpcmUoY3R4LnZhbHVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICsgc2VsZi5nYXNDb25zdW1wdGlvbiwgImdhcyBub3QgZW5vdWdoIik7CgogICAgICAgIC8vIGdldCBvcmRlcgogICAgICAgIGxldCBvcmRlck9wdDogUGVycFBvc2l0aW9uT3JkZXI/ID0gc2VsZi5wZXJwUG9zaXRpb25PcmRlcnMuZ2V0KG9yZGVySWQpOwogICAgICAgIGlmIChvcmRlck9wdCA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbGV0IG9yZGVyOiBQZXJwUG9zaXRpb25PcmRlciA9IG9yZGVyT3B0ISE7CgogICAgICAgIC8vIGRlbGV0ZSBvcmRlcgogICAgICAgIHNlbGYucGVycFBvc2l0aW9uT3JkZXJzLnNldChvcmRlcklkLCBudWxsKTsKICAgICAgICBzZWxmLnBlcnBQb3NpdGlvbk9yZGVyRXhzLnNldChvcmRlcklkLCBudWxsKTsKCiAgICAgICAgaWYgKG9yZGVyLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFKSB7CiAgICAgICAgICAgIC8vIGV2ZW50CiAgICAgICAgICAgIGVtaXQoUGVycFBvc2l0aW9uT3JkZXJDYW5jZWxsZWRFdmVudHsKICAgICAgICAgICAgICAgIG9wVHlwZTogb3JkZXIub3BUeXBlLAogICAgICAgICAgICAgICAgb3JkZXJJZDogb3JkZXJJZCwKICAgICAgICAgICAgICAgIHRyeElkOiB0cnhJZAogICAgICAgICAgICB9LnRvQ2VsbCgpKTsKCiAgICAgICAgICAgIC8vIHRyYW5zZmVyIGV4ZWN1dGlvbiBmZWUKICAgICAgICAgICAgaWYgKG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgICAgICAgICAgdG86IG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyISEsCiAgICAgICAgICAgICAgICAgICAgYm91bmNlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvcmRlci5leGVjdXRpb25GZWUsCiAgICAgICAgICAgICAgICAgICAgbW9kZTogU2VuZFBheUdhc1NlcGFyYXRlbHkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGR1bXAoImNhbmNlbCBQZXJwIGluY3JlYXNlIG9yZGVyIHN1Y2Nlc3MiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBldmVudAogICAgICAgICAgICBlbWl0KFBlcnBQb3NpdGlvbk9yZGVyRXhlY3V0ZWRFdmVudHsKICAgICAgICAgICAgICAgIG9wVHlwZTogb3JkZXIub3BUeXBlLAogICAgICAgICAgICAgICAgb3JkZXJJZDogb3JkZXJJZCwKICAgICAgICAgICAgICAgIHRyeElkOiB0cnhJZAogICAgICAgICAgICB9LnRvQ2VsbCgpKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIHRyYW5zZmVyIGV4ZWN1dGlvbiBmZWUKICAgICAgICAgICAgaWYgKG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwgJiYgb3JkZXIuZXhlY3V0aW9uRmVlICE9IDApIHsKICAgICAgICAgICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgICAgICAgICAgdG86IG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyISEsCiAgICAgICAgICAgICAgICAgICAgYm91bmNlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvcmRlci5leGVjdXRpb25GZWUsCiAgICAgICAgICAgICAgICAgICAgbW9kZTogU2VuZFBheUdhc1NlcGFyYXRlbHkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyB0cmFuc2ZlciBleGVjZXNzIGdhcwogICAgICAgIGlmIChvcmRlci5sYXN0T3BlcmF0b3IgIT0gbnVsbCkgewogICAgICAgICAgICBzZWxmLnJlZnVuZEV4ZWNlc3NUb24ob3JkZXIubGFzdE9wZXJhdG9yISEsIDApOwogICAgICAgIH0KICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IENvbXBlbnNhdGUgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIC8vIHJlY2VpdmUobXNnOiBDb21wZW5zYXRlUGVycFBvc2l0aW9uT3JkZXIpIHsKICAgIC8vICAgICBsZXQgY3R4OiBDb250ZXh0ID0gY29udGV4dCgpOwoKICAgIC8vICAgICAvLyBjaGVjayBjb21wZW5zYXRvcgogICAgLy8gICAgIGxldCBpc0NvbXBlbnNhdG9yOiBCb29sID0gZmFsc2U7CiAgICAvLyAgICAgbGV0IGlzQ29tcGVuc2F0b3JPcHQ6IEJvb2w/ID0gc2VsZi5jb21wZW5zYXRvcnMuZ2V0KHNlbmRlcigpKTsKICAgIC8vICAgICBpZiAoaXNDb21wZW5zYXRvck9wdCAhPSBudWxsKSB7CiAgICAvLyAgICAgICAgIGlzQ29tcGVuc2F0b3IgPSBpc0NvbXBlbnNhdG9yT3B0ISE7CiAgICAvLyAgICAgfQogICAgLy8gICAgIHJlcXVpcmUoaXNDb21wZW5zYXRvciwgIm5vdCBjb21wZW5zYXRvciIpOwogICAgICAgIAogICAgLy8gICAgIC8vIGNoZWNrIG9yZGVyIHBlbmRpbmcKICAgIC8vICAgICBsZXQgb3JkZXJPcHQ6IExQUG9zaXRpb25PcmRlcj8gPSBzZWxmLmxwUG9zaXRpb25PcmRlcnMuZ2V0KG1zZy5vcmRlcklkKTsKICAgIC8vICAgICByZXF1aXJlKG9yZGVyT3B0ICE9IG51bGwsICJvcmRlciBub3QgZXhpc3QiKTsKICAgIC8vICAgICBsZXQgb3JkZXI6IExQUG9zaXRpb25PcmRlciA9IG9yZGVyT3B0ISE7CgogICAgLy8gICAgIC8vIGNoZWNrIGdhcwogICAgLy8gICAgIGlmIChvcmRlci5vcFR5cGUgPT0gT1JERVJfT1BfVFlQRV9JTkNSRUFTRSkgewogICAgLy8gICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDMgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICogMiArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UgKyBzZWxmLmdldFBvb2xHYXMoKSwgImdhcyBub3QgZW5vdWdoIik7CiAgICAvLyAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiA2ICsgc2VsZi5nYXNDb25zdW1wdGlvbiAqIDMgKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlICsgc2VsZi5nZXRQb29sR2FzKCkgKyB0b24oIjAuMDMyIiksICJnYXMgbm90IGVub3VnaCIpOwogICAgLy8gICAgIH0KCiAgICAvLyAgICAgcmVxdWlyZShvcmRlci5pc1BlbmRpbmcsICJvcmRlciBub3QgcGVuZGluZyIpOwoKICAgIC8vICAgICAvLyByZWZ1bmQKICAgIC8vICAgICBpZiAobXNnLm5lZWRSZWZ1bmQpIHsKICAgIC8vICAgICAgICAgLy8gaW5jcmVhc2UgcG9zaXRpb24gZmFpbGVkLCBjYW5jZWwgb3JkZXIKICAgIC8vICAgICAgICAgLy8gcmVmdW5kIGpldHRvbiBmYWlsZWQKICAgIC8vICAgICAgICAgLy8gZ2V0IGNhbGxiYWNrCiAgICAvLyAgICAgICAgIHJlcXVpcmUob3JkZXIuY2FsbGJhY2tJZCAhPSBudWxsLCAiamV0dG9uIGNhbGxiYWNrIG5vdCBleGlzdCIpOwogICAgLy8gICAgICAgICBsZXQgY2FsbGJhY2tJZDogSW50ID0gb3JkZXIuY2FsbGJhY2tJZCEhOwogICAgLy8gICAgICAgICBsZXQgamV0dG9uQ2FsbGJhY2tPcHQ6IEpldHRvbkNhbGxiYWNrPyA9IHNlbGYuamV0dG9uQ2FsbGJhY2tzLmdldChjYWxsYmFja0lkKTsKICAgIC8vICAgICAgICAgaWYgKGpldHRvbkNhbGxiYWNrT3B0ID09IG51bGwpIHsKICAgIC8vICAgICAgICAgICAgIHJldHVybjsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgICBsZXQgamV0dG9uQ2FsbGJhY2s6IEpldHRvbkNhbGxiYWNrID0gamV0dG9uQ2FsbGJhY2tPcHQhITsKICAgIC8vICAgICAgICAgLy8gdXBkYXRlIHRyeElkCiAgICAvLyAgICAgICAgIGpldHRvbkNhbGxiYWNrLnRyeElkID0gbXNnLnRyeElkOwogICAgLy8gICAgICAgICBzZWxmLmpldHRvbkNhbGxiYWNrcy5zZXQoY2FsbGJhY2tJZCwgamV0dG9uQ2FsbGJhY2spOwoKICAgIC8vICAgICAgICAgLy8gdXBkYXRlIGV4ZWN1dGlvbiBmZWUgcmVjZWl2ZXIKICAgIC8vICAgICAgICAgaWYgKG1zZy5leGVjdXRpb25GZWVSZWNlaXZlciAhPSBudWxsKSB7CiAgICAvLyAgICAgICAgICAgICBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciA9IG1zZy5leGVjdXRpb25GZWVSZWNlaXZlciEhOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICAgIG9yZGVyLmxhc3RPcGVyYXRvciA9IHNlbmRlcigpOwogICAgLy8gICAgICAgICBzZWxmLmxwUG9zaXRpb25PcmRlcnMuc2V0KG1zZy5vcmRlcklkLCBvcmRlcik7CgogICAgLy8gICAgICAgICAvLyB0cmFuc2ZlciBqZXR0b24KICAgIC8vICAgICAgICAgc2VsZi5yZWZ1bmRKZXR0b24oY2FsbGJhY2tJZCwgamV0dG9uQ2FsbGJhY2suYW1vdW50LCBqZXR0b25DYWxsYmFjay5yZWNlaXZlciwgbXlBZGRyZXNzKCkpOwogICAgLy8gICAgICAgICByZXR1cm47CiAgICAvLyAgICAgfQoKICAgIC8vICAgICBpZiAobXNnLmlzRXhlY3V0ZSkgewogICAgLy8gICAgICAgICAvLyBkZWxldGUgb3JkZXIKICAgIC8vICAgICAgICAgc2VsZi5scFBvc2l0aW9uT3JkZXJzLnNldChtc2cub3JkZXJJZCwgbnVsbCk7CiAgICAvLyAgICAgICAgIC8vIGV2ZW50CiAgICAvLyAgICAgICAgIGVtaXQoTFBQb3NpdGlvbk9yZGVyRXhlY3V0ZWRFdmVudHsKICAgIC8vICAgICAgICAgICAgIG9wVHlwZTogb3JkZXIub3BUeXBlLAogICAgLy8gICAgICAgICAgICAgb3JkZXJJZDogbXNnLm9yZGVySWQsCiAgICAvLyAgICAgICAgICAgICB0cnhJZDogbXNnLnRyeElkCiAgICAvLyAgICAgICAgIH0udG9DZWxsKCkpOwogICAgLy8gICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICAgIGlmIChvcmRlci5jYWxsYmFja0lkICE9IG51bGwpIHsKICAgIC8vICAgICAgICAgICAgIC8vIGRlbGV0ZSBjYWxsYmFjawogICAgLy8gICAgICAgICAgICAgc2VsZi5qZXR0b25DYWxsYmFja3Muc2V0KG9yZGVyLmNhbGxiYWNrSWQhISwgbnVsbCk7CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgICAgLy8gZGVsZXRlIG9yZGVyCiAgICAvLyAgICAgICAgIHNlbGYubHBQb3NpdGlvbk9yZGVycy5zZXQobXNnLm9yZGVySWQsIG51bGwpOwogICAgLy8gICAgICAgICAvLyBldmVudAogICAgLy8gICAgICAgICBlbWl0KExQUG9zaXRpb25PcmRlckNhbmNlbGxlZEV2ZW50ewogICAgLy8gICAgICAgICAgICAgb3BUeXBlOiBvcmRlci5vcFR5cGUsCiAgICAvLyAgICAgICAgICAgICBvcmRlcklkOiBtc2cub3JkZXJJZCwKICAgIC8vICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQKICAgIC8vICAgICAgICAgfS50b0NlbGwoKSk7CiAgICAvLyAgICAgfQoKICAgIC8vICAgICAvLyB0cmFuc2ZlciBleGVjdXRpb24gZmVlCiAgICAvLyAgICAgaWYgKG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwgJiYgb3JkZXIuZXhlY3V0aW9uRmVlICE9IDApIHsKICAgIC8vICAgICAgICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgIC8vICAgICAgICAgICAgIHRvOiBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciEhLAogICAgLy8gICAgICAgICAgICAgYm91bmNlOiB0cnVlLAogICAgLy8gICAgICAgICAgICAgdmFsdWU6IG9yZGVyLmV4ZWN1dGlvbkZlZSwKICAgIC8vICAgICAgICAgICAgIG1vZGU6IFNlbmRQYXlHYXNTZXBhcmF0ZWx5CiAgICAvLyAgICAgICAgIH0pOwogICAgLy8gICAgIH0KCiAgICAvLyAgICAgLy8gdHJhbnNmZXIgZXhlY2VzcyBnYXMKICAgIC8vICAgICBzZWxmLnJlZnVuZEV4ZWNlc3NUb24oc2VuZGVyKCksIG9yZGVyLmV4ZWN1dGlvbkZlZSk7CiAgICAvLyAgICAgcmV0dXJuOwogICAgLy8gfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gR2V0dGVyID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCiAgICBnZXQgZnVuIHBlcnBQb3NpdGlvbk9yZGVyKG9yZGVySWQ6IEludCk6IExQUG9zaXRpb25PcmRlcj8gewogICAgICAgIHJldHVybiBzZWxmLmxwUG9zaXRpb25PcmRlcnMuZ2V0KG9yZGVySWQpOwogICAgfQoKICAgIGdldCBmdW4gcGVycFBvc2l0aW9uT3JkZXJJbmRleE5leHQoKTogSW50IHsKICAgICAgICByZXR1cm4gc2VsZi5scFBvc2l0aW9uT3JkZXJJbmRleE5leHQ7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gcHJpdmF0ZSBmdW5jdGlvbiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCiAgICBmdW4gc2hvdWxkQ2FuY2VsKGJsb2NrVGltZTogSW50LCBhY2NvdW50OiBBZGRyZXNzLCBpc1BlbmRpbmc6IEJvb2wpIHsKICAgICAgICByZXF1aXJlKCFpc1BlbmRpbmcsICJvcmRlciBpcyBwZW5kaW5nIik7CgogICAgICAgIC8vIGV4ZWN1dG9yIG9yIHRyYWRlcgogICAgICAgIGxldCBpc0V4ZWN1dG9yOiBCb29sID0gZmFsc2U7CiAgICAgICAgbGV0IGlzRXhlY3V0b3JPcHQ6IEJvb2w/ID0gc2VsZi5leGVjdXRvcnMuZ2V0KHNlbmRlcigpKTsKICAgICAgICBpZiAoaXNFeGVjdXRvck9wdCAhPSBudWxsKSB7CiAgICAgICAgICAgIGlzRXhlY3V0b3IgPSBpc0V4ZWN1dG9yT3B0ISE7CiAgICAgICAgfQoKICAgICAgICAvLyBleGVjdXRvciBjYW5jZWwgbXVzdCBhZnRlciBtaW5UaW1lRGVsYXlFeGVjdXRvcgogICAgICAgIGlmIChpc0V4ZWN1dG9yKSB7CiAgICAgICAgICAgIHJlcXVpcmUoYmxvY2tUaW1lICsgc2VsZi5taW5UaW1lRGVsYXlFeGVjdXRvciA8PSBub3coKSwgInRvbyBlYXJseSIpOwogICAgICAgIH0KICAgICAgICAvLyBjaGVjayBzZW5kZXIKICAgICAgICByZXF1aXJlKHNlbmRlcigpID09IGFjY291bnQgfHwgaXNFeGVjdXRvciwgImludmFsaWQgc2VuZGVyIik7CiAgICAgICAgLy8gdHJhZGVyIGNhbmNlbCBtdXN0IGFmdGVyIG1pblRpbWVEZWxheVRyYWRlcgogICAgICAgIGlmICghaXNFeGVjdXRvcikgewogICAgICAgICAgICByZXF1aXJlKGJsb2NrVGltZSArIHNlbGYubWluVGltZURlbGF5VHJhZGVyIDw9IG5vdygpLCAidG9vIGVhcmx5Iik7CiAgICAgICAgfQogICAgfQoKICAgIGZ1biBzaG91bGRFeGVjdXRlKGJsb2NrVGltZTogSW50LCBpc1BlbmRpbmc6IEJvb2wpIHsKICAgICAgICByZXF1aXJlKCFpc1BlbmRpbmcsICJvcmRlciBpcyBwZW5kaW5nIik7CgogICAgICAgIC8vIGV4ZWN1dG9yIG9yIHRyYWRlcgogICAgICAgIGxldCBpc0V4ZWN1dG9yOiBCb29sID0gZmFsc2U7CiAgICAgICAgbGV0IGlzRXhlY3V0b3JPcHQ6IEJvb2w/ID0gc2VsZi5leGVjdXRvcnMuZ2V0KHNlbmRlcigpKTsKICAgICAgICBpZiAoaXNFeGVjdXRvck9wdCAhPSBudWxsKSB7CiAgICAgICAgICAgIGlzRXhlY3V0b3IgPSBpc0V4ZWN1dG9yT3B0ISE7CiAgICAgICAgfQoKICAgICAgICAvLyBjaGVjayBzZW5kZXIKICAgICAgICByZXF1aXJlKGlzRXhlY3V0b3IsICJpbnZhbGlkIHNlbmRlciIpOwoKICAgICAgICAvLyBleGVjdXRvciBjYW5jZWwgbXVzdCBhZnRlciBtaW5UaW1lRGVsYXlFeGVjdXRvcgogICAgICAgIHJlcXVpcmUoYmxvY2tUaW1lICsgc2VsZi5taW5UaW1lRGVsYXlFeGVjdXRvciA8PSBub3coKSwgInRvbyBlYXJseSIpOwoKICAgICAgICAvLyBleGVjdXRvciBjYW5jZWwgbXVzdCBiZWZvcmUgbWF4VGltZURlbGF5RXhlY3V0b3IKICAgICAgICByZXF1aXJlKGJsb2NrVGltZSArIHNlbGYubWF4VGltZURlbGF5RXhlY3V0b3IgPiBub3coKSwgIm9yZGVyIGV4cGlyZWQiKTsKICAgIH0KCiAgICAvLyBmdW4gdG9rZW5FbmFibGVkKHRva2VuSW5kZXg6IEludCk6IEJvb2wgewogICAgLy8gICAgIGxldCB0b2tlbkNvbmZpZ09wdDogVG9rZW5Db25maWc/ID0gc2VsZi50b2tlbkNvbmZpZ3MuZ2V0KHRva2VuSW5kZXgpOwogICAgLy8gICAgIGlmICh0b2tlbkNvbmZpZ09wdCA9PSBudWxsKSB7CiAgICAvLyAgICAgICAgIHJldHVybiBmYWxzZTsKICAgIC8vICAgICB9CiAgICAvLyAgICAgcmV0dXJuICh0b2tlbkNvbmZpZ09wdCEhKS5lbmFibGU7CiAgICAvLyB9CgogICAgLy8gY3JlYXRlIGpldHRvbiB0cmFuc2ZlciBib2R5CiAgICBmdW4gY3JlYXRlSmV0dG9uVHJhbnNmZXJCb2R5KHF1ZXJ5SWQ6IEludCwgamV0dG9uQW1vdW50OiBJbnQsIHRvOiBBZGRyZXNzLCByZXNwb25zZURlc3RpbmF0aW9uOiBBZGRyZXNzKTogQ2VsbCB7CiAgICAgICAgcmV0dXJuIGJlZ2luQ2VsbCgpCiAgICAgICAgICAgIC5zdG9yZUludCgweGY4YTdlYTUsIDMyKQogICAgICAgICAgICAuc3RvcmVJbnQocXVlcnlJZCwgNjQpCiAgICAgICAgICAgIC5zdG9yZUNvaW5zKGpldHRvbkFtb3VudCkKICAgICAgICAgICAgLnN0b3JlQWRkcmVzcyh0bykgLy8gdG9fb3duZXJfYWRkcmVzcwogICAgICAgICAgICAuc3RvcmVBZGRyZXNzKHJlc3BvbnNlRGVzdGluYXRpb24pCiAgICAgICAgICAgIC5zdG9yZUludCgwLCAxKSAvLyBjdXN0b20gcGF5bG9hZAogICAgICAgICAgICAuc3RvcmVDb2lucygwKSAvLyBmb3J3YXJkX3Rvbl9hbW91bnQKICAgICAgICAgICAgLnN0b3JlU2xpY2UoYmVnaW5DZWxsKCkuZW5kQ2VsbCgpLmFzU2xpY2UoKSkgLy8gZm9yd2FyZCBwYXlsb2FkCiAgICAgICAgICAgIC5lbmRDZWxsKCk7CiAgICB9CgoKfQo="},"compiler":{"name":"tact","version":"1.2.0","parameters":"{\"entrypoint\":\"contracts/order/order_book.tact\",\"options\":{}}"}}