{"name":"OrderBook","code":"te6ccgECxQEAPMUAART/APSkE/S88sgLAQIBYgIDA87QAdDTAwFxsKMB+kABINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiFRQUwNvBPhhAvhi2zwRERETEREREBESERAPEREPDhEQDlUd2zzy4ILI+EMBzH8BygAREhERERBV4Ns8ye1UvxARAgEgBAUCASCsrQIBIAYHAgEgCAkCAUgODwIBIAoLAN23ejBOC52Hq6WVz2PQnYc6yVCjbNBOE7rGpaVsj5ZkWnXlv74sRzBOBAq4A3AM7HKZywdVyOS2WHBOA3qTvfKost446np7wKs4ZNBOE7Lpy1Zp2W5nQdLNsozdFJBOCBnOrTzivzpKFgOsLcTI9lACGbEUNs82zxXEF8PbCGC/DAJpsx62zwRERESEREREBERERAPERAPVQ7bPFcQXw9sISBukjBtmSBu8tCAbylvCeIgbpIwbd6C/DQACJQE6gQEBKAJZ9A1voZIwbd8gbpIwbY6H0Ns8bBlvCeJOABGwr7tRNDSAAGAAdbJu40NWlwZnM6Ly9RbVRQeFNWQjNBZXRzZVVXQ01HS0pLS2lpV0x0RE1DbXdvUVpzaVNXVjFQVTd4ggBJIBj7CAINchcCHXScIflTAg1wsf3iCCEOic1F+64wIgghD+o2txuuMCghD/V+VXuuMCMH/gcCHXScIflTAg1wsf3iCCEG3gBH66EhMUFQHOARERARESgQEBzwAfgQEBzwAdgQEBzwALyIEBAc8AGoEBAc8AUAgg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIzxbIUAcg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIzxZQBS8C1jDTHwGCEOic1F+68uCB0gDTP1lsEjEngQEBIln0DW+hkjBt3yBukjBtjofQ2zxsGW8J4iBukVuOsCBu8tCAbykzEGcQVxBHEDcQJ3BZgQEBCchVgNs8yRA5EiBulTBZ9FowlEEz9BXiBuJ/TlUC4DDTHwGCEP6ja3G68uCB0z/TB1lsEjCNBtpbmNyZWFzZSBscCBwb3NpdGlvbiBmYWlsZWSD+FDAlgQEBIln0DW+hkjBt3yBukjBtjofQ2zxsGm8K4iBujhVbi/b3JkZXIgbm90IGV4aXN0j+FDDjDn+zFgLi0x8BghD/V+VXuvLggdM/0wdZbBIwjQdaW5jcmVhc2UgcGVycCBwb3NpdGlvbiBmYWlsZWSD+FDAjgQEBIln0DW+hkjBt3yBukjBtjofQ2zxsHm8O4iBujhVbi/b3JkZXIgbm90IGV4aXN0j+FDDjDn+2FwQ6jwgw2zxsGds8f+AgghBzYtCcuuMCIIIQ1TJ227oYGRobAswgbvLQgG8qMyjAA46sXwmBAQFtIG6SMG2OjSBu8tCAbyrIVZDbPMniEDcSIG6VMFn0WjCUQTP0FeKOqRB4EGgQWBBIEDgQKHBZgQEBCshVkNs8yRA3EiBulTBZ9FowlEEz9BXi4gR6egLcIG7y0IBvLjMswAOOrF8NgQEBbSBukjBtjo0gbvLQgG8uyFXQ2zzJ4hA1EiBulTBZ9FowlEEz9BXijrEQvBCsEJwQjBB8EGwQXBBMEDwQLHBZgQEBDshV0Ns8yRA1EiBulTBZ9FowlEEz9BXi4gKlpQHE0x8BghBt4AR+uvLggfpAIdcLAcMAjh0BINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiJIxbeIB0gABktIAkm0B4oEBAdcAgQEB1wDUAdCBAQHXAIEBAdcAgQEB1wDUMNAcBPYREREaEREREBEZERAPERgPDhEXDg0RFg0MERUMCxEUCwoREwoJERIJCBEaCAcRGQcGERgGBREXBQQRFgQDERUDAhEUAgEREwEREts8Ozs7Ozs7O1YTbrOUVhJus5Fw4pRXElcS4w34QnBwgEAQI21tbds8DxERDw4REA4dHqkfAoYw0x8BghBzYtCcuvLggdM/+gD6QAEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIVBMDECNsFPhCVhEBxwWz4w9/ICED/o7yMNMfAYIQ1TJ227ry4IHTPwExKYEBASJZ9A1voZIwbd8gbpIwbY5D0IEBAdcAgQEB1wCBAQHXANQB0PpAASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IgBgQEB1wAwECUQJBAjbBVvBeIgbpFb4w5/4CCCEKERYu264wImJygAkPpAASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IgB+kABINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiDEQWRBYEFcQVgAS+EJSsMcF8uCEAFiBAQsRFCBu8tCAERMgbvLQgAIRFAIBERMBcSFulVtZ9FkwmMgBzwBBM/RB4gAiEN8QzhC9EKwJCwgGRKQXFRMD/DD4QhERERUREREQERQREA8REw8OERIODREVDQwRFAwLERMLChESCgkRFQkIERQIBxETBwYREgYFERUFBBEUBAMREwMCERICAREVAREUcBEUgEARFFYXcBEZ2zwEERUEAxEUAwIREwIBERYBFEMwbW3bPA0REQ0MERAMEL8QrqipIgOs1DDQ0h8hwAGOiTHSf/oAMAHbPI9AIcACjosx0n/Sf/oAMFnbPI6tAcADjqT6ANIAAcD/AdI/0gABwP8B0n/Sf9L/1DDQ0n/S/9J/0v8w2zySXwTi4uIjJCUACBCdVTgEVvhBbyRDMFIw2zyqAFIwoFYVoFYUoLmOhFsg2zzgUzC5joRbINs84CFWFbmWpqYwBMaNCNoYW5kbGVDcmVhdGVJbmNyZWFzZUxQUG9zaXRpb25PcmRlcoP4UMPhBbyRDMFIw2zyqAFJAoFYWoFYVoLmOmF8Di+Z2FzIG5vdCBlbm91Z2iP4UMCDbPOBTQbnjAiJWFrmWpjIzBMqNCVoYW5kbGVDcmVhdGVJbmNyZWFzZVBlcnBQb3NpdGlvbk9yZGVyg/hQw+EFvJEMwUjDbPKoAUsCgVh6gVh2guY6YXwuL5nYXMgbm90IGVub3VnaI/hQwINs84FPGueMCKlYeuZamNTYC8iBu8tCAbyVsIYEBAW0gbpIwbY5GIG7y0IBvJchVQFBFgQEBzwASgQEBzwCBAQHPAMhYINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8WEoEBAc8AyQHMyeIQPkFQIG6VMFn0WjCUQTP0FeIhwAGOhTFQqts84w44OQE8MNMfAYIQoRFi7bry4IGBAQHXAIEBAdcAWWwS2zx/KQTiIIIQvG8GA7qOyjDTHwGCELxvBgO68uCBgQEB1wCBAQHXAPpAIdcLAcMAjh0BINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiJIxbeJDMGwT2zx/4CCCECXsY8G64wIgghAc8M+BuuMCIIIQcgK9fborLC0uA6j4QW8kgUtpUyahVTHbPKoAVhOgVhKgvvL0gV/yIlYTvvL0J6SBAQFw+EL4I3BtbShRSkQ0bchVgNs8ySoQPAEgbpUwWfRaMJRBM/QV4nL4QlQjQwuWVSoBxshVQIIQWeGF8VAGyx8UywdYINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8WgQEBzwCBAQHPAAHIgQEBzwDJAczJyIJYwAAAAAAAAAAAAAAAAQHLZ8zJcPsA+EIQeAHbPKME9PhBbyQtgQEBKFn0DW+hkjBt3yBukjBtjofQ2zxsGW8J4oF/fSFus/L0IG7y0IBvKV8DJY6eVBmHgUtpCNs8qgFWGqoAoFYZoIIJ6EgAoBa+FPL0jpZUGYeBS2kI2zyqAFYaoFYZoBa+FPL04vhCERMRGxETERIRGhESTpaWQwG0MNMfAYIQJexjwbry4IGBAQHXAIEBAdcA+kAh1wsBwwCOHQEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIkjFt4gHUAdCBAQHXAPQEMBAlECQQI2wV2zx/SAKoMNMfAYIQHPDPgbry4IGBAQHXAIEBAdcA0z9VIGwT+EFvJIIAoPf4QlYUAccF8vQtgQEBKFn0DW+hkjBt3yBukjBtjofQ2zxsGW8J4iBukl8I4w5/Tk8D/I6kMNMfAYIQcgK9fbry4IGBAQHXAIEBAdcAgQEB1wBVIGwT2zx/4CCCEFgVf7u6jssw0x8BghBYFX+7uvLggfpAIdcLAcMAjh0BINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiJIxbeIBgQEB1wCBAQHXAFUgbBPbPH/gIFhZWgCGINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8WE/QA9ADLP/QAEss/Asj0ABTLPxT0ABT0ABTLP8kBzMlYzMkBzAN8joRbINs84DMzKKSBAQF/+CNwbW1tKFFaUVxFFVBEA8hVgNs8ySsQPQEgbpUwWfRaMJRBM/QV4nFUIhNUJFymVTEBwshVQIIQWeGF8VAGyx8UywdYINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8WgQEBzwCBAQHPAAHIgQEBzwDJAczJyIJYwAAAAAAAAAAAAAAAAQHLZ8zJcPsAEHgB2zyjAVBfAyDbPI0HXJlZnVuZCBmcm9tIG5vdCBlbm91Z2ggbWFyZ2lug/hQwpgT4jqNfAyDbPI0GGV4ZWN1dGlvbiBmZWUgbm90IGVub3VnaIP4UMOA0NCekgQEBcfgjcG1tKFFLUUtRSgRtyFWQ2zzJKhA8ASBulTBZ9FowlEEz9BXicVEwRlNSC8hVUNs8yciCWMAAAAAAAAAAAAAAAAEBy2fMyXD7AFAGBaZ6WzQBBNs8owFQXwuNB1yZWZ1bmQgZnJvbSBub3QgZW5vdWdoIG1hcmdpboP4UMCDbPKYC/o6jXwuNBhleGVjdXRpb24gZmVlIG5vdCBlbm91Z2iD+FDAg2zzgPDwHkXqSgAviERsRHREbERoRHBEaERkRHREZERgRHBEYERcRHREXERYRHBEWERURHREVERQRHBEUERMRHRETERIRHBESERERHRERERARHBEQDxEdDw4RHA6mNwKEDREdDQwRHAwLER0LChEcClGQCRB4EGcQVhBFEDQQIwERHgERHVYd2zwwERERExERERAREhEQDxERDw4REA5VHds8n6ME3PhBbyRUEyOBS2kE2zxWE6ASvvL0KIEBASNZ9A1voZIwbd8gbpIwbY6H0Ns8bBlvCeIgbpJfA+AgbvLQgG8pUGdfBYEBAW0gbpIwbY6NIG7y0IBvKchVgNs8yeInED8BIG6VMFn0WjCUQTP0FeIDlk5VOgI0IcACjoUxUKrbPI6NAcADjoRQqts8kjow4uI8PQPKjtByQFTIVSCCEFCBVMVQBMsfEssHgQEBzwCBAQHPAMnIgljAAAAAAAAAAAAAAAABActnzMlw+wAibrOOkQIgbvLQgH9YCnEQI21tbds8kjI44uMNJ26zjokHIG7y0IBw2zyRN+KpO6MBoHFAVMhVIIIQmCLjqlAEyx8SyweBAQHPAIEBAc8AyciCWMAAAAAAAAAAAAAAAAEBy2fMyXD7ACJus46RAiBu8tCAf1gKcRAjbW1t2zySMjjiqQTi+EFvJFQTI4FLaQTbPFYToBK+8vQmgQEBI1n0DW+hkjBt3yBukjBtjofQ2zxsGm8K4iBukl8D4CBu8tCAbypQZ18FM4EBAW0gbpIwbY6NIG7y0IBvKshVkNs8yeInED0BIG6VMFn0WjCUQTP0FeIjwAGWs3o+BOr4QW8kVBMjgUtpBNs8VhOgEr7y9CSBAQEjWfQNb6GSMG3fIG6SMG2Oh9DbPGwebw7iIG6SXwPgIG7y0IBvLlBnXwVsMzMzgQEBbSBukjBtjo0gbvLQgG8uyFXQ2zzJ4icQOwEgbpUwWfRaMJRBM/QV4oEBAW2WtqVAA9SO1kNUyFUgghDXLzbYUATLHxLLB4EBAc8AgQEBzwDJyIJYwAAAAAAAAAAAAAAAAQHLZ8zJcPsAJ26zkyDDAJFw4o6RByBu8tCAf1gIcRAjbW1t2zySMDbi4w0gbrOOiCBu8tCAcNs8kTDiqT+jAepDVMhVIIIQEGnq0FAEyx8SyweBAQHPAIEBAc8AyciCWMAAAAAAAAAAAAAAAAEBy2fMyXD7ACdus46RByBu8tCAf1gIcRAjbW1t2zySMDbijQgY2FuY2VsIExQIGluY3JlYXNlIG9yZGVyIHN1Y2Nlc3OD+FDCpA8IgbpIwbY4mIG7y0IBvJMhVMFA0gQEBzwCBAQHPAIEBAc8AAciBAQHPAMkBzMniJxA6ASBulTBZ9FowlEEz9BXiI8AKkX+TI8AL4uMPI26zjowDIG7y0IAQI3DbPBKRM+ISQUKjAexDVMhVIIIQl7Qm6lAEyx8SyweBAQHPAIEBAc8AyciCWMAAAAAAAAAAAAAAAAEBy2fMyXD7ACBus46QIG7y0IB/WANxECNtbW3bPJIwMeKNCJjYW5jZWwgUGVycCBpbmNyZWFzZSBvcmRlciBzdWNjZXNzg/hQwqQGqQ1TIVSCCEP7POn9QBMsfEssHgQEBzwCBAQHPAMnIgljAAAAAAAAAAAAAAAABActnzMlw+wAgbrOTIsMAkXDijpAgbvLQgH9YA3EQI21tbds8kjAx4qkDnhERERkREREQERgREA8RFw8OERYODREVDQwRFAwLERsLChEaCgkRGQkIERgIBxEXBwYRFgYFERUFBBEUBAMRGwMCERoCVhYCERbbPFYY4w99REUB+iekgQEBcQFWGgFWHQFWGAERHMhVQFBFgQEBzwASgQEBzwCBAQHPAMhYINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8WEoEBAc8AyQHMyRAqAREYAVKQIG6VMFn0WjCUQTP0FeJWFW6zlxEVIG7y0ICUVxX4QuL4Qn8pRgLYVxNXE1cWVxb4QlYSbrOaMBERIG7y0IAREZJXEuKBAQFtIG6SMG2OjSBu8tCAbynIVYDbPMniECRWFQEgbpUwWfRaMJRBM/QV4nICAREUARETyFUgghCYIuOqUATLHxLLB4EBAc8AgQEBzwDJVUcC0gURGwWBAQFWFwZWHgYFERgFBBEaBAMRGgMCERoCAREYyFWA2zzJEDQCERICAREVASBulTBZ9FowlEEz9BXi+CgNERUNDBEUDAsREwsKERIKCRERCQgREAgQfxBuEF0QnBpJsEZwECXbPFWmApTIgljAAAAAAAAAAAAAAAABActnzMlw+wAff1ANcRAjbW1t2zz4QgoREgoJEREJCBEQCBB/EG4QXRBMEDtKkBBoEGcQNUQwEnDbPKmjBKb4QW8kL4EBASpZ9A1voZIwbd8gbpIwbY6H0Ns8bBlvCeKBf30hbrPy9CBu8tCAbykxJ+MPDhESDg0REQ0MERAMVTsDERQDAhEVAgERHQFWFAERH05JSksC3lQbqYFLaQrbPKcDVh6qAKBWHaAREREhEREREBEgERAPER8PDhEeDg0RHQ0MERwMCxEbCwoRGgoJERkJCBEYCAcRFwcGERYGBREVBQQRFAQDERMDAhESAgERIQERINs8AREhAaABERgBvgERFgHy9JaOAupUG6mBS2kK2zynBlYepwOgVh2gERERIRERERARIBEQDxEfDw4RHg4NER0NDBEcDAsRGwsKERoKCREZCQgRGAgHERcHBhEWBgURFQUEERQEAxETAwIREgIBESEBESDbPAERIQGgggnoSACgAREYAb4BERYB8vSWjgT+2zxWGW6zlxEZIG7y0ICUVxn4QuJ/gQEBVhQGVhcGViAGBREiBQQRGAQDERgDAhEbAgERIgERGshVgNs8yRAjAREQAVYYASBulTBZ9FowlEEz9BXiED0CERYCAREVAQ9wERiAQBEVfxEVEDQQI8hVYNs8ySMDERUDAhERAhEQAYpVTE0AeoIQ6JzUX1AIyx8WygAUyz9YINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8WgQEBzwDLP4EBAc8A9AABOhRDMG1t2zwFEREFBBEQBBA/TtwQSgkQaBA3XiIBqQHk0gD6QAEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIAYEBAdcAgQEB1wDUAdCBAQHXANIA0gABlYEBAdcAkm0B4vpAIdcLAcMAjh0BINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiJIxbeIB1DDQUAN6IG7y0IBvKTInjpNUG6mBS2kK2zyqAFYcoBi+FvL0jptUG6mBS2kK2zyqAVYcqgCgggnoSACgGL4W8vTiI5aWUQBo+kAh1wsBwwCOHQEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIkjFt4jEQWRBYEFcQVgIE4w9SUwP+OV8FgQEBbSBukjBtjo0gbvLQgG8pyFWA2zzJ4iYQPgEgbpUwWfRaMJRBM/QV4nFAU8hVIIIQUIFUxVAEyx8SyweBAQHPAIEBAc8AyciCWMAAAAAAAAAAAAAAAAEBy2fMyXD7AClus46QCSBu8tCAf1hxECNtbW3bPJI5MOInblWpVAL8VhKkgQEBcVRt01J+yFVAUEWBAQHPABKBAQHPAIEBAc8AyFgg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIzxYSgQEBzwDJAczJAhEVAhpWFAEgbpUwWfRaMJRBM/QV4lYSEEaBAQEkBxBGBREWBQQDUJrIVYDbPMkQPEFQVVYBHrOOiQcgbvLQgHDbPJE34qMB9FCJygBQBiDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFhSBAQHPABKBAQHPAAHIgQEBzwASygAibrOafwHKABKBAQHPAJUycFjKAOJYIG6VMHABywGOHiDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFuLIVwEuIG6VMFn0WjCUQTP0FeL4KBA8GhsT2zymAGJQAyBulTBwAcsBjh4g10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIzxbiyVjMyQHMBPb4QW8kgUtpUyehVTHbPKoAVhSgVhOgvvL0gV/yI1YUvvL0JqSBAQFy+EL4I3BtbW0qUVpRXUUVUEQDyFWQ2zzJKRA7ASBulTBZ9FowlEEz9BXicvhCVSFSWshVUNs8yciCWMAAAAAAAAAAAAAAAAEBy2fMyXD7APhCEFaWeltcBOz4QW8kK4EBASdZ9A1voZIwbd8gbpIwbY6H0Ns8bBpvCuKBf30hbrPy9CBu8tCAbypfAybAAY6eVBqYgUtpCds8qgFWG6oAoFYaoIIJ6EgAoBe+FfL0jpZUGpiBS2kJ2zyqAFYboFYaoBe+FfL04vhCERMRHBETs5aWXQT+ghDQoVIFuo7aMNMfAYIQ0KFSBbry4IH6QCHXCwHDAI4dASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IiSMW3iAYEBAdcAgQEB1wDUAdCBAQHXAPQEMBAlECQQI2wV2zx/4CCCEEmJx8G64wIgghBj3SinuuMCIIIQDaeO+WJjZGUAjoIQ6TBN81AHyx8VywdQAyDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFoEBAc8AgQEBzwAByIEBAc8AEoEBAc8AyQHMAQYB2zyjA64REhEbERIREREaEREREBEZERAPERgPDhEXDg0RFg0MERUMCxEUCwoRHAoJERsJCBEaCAcRGQcGERgGBREXBQQRFgQDERUDAhEUAlYZAhEZ2zxWE8AB4w99Xl8B+iekgQEBcgFWHAFWGgFWFwERHshVQFBFgQEBzwASgQEBzwCBAQHPAMhYINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8WEoEBAc8AyQHMyRAqAREaAVKQIG6VMFn0WjCUQTP0FeJWGm6zlxEaIG7y0ICUVxr4QuL4Qn8pYALUVxJXE1cUVxT4QlYXbrOaMBEWIG7y0IARFpJXF+KBAQFtIG6SMG2OjSBu8tCAbyrIVZDbPMniVhcBIG6VMFn0WjCUQTP0FeIQLwERFQERFMhVIIIQEGnq0FAEyx8SyweBAQHPAIEBAc8AyXphAt4GERYGgQEBVhYHVhsHBhEaBgURGwUEER0EAxEdAwIRHQIBERoBERvIVZDbPMkTAhEUAgERFgEgbpUwWfRaMJRBM/QV4vgoDBEVDAsRFAsKERMKCRESCQgREQgHERAHEG8QXhBNEKsYEFcQNEEw2zx6pgKYyIJYwAAAAAAAAAAAAAAAAQHLZ8zJcPsAARETAX9QD3EQI21tbds8+EIJERIJCBERCAcREAcQbxBeEE0QPEugEEgQJxBGECUQI3DbPKmjBKb4QW8kLYEBASlZ9A1voZIwbd8gbpIwbY6H0Ns8bBpvCuKBf30hbrPy9CBu8tCAbyoxKMAB4w8OERIODRERDQwREAxVOwMRFgMCERcCAREfASARF7Nub3ABPDDTHwGCEEmJx8G68uCBgQEB1wCBAQHXANM/VSBsE3MB6jDTHwGCEGPdKKe68uCB+kAh1wsBwwCOHQEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIkjFt4gH6QAEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIAYEBAdcA1AHQgQEB1wD0BDAQJRAkECNsFds8f2YE1LqPCDDbPGwX2zx/4CCCEPmVFPO6jssw0x8BghD5lRTzuvLggfpAIdcLAcMAjh0BINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiJIxbeIBgQEB1wCBAQHXAFUgbBPbPH/gIIIQ4wuem7ppamtsA/T4QW8kVBMjgUtpBNs8pwZWFqcDoFYVoBERERkREREQERgREA8RFw8OERYODREVDQwRFAwLERMLChESCgkRGQkIERgIBxEXBwYRFgYFERUFBBEUBAMREwMCERICAREZAREY2zwBERkBoIIJ6EgAoAEREgG+AREYAfL0cJaOZwL6gQEL+EIpWXFBM/QKb6GUAdcAMJJbbeIgbrOWMSBu8tCAkTDiggCg9wHy9PhCVhVus5owERQgbvLQgBEUklcV4iCkgQEBc3BTAPgjf234QhB4Vh0IER8ByFWQ2zzJECMBERYBUjAgbpUwWfRaMJRBM/QV4nCAQH9zVDUzECZ6aALGBREYBQQRGQRaAREXAREWEGcQRRA0ECPIVXDbPMknBAMREgMCERMCEREBFEMwbW3bPI0HWxpcXVpZGF0ZSBMUCBzZW5kIG1zZyB0byBwb29sg/hQwCRERCQgREAhVd14kEDQScakActMfAYIQDaeO+bry4IGBAQHXAIEBAdcAgQEB1wDSANQB0IEBAdcAgQEB1wCBAQHXADAQNxA2EDUQNAL2+EFvJIFLaVMroVUx2zyqAFYYoFYXoL7y9IFf8idWGL7y9IIA1OMmwAyRf5MmwA3ikX+TJsAO4vL0+EJwVHAAERwRHREcERsRHREbERoRHREaERkRHREZERgRHREYERcRHREXERYRHREWERURHREVERQRHREUERMRHRETlm0E7vhBbyQpgQEBJ1n0DW+hkjBt3yBukjBtjofQ2zxsHm8O4oF/fSFus/L0IG7y0IBvLl8DKsAKkX+TKsAL4o6eVB7cgUtpDds8qgFWH6oAoFYeoIIJ6EgAoBu+GfL0jpZUHtyBS2kN2zyqAFYfoFYeoBu+GfL04vhCtpaWfATwjtow0x8BghDjC56buvLggfpAIdcLAcMAjh0BINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiJIxbeIBgQEB1wCBAQHXANQB0IEBAdcA9AQwECUQJBAjbBXbPH/gIIIQ7wHCtLrjAiCCEB1XEAC64wKCEJRqmLa6g4SFhgKiERIRHRESERERHRERERARHREQDxEdDw4RHQ4NER0NDBEdDAsRHQsQSRBIEEcQRhBFVh3bPDD4QhESERMREhERERIREREQEREREA8REA9VDts8n6MC3lQcuoFLaQvbPKcDVh+qAKBWHqAREREiEREREBEhERAPESAPDhEfDg0RHg0MER0MCxEcCwoRGwoJERoJCBEZCAcRGAcGERcGBREWBQQRFQQDERQDAhETAgEREgERIts8AREjAaABERoBvgERGAHy9JaOAupUHLqBS2kL2zynBlYfpwOgVh6gERERIhERERARIREQDxEgDw4RHw4NER4NDBEdDAsRHAsKERsKCREaCQgRGQgHERgHBhEXBgURFgUEERUEAxEUAwIREwIBERIBESLbPAERIwGgggnoSACgAREaAb4BERgB8vSWjgT+2zxWHW6zlxEdIG7y0ICUVx34QuJ/gQEBVhYGVhYGVhYGVhsGBREkBQQRGwQDESQDAhEeAgERHchVkNs8yRIBERIBVhkBIG6VMFn0WjCUQTP0FeIEERcEED8CERYCHnAREh6AQBEXfxEXEEUQNBAjyFVw2zzJIgQQPgIREgIREYp6cXIAkoIQ/qNrcVAJyx8Xyz8VywdQAyDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFoEBAc8AgQEBzwDLPwHIgQEBzwAS9ADJAcwBlgEUQzBtbds8jQqZXhlY3V0ZSBMUCBpbmNyZWFzZSBvcmRlciBzZW5kIG1zZyB0byBwb29sg/hQwBBERBAMREANP7RCbSXpQCAUEA6kC5o0InJlY2VpdmUgdXBkYXRlIExQIHBvc2l0aW9uIHN1Y2Nlc3OD+FDD4QW8kggCg9/hCVhQBxwXy9CuBAQEoWfQNb6GSMG3fIG6SMG2Oh9DbPGwabwriIG6OFl8Ii/b3JkZXIgbm90IGV4aXN0j+FDDjDn+zdAOCIG7y0IBvKjIowAGOk1QcuoFLaQvbPKoAVh2gGb4X8vSOm1QcuoFLaQvbPKoBVh2qAKCCCehIAKAZvhfy9OIkwAGWlnUCBOMPdncD/jVfAzI1gQEBbSBukjBtjo0gbvLQgG8qyFWQ2zzJ4icQPQEgbpUwWfRaMJRBM/QV4kpTyFUgghDXLzbYUATLHxLLB4EBAc8AgQEBzwDJyIJYwAAAAAAAAAAAAAAAAQHLZ8zJcPsAIm6zjpACIG7y0IB/WHEQI21tbds8kmwh4iV6qXgB/lM0wAOXMCcgbvLQgN5WFKSBAQFyVG/zUlAREMhVQFBFgQEBzwASgQEBzwCBAQHPAMhYINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8WEoEBAc8AyQHMyQIRFwIcVhYBIG6VMFn0WjCUQTP0FeJWFBBoEFcQRhA1RAmBAQF5ASBus46JBSBu8tCAcNs8kTXiowJCC8hVkNs8yRA6FSBulTBZ9FowlEEz9BXi+CgQPBgbE9s8eqYBsFCaywdQByDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFhWBAQHPABOBAQHPAAHIgQEBzwASgQEBzwASygAibrOafwHKABKBAQHPAJUycFjKAOLIUAN7ALQgbpUwcAHLAY4eINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8W4lADIG6VMHABywGOHiDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFuLJAczJAcwDyhETESARExESER8REhERER4REREQER0REA8RHA8OERsODREaDQwRGQwLERgLChEXCgkRFgkIERUIBxEUBwYRIAYFER8FBBEeBAMRHQMCERwCVhgCERjbPFYSwAqRf5RWEsAL4uMPfX5/AJ6BXm0Bs/L0cIEBC/hCLllxQTP0Cm+hlAHXADCSW23iIG6zljEgbvLQgJEw4oIAoPf4QhPHBZF/kSDiEvL0s52CAJsXAVYSoPgju/L0kTDiAfonpIEBAXMBVhsBVh8BViIBER3IVUBQRYEBAc8AEoEBAc8AgQEBzwDIWCDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFhKBAQHPAMkBzMkQKgERGQFSkCBulTBZ9FowlEEz9BXiVhlus5cRGSBu8tCAlFcZ+ELi+EJ/KYAC6lcTVxRXFFcXVxdXF1cXVxf4QlYSbrOaMBERIG7y0IAREZJXEuKBAQFtIG6SMG2OjSBu8tCAby7IVdDbPMniAhEQAlYSASBulTBZ9FowlEEz9BXiECoBERABD8hVIIIQl7Qm6lAEyx8SyweBAQHPAIEBAc8AyaWCAvwKERUKCREhCYEBAVYhCgkRIQlWIAkIESAIBxEbBwYRGQYFERoFBBEcBAMRHAMCERwCAREZAREayFXQ2zzJAxETAxAvARERASBulTBZ9FowlEEz9BXijQRY2FuY2VsIHBlcnAgb3JkZXKD+FDD4KAgRFQgHERQHBhETBgUREgWlgQFABBERBAMREAMQLxBOEDwQSxCKEIkQaBBHFhA1RDAS2zymAo7IgljAAAAAAAAAAAAAAAABActnzMlw+wAef1AKcRAjbW1t2zz4QgUREgUEEREEAxEQA0/gEIwQaxCKEIkQWBBHEDZFQHDbPKmjBLj4QW8kK4EBASlZ9A1voZIwbd8gbpIwbY6H0Ns8bB5vDuKBf30hbrPy9CBu8tCAby4xLMAKkX+TLMAL4uMPDhESDg0REQ0MERAMVTsDER4DAhEfAgERHwFWFAERFLaHiIkBPDDTHwGCEO8BwrS68uCBgQEB1wCBAQHXANM/VSBsE5QCEDDbPGwX2zx/jI0BWI6n0x8BghCUapi2uvLggdM/ATHIAYIQr/kPV1jLH8s/yfhCAXBt2zx/4DBwkwLkAREQAVH+gUtpD9s8pwNWI6oAoFYioBERESYREREQESUREA8RJA8OESMODREiDQwRIQwLESALChEfCgkRHgkIER0IBxEcBwYRGwYFERoFBBEZBAMRGAMCERcCAREWAREV2zwBERYBoAERIgG+AREgAfL0lo4C8AEREAFR/oFLaQ/bPKcGViOnA6BWIqAREREmEREREBElERAPESQPDhEjDg0RIg0MESEMCxEgCwoRHwoJER4JCBEdCAcRHAcGERsGBREaBQQRGQQDERgDAhEXAgERFgERFds8AREWAaCCCehIAKABESIBvgERIAHy9JaOA/zbPFYebrOXER4gbvLQgJRXHvhC4n+BAQFWHgZWHgZWHgZWHgZWHgZWHgZWHgZWHgYFER4FBBEdBAIRKgIBER0BESnIVdDbPMkCERwCAREdAVLwIG6VMFn0WjCUQTP0FeIQjQcRFwcGERgGBREVBQQRFgQDERQDAhETAgEREgGKpYsAfoFebQGz8vRwgQEL+EItWXFBM/QKb6GUAdcAMJJbbeIgbrOWMSBu8tCAkTDiggCg9wHy9IFBjAFWE6D4I7zy9ALiERFwERGAQBEffxEfEHkQZxBWEEUQNBAjyFWw2zzJVhAEEDkCERYCERUBFEMwbW3bPI0LGV4ZWN1dGUgUGVycCBpbmNyZWFzZSBvcmRlciBzZW5kIG1zZyB0byBwb29sg/hQwEREQT1DeELwQmkUVUDORqQDw0x8BghAdVxAAuvLggfpAIdcLAcMAjh0BINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiJIxbeIBgQEB1wD6QAEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIAdIA1AHQgQEB1wCBAQHXAPQEMBA3EDYQNRA0A/T4QW8kVBMjgUtpBNs8pwZWGKcDoFYXoBERERsREREQERoREA8RGQ8OERgODREXDQwRFgwLERULChEUCgkREwkIERIIBxEbBwYRGgYFERkFBBEYBAMRFwMCERYCAREVAREU2zwBERUBoIIJ6EgAoAERFgG+AREUAfL0cJaOjwEY+EFvJNs8L6oAoC6glgLwgQEL+EIpWXFBM/QKb6GUAdcAMJJbbeIgbrOWMSBu8tCAkTDiggCg9wHy9PhCVhFus5owERAgbvLQgBEQklcR4lYRpIEBAXNwUwBwIfgjf234QhCaVhsKViUKViUKCAZElBEfUAcFA8hV0Ns8yQIRFAIBERIBVhMBpZAD/CBulTBZ9FowlEEz9BXicIBAf3NUczMQOgkRGAkIER0IBxEfBwYRFgYFER4FQDRwAgERHQERHBCrEHkQZxBWEEUQNBAjyFWw2zzJJQQQPQIRFQIREwEUQzBtbds8jQfbGlxdWlkYXRlIHBlcnAgc2VuZCBtc2cgdG8gcG9vbIJGpkgC6ghD/V+VXUA3LHxvLPxnLBxeBAQHPAFAFINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8WE8oAgQEBzwAByIEBAc8AEoEBAc8AEsoAEss/EoEBAc8AEvQAyQHMADj+FDAHEREHBhEQBhBfEE4QPUy6EEkQZxA2BUM0ATptbSJus5lbIG7y0IBvIgGRMuIQJHADBIBCUCPbPKkC6o0JHJlY2VpdmUgdXBkYXRlIFBlcnAgcG9zaXRpb24gc3VjY2Vzc4P4UMPhBbySCAKD3+EJWFAHHBfL0KYEBAShZ9A1voZIwbd8gbpIwbY6H0Ns8bB5vDuIgbo4WXwiL9vcmRlciBub3QgZXhpc3SP4UMOMOf7aVA6ogbvLQgG8uMizACpF/kyzAC+KOlgEREAFR/oFLaQ/bPKoAViGgHb4b8vSOngEREAFR/oFLaQ/bPKoBViGqAKCCCehIAKAdvhvy9OIowAqRf5MowAvilpaXAGRsMfpAASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4Igw+gAxcdch+gAx+gAwpwOrAAIE4w+YmQPgNl8ENDQ3KYEBASlZ9A1voZIwbd8gbpIwbY4g0IEBAdcAgQEB1wCBAQHXANQB0IEBAdcAMBRDMGwUbwTiIG6zjyYgbvLQgG8kI8IAkyLCAJFw4pJsIuMNIcIAkyDCAJFw4pNbNjDjDZMwNjDigQEBbZqbnAH8U2jAA5cwKyBu8tCA3lYYpIEBAXMBVhMBVhNSUhEUyFVAUEWBAQHPABKBAQHPAIEBAc8AyFgg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIzxYSgQEBzwDJAczJAhEbAgEREAFWGgEgbpUwWfRaMJRBM/QV4lYYEKwQmxCKpAH4gA34QnBUcABTABEbESURGxEaESQRGhEZESMRGREYESIRGBEXESERFxEWESARFhEVER8RFREUER4RFBETER0RExESERwREhERESUREREQESQREA8RIw8OESIODREhDQwRIAwLER8LChEeChB5EGhWHAhWIggGESEGBREgBZ0B/IAO+EJwVHAAUwARHREjER0RHBEiERwRGxEhERsRGhEgERoRGREfERkRGBEeERgRFxEjERcRFhEiERYRFREhERURFBEgERQRExEfERMREhEeERIREREjEREREBEiERAPESEPDhEgDg0RHw0MER4MEHsQagkRIgkQeBBXBhEiBp4D+iBukjBtjo0gbvLQgG8uyFXQ2zzJ4icQOwEgbpUwWfRaMJRBM/QV4kRTyFUgghD+zzp/UATLHxLLB4EBAc8AgQEBzwDJyIJYwAAAAAAAAAAAAAAAAQHLZ8zJcPsAIm6zjpECIG7y0IB/WAZxECNtbW3bPJIyNOIjbrORM+MNpamiAaQEESEEAxEgAwIRIQIBESABESHbPDAREREbEREREBEaERAPERkPDhEYDg0RFw0MERYMCxEVCwoRFAoJERMJCBESCAcREQcGERAGEF8QThA9TKoLnwFi2zwwERERFxERERARFhEQDxEVDw4RFA4NERMNDBESDAsREQsKERAKEJ8QjhB9EGxVVZ8B9CykLMAKkX+TLMAL4o49KbOBAQFUd2UnyFUwUDSBAQHPAIEBAc8AgQEBzwAByIEBAc8AyQHMyQIREQJWEAEgbpUwWfRaMJRBM/QV4o4RLMAMkSmZLMANkSmSKbPi4g/igQEB+CNwbW1tVhMFVhIFVhQFVhMFVhMFVhMFoALAVhMFVhwFVhAFVQPIVdDbPMkCERICVhABIG6VMFn0WjCUQTP0FeIQzRCtLhCuEJ4QjhA3BhBeBBEQBAIREB5VFchV0Ns8yciCWMAAAAAAAAAAAAAAAAEBy2fMyXD7AFUgpaEA9IIQ7iqYMVAPyx8dywcbgQEBzwBQCSDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFhfKABWBAQHPAAPIgQEBzwASgQEBzwDKABKBAQHPAALIgQEBzwATgQEBzwATgQEBzwADyIEBAc8AFIEBAc8AyVjMyQHMyQHMARIDIG7y0IBw2zyjAUD4QW8kE18DAaFWEKEvoSDCAI6KcAFyECNtbW3bPJFb4qkCYBB5EGgQVxBGEDVEDYEBAQ/IVdDbPMkQOBUgbpUwWfRaMJRBM/QV4vgoEDwWGxPbPKWmAdRQ3ssHG4EBAc8AUAkg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIzxYXygAVgQEBzwADyIEBAc8AEoEBAc8AygASgQEBzwACyIEBAc8AE8oAI26zmn8BygATgQEBzwCWM3BQA8oA4lADpwPyVhAREhEWERIREREVEREREBEUERAPERMPDhEWDg0RFQ0MERQMCxETCwoRFgoJERUJCBEUCAcREwcGERYGBREVBQQRFAQDERMDAhEWAgERFQERFHARFIBAERhwERjbPAQRFAQDERMDAhEWAgERFQEUQzBtbds8DRERDaipqgC+IG6VMHABywGOHiDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFuLIUAQgbpUwcAHLAY4eINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8W4slQA8zJWMzJAcwAtsiCEA+KfqUByh8Uyj9Y+gIBINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8WASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFnABygBw+gLIydDPFskByshxAcoBUAcBygBwAcoCUAUg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIzxZQA/oCcAHKaCNus5F/kyRus+KXMzMBcAHKAOMNIW6znH8BygABIG7y0IABzJUxcAHKAOLJAfsAqwAMDBEQDFU7AJh/AcoAyHABygBwAcoAJG6znX8BygAEIG7y0IBQBMyWNANwAcoA4iRus51/AcoABCBu8tCAUATMljQDcAHKAOJwAcoAAn8BygACyVjMAgEgrq8CAWK5ugIBZrCxAhm1B1tnm2eK4gvh7YQwv7gCaKmb2zwRERESEREREBERERAPERAPVQ7bPFcQXw9sISBukjBtmSBu8tCAbypvCuIgbpIwbd6/sgJoqvLbPBERERIREREQEREREA8REA9VDts8VxBfD2whIG6SMG2ZIG7y0IBvLm8O4iBukjBt3r+1ATqBAQEmAln0DW+hkjBt3yBukjBtjofQ2zxsGm8K4rMB7tMH+kABINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiAGBAQHXAIEBAdcA1AHQgQEB1wCBAQHXANIA0gABlYEBAdcAkm0B4tQw0PpAIdcLAcMAjh0BINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiJIxbeIBtABo+kAh1wsBwwCOHQEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIkjFt4jEQahBpEGgQZwE6gQEBJAJZ9A1voZIwbd8gbpIwbY6H0Ns8bB5vDuK2AbLTB4EBAdcA+kABINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiAHSAIEBAdcA1AHQgQEB1wCBAQHXANIAgQEB1wDUMNCBAQHXANIA0gABlYEBAdcAkm0B4rcAyvpAIdcLAcMAjh0BINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiJIxbeIB1DDQ+kAh1wsBwwCOHQEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIkjFt4jEQnhCdEJwQmxCaAAIjAgEgu7wCGa6QbZ5tniuIL4e2EMC/wAKAquEgbpIwbY4cINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiOLbPBERERIREREQEREREA8REA9VDts8bIhsqL+9AhipHds82zxXEF8PbCG/vgBmbSFus44cMIEBCwEgbvLQgCtZcUEz9ApvoZQB1wAwkltt4pEx4lYSVhJWElYSVhJWElYSAAIqAmTtRNDUAfhj0gABjpDbPFcSERAREREQDxEQD1UO4Pgo1wsKgwm68uCJgQEB1wABAdHbPMHCAAIgAb6BAQHXAIEBAdcAgQEB1wDUAdCBAQHXAIEBAdcA+kABINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiAHUMND6QAEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIAcMB3DCBBwiBALSCEAX14QCCCvrwgIIJycOAbW1xbSFtIW1tIvhCgQEL+EJ/JBBOIW6VW1n0WTCYyAHPAEEz9EHicCDIcgHLAXABywASygfL/8nQINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiHAgxACI+kABINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiAH0BPQE0z/0BNM/1DDQ9ATTP/QE9ATTPzAPERIPDxERDw8REA8AaMhyAcsBcAHLABLKB8v/ydAg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIUMtJqEZ1QEM=","abi":"{\"name\":\"OrderBook\",\"types\":[{\"name\":\"StateInit\",\"header\":null,\"fields\":[{\"name\":\"code\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"data\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}}]},{\"name\":\"Context\",\"header\":null,\"fields\":[{\"name\":\"bounced\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"sender\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"raw\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false}}]},{\"name\":\"SendParameters\",\"header\":null,\"fields\":[{\"name\":\"bounce\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"to\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"mode\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"body\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"code\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"data\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"Deploy\",\"header\":2490013878,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"DeployOk\",\"header\":2952335191,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"FactoryDeploy\",\"header\":1829761339,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"cashback\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"ChangeOwner\",\"header\":2174598809,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"newOwner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"ChangeOwnerOk\",\"header\":846932810,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"newOwner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"TokenNotification\",\"header\":1935855772,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"from\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"forwardPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false,\"format\":\"remainder\"}}]},{\"name\":\"TokenExcesses\",\"header\":3576854235,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"UpdateConfig\",\"header\":1843397758,\"fields\":[{\"name\":\"executor\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"enableExecutor\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":true}},{\"name\":\"maxTimeDelayExecutor\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"minTimeDelayTrader\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"minExecutionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"gasConsumption\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"minTonsForStorage\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"usdtWallet\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"pool\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"CreateDecreaseRBFPositionOrder\",\"header\":2702271213,\"fields\":[{\"name\":\"executionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"liquidityDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"CancelRBFPositionOrder\",\"header\":3161392643,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}}]},{\"name\":\"ExecuteRBFPositionOrder\",\"header\":636249025,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"pricesLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"prices\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"UpdatePrice\",\"valueFormat\":\"ref\"}}]},{\"name\":\"UpdateRBFPosition\",\"header\":3902592095,\"fields\":[{\"name\":\"isIncrease\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"liquidityDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"pricesLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"prices\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"UpdatePrice\",\"valueFormat\":\"ref\"}}]},{\"name\":\"UpdateRBFPositionSuccess\",\"header\":485543809,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"receive\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"CompensateRBFPositionOrder\",\"header\":167321554,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"needRefund\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"isExecute\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"pricesLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"prices\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"UpdatePrice\",\"valueFormat\":\"ref\"}}]},{\"name\":\"CreateDecreaseLPPositionOrder\",\"header\":1912782205,\"fields\":[{\"name\":\"executionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"marginDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"liquidityDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"CancelLPPositionOrder\",\"header\":1477803963,\"fields\":[{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"ExecuteLPPositionOrder\",\"header\":3500233221,\"fields\":[{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"pricesLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"prices\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"UpdatePrice\",\"valueFormat\":\"ref\"}}]},{\"name\":\"LiquidateLPPositionOrder\",\"header\":1675438247,\"fields\":[{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"pricesLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"prices\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"UpdatePrice\",\"valueFormat\":\"ref\"}}]},{\"name\":\"UpdateLPPosition\",\"header\":4272122737,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"marginDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"liquidityDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"pricesLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"prices\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"UpdatePrice\",\"valueFormat\":\"ref\"}}]},{\"name\":\"UpdateLPPositionSuccess\",\"header\":1233766337,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"receive\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"CompensateLPPositionOrder\",\"header\":3086175268,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"needRefund\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"isExecute\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}}]},{\"name\":\"CreateDecreasePerpPositionOrder\",\"header\":229084921,\"fields\":[{\"name\":\"executionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"tokenId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"isLong\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"marginDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"sizeDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"triggerPrice\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"CancelPerpPositionOrder\",\"header\":4187297011,\"fields\":[{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"ExecutePerpPositionOrder\",\"header\":3809189531,\"fields\":[{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"pricesLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"prices\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"UpdatePrice\",\"valueFormat\":\"ref\"}}]},{\"name\":\"LiquidateOrADLPerpPosition\",\"header\":492244992,\"fields\":[{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"tokenId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"isLong\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"pricesLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"prices\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"UpdatePrice\",\"valueFormat\":\"ref\"}}]},{\"name\":\"UpdatePerpPosition\",\"header\":4283950423,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"tokenId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"isLong\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"marginDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"sizeDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"triggerPrice\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"triggerAbove\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"pricesLength\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"prices\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"UpdatePrice\",\"valueFormat\":\"ref\"}}]},{\"name\":\"UpdatePerpPositionSuccess\",\"header\":4009870004,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"receive\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"CompensatePerpPositionOrder\",\"header\":1214351731,\"fields\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"needRefund\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"isExecute\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}}]},{\"name\":\"RBFPositionOrderCreatedEvent\",\"header\":1507952113,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"liquidityDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"executionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"RBFPositionOrderCancelledEvent\",\"header\":2552423338,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"RBFPositionOrderExecutedEvent\",\"header\":1350653125,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"LPPositionOrderCreatedEvent\",\"header\":3912257011,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"marginDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"liquidityDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"executionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"LPPositionOrderCancelledEvent\",\"header\":275376848,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"LPPositionOrderExecutedEvent\",\"header\":3610195672,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"PerpPositionOrderCreatedEvent\",\"header\":3995768881,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"tokenId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"isLong\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"marginDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"sizeDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"triggerPrice\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"triggerAbove\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"tpSize\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"tpPrice\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"slSize\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"slPrice\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"executionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"PerpPositionOrderCancelledEvent\",\"header\":2545166058,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"PerpPositionOrderExecutedEvent\",\"header\":4274993791,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"ConfigData\",\"header\":null,\"fields\":[{\"name\":\"isExecutor\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":true}},{\"name\":\"maxTimeDelayExecutor\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"minTimeDelayTrader\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"minExecutionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"gasConsumption\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"minTonsForStorage\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"usdtWallet\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"pool\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"JettonCallback\",\"header\":null,\"fields\":[{\"name\":\"orderType\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"receiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"trxId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"RBFPositionOrder\",\"header\":null,\"fields\":[{\"name\":\"isIncrease\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"liquidityDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"executionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"blockTime\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"isPending\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"callbackId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}},{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"lastOperator\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}}]},{\"name\":\"LPPositionOrder\",\"header\":null,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"marginDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"liquidityDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"executionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"blockTime\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"isPending\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"callbackId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}},{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"lastOperator\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}}]},{\"name\":\"PerpPositionOrder\",\"header\":null,\"fields\":[{\"name\":\"opType\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"tokenId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"account\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"isLong\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"marginDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"sizeDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"triggerPrice\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"triggerAbove\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"executionFee\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"blockTime\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"isPending\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"callbackId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}},{\"name\":\"executionFeeReceiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"lastOperator\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}}]},{\"name\":\"PerpPositionOrderEx\",\"header\":null,\"fields\":[{\"name\":\"tpSize\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"tpPrice\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"slSize\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"slPrice\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"UpdatePrice\",\"header\":null,\"fields\":[{\"name\":\"tokenId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"price\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]}],\"receivers\":[{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"UpdateConfig\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"TokenNotification\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"TokenExcesses\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"CreateDecreaseRBFPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"CancelRBFPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"ExecuteRBFPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"UpdateRBFPositionSuccess\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"CreateDecreaseLPPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"CancelLPPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"ExecuteLPPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"UpdateLPPositionSuccess\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"LiquidateLPPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"CreateDecreasePerpPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"CancelPerpPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"ExecutePerpPositionOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"UpdatePerpPositionSuccess\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"LiquidateOrADLPerpPosition\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"Deploy\"}}],\"getters\":[{\"name\":\"configData\",\"arguments\":[{\"name\":\"executor\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}}],\"returnType\":{\"kind\":\"simple\",\"type\":\"ConfigData\",\"optional\":false}},{\"name\":\"rbfPositionOrder\",\"arguments\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}],\"returnType\":{\"kind\":\"simple\",\"type\":\"RBFPositionOrder\",\"optional\":true}},{\"name\":\"rbfPositionOrderIndexNext\",\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"lpPositionOrder\",\"arguments\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}],\"returnType\":{\"kind\":\"simple\",\"type\":\"LPPositionOrder\",\"optional\":true}},{\"name\":\"lpPositionOrderIndexNext\",\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"perpPositionOrder\",\"arguments\":[{\"name\":\"orderId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}],\"returnType\":{\"kind\":\"simple\",\"type\":\"PerpPositionOrder\",\"optional\":true}},{\"name\":\"perpPositionOrderIndexNext\",\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"owner\",\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}],\"errors\":{\"2\":{\"message\":\"Stack undeflow\"},\"3\":{\"message\":\"Stack overflow\"},\"4\":{\"message\":\"Integer overflow\"},\"5\":{\"message\":\"Integer out of expected range\"},\"6\":{\"message\":\"Invalid opcode\"},\"7\":{\"message\":\"Type check error\"},\"8\":{\"message\":\"Cell overflow\"},\"9\":{\"message\":\"Cell underflow\"},\"10\":{\"message\":\"Dictionary error\"},\"13\":{\"message\":\"Out of gas error\"},\"32\":{\"message\":\"Method ID not found\"},\"34\":{\"message\":\"Action is invalid or not supported\"},\"37\":{\"message\":\"Not enough TON\"},\"38\":{\"message\":\"Not enough extra-currencies\"},\"128\":{\"message\":\"Null reference exception\"},\"129\":{\"message\":\"Invalid serialization prefix\"},\"130\":{\"message\":\"Invalid incoming message\"},\"131\":{\"message\":\"Constraints error\"},\"132\":{\"message\":\"Access denied\"},\"133\":{\"message\":\"Contract stopped\"},\"134\":{\"message\":\"Invalid argument\"},\"135\":{\"message\":\"Code of a contract was not found\"},\"136\":{\"message\":\"Invalid address\"},\"137\":{\"message\":\"Masterchain support is not enabled for this contract\"},\"16780\":{\"message\":\"order expired\"},\"19305\":{\"message\":\"gas not enough\"},\"24173\":{\"message\":\"order is pending\"},\"24562\":{\"message\":\"execution fee not enough\"},\"32637\":{\"message\":\"order not exist\"},\"39703\":{\"message\":\"too early\"},\"41207\":{\"message\":\"invalid sender\"},\"54499\":{\"message\":\"invalid op type\"}},\"interfaces\":[\"org.ton.introspection.v0\",\"org.ton.abi.ipfs.v0\",\"org.ton.deploy.lazy.v0\",\"org.ton.debug.v0\",\"org.ton.chain.workchain.v0\",\"org.ton.ownable\"]}","init":{"kind":"direct","args":[{"name":"deployId","type":{"kind":"simple","type":"int","optional":false,"format":257}}],"prefix":{"bits":1,"value":0},"deployment":{"kind":"system-cell","system":"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ERYGBREVBQQRFAQDERMDAhEWAgERFQERFHARFIBAERhwERjbPAQRFAQDERMDAhEWAgERFQEUQzBtbds8DRERDairpAAMDBEQDFU7AGRsMfpAASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4Igw+gAxcdch+gAx+gAwpwOrAAP8MPhCERERFRERERARFBEQDxETDw4REg4NERUNDBEUDAsREwsKERIKCREVCQgRFAgHERMHBhESBgURFQUEERQEAxETAwIREgIBERUBERRwERSAQBEUVhdwERnbPAQRFQQDERQDAhETAgERFgEUQzBtbds8DRERDQwREAwQvxCuqKunAAgQnVU4ALbIghAPin6lAcofFMo/WPoCASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFgEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIzxZwAcoAcPoCyMnQzxbJBPYREREaEREREBEZERAPERgPDhEXDg0RFg0MERUMCxEUCwoREwoJERIJCBEaCAcRGQcGERgGBREXBQQRFgQDERUDAhEUAgEREwEREts8Ozs7Ozs7O1YTbrOUVhJus5Fw4pRXElcS4w34QnBwgEAQI21tbds8DxERDw4REA6urauqACIQ3xDOEL0QrAkLCAZEpBcVEwHKyHEBygFQBwHKAHABygJQBSDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFlAD+gJwAcpoI26zkX+TJG6z4pczMwFwAcoA4w0hbrOcfwHKAAEgbvLQgAHMlTFwAcoA4skB+wCsAJh/AcoAyHABygBwAcoAJG6znX8BygAEIG7y0IBQBMyWNANwAcoA4iRus51/AcoABCBu8tCAUATMljQDcAHKAOJwAcoAAn8BygACyVjMAFiBAQsRFCBu8tCAERMgbvLQgAIRFAIBERMBcSFulVtZ9FkwmMgBzwBBM/RB4gAS+EJSsMcF8uCEAcTTHwGCEG3gBH668uCB+kAh1wsBwwCOHQEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIkjFt4gHSAAGS0gCSbQHigQEB1wCBAQHXANQB0IEBAdcAgQEB1wCBAQHXANQw0LAAkPpAASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IgB+kABINdJgQELuvLgiCDXCwoggQT/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"}},"sources":{"contracts/order/messages.tact":"aW1wb3J0ICIuL3N0cnVjdHMiOwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBKRVRUT04gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KCm1lc3NhZ2UoMHg3MzYyZDA5YykgVG9rZW5Ob3RpZmljYXRpb24gewogICAgcXVlcnlJZDogSW50IGFzIHVpbnQ2NDsKICAgIGFtb3VudDogSW50IGFzIGNvaW5zOwogICAgZnJvbTogQWRkcmVzczsKICAgIGZvcndhcmRQYXlsb2FkOiBTbGljZSBhcyByZW1haW5pbmc7IC8vIENvbW1lbnQgVGV4dCBtZXNzYWdlIHdoZW4gVHJhbnNmZXIgdGhlIGpldHRvbiAKfQoKbWVzc2FnZSgweGQ1MzI3NmRiKSBUb2tlbkV4Y2Vzc2VzIHsKICAgIHF1ZXJ5SWQ6IEludCBhcyB1aW50NjQ7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gYWRtaW4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KbWVzc2FnZSBVcGRhdGVDb25maWcgewogICAgZXhlY3V0b3I6IEFkZHJlc3M/OwogICAgZW5hYmxlRXhlY3V0b3I6IEJvb2w/OwogICAgbWF4VGltZURlbGF5RXhlY3V0b3I6IEludDsKICAgIG1pblRpbWVEZWxheVRyYWRlcjogSW50OwogICAgbWluRXhlY3V0aW9uRmVlOiBJbnQ7CiAgICBnYXNDb25zdW1wdGlvbjogSW50OwogICAgbWluVG9uc0ZvclN0b3JhZ2U6IEludDsKICAgIHVzZHRXYWxsZXQ6IEFkZHJlc3M7CiAgICBwb29sOiBBZGRyZXNzOwp9CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IFJCRiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwptZXNzYWdlIENyZWF0ZURlY3JlYXNlUkJGUG9zaXRpb25PcmRlciB7CiAgICBleGVjdXRpb25GZWU6IEludDsKICAgIGxpcXVpZGl0eURlbHRhOiBJbnQ7Cn0KCm1lc3NhZ2UgQ2FuY2VsUkJGUG9zaXRpb25PcmRlciB7CiAgICBvcmRlcklkOiBJbnQ7CiAgICB0cnhJZDogSW50OwogICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3M/Owp9CgptZXNzYWdlIEV4ZWN1dGVSQkZQb3NpdGlvbk9yZGVyIHsKICAgIG9yZGVySWQ6IEludDsKICAgIHRyeElkOiBJbnQ7CiAgICBleGVjdXRpb25GZWVSZWNlaXZlcjogQWRkcmVzcz87CiAgICBwcmljZXNMZW5ndGg6IEludDsKICAgIHByaWNlczogbWFwPEludCwgVXBkYXRlUHJpY2U+Owp9CgptZXNzYWdlKDB4ZTg5Y2Q0NWYpIFVwZGF0ZVJCRlBvc2l0aW9uIHsKICAgIGlzSW5jcmVhc2U6IEJvb2w7CiAgICBvcmRlcklkOiBJbnQgYXMgdWludDY0OwogICAgYWNjb3VudDogQWRkcmVzczsKICAgIGxpcXVpZGl0eURlbHRhOiBJbnQ7CiAgICB0cnhJZDogSW50IGFzIHVpbnQ2NDsKICAgIHByaWNlc0xlbmd0aDogSW50OwogICAgcHJpY2VzOiBtYXA8SW50LCBVcGRhdGVQcmljZT47Cn0KCm1lc3NhZ2UoMHgxY2YwY2Y4MSkgVXBkYXRlUkJGUG9zaXRpb25TdWNjZXNzIHsKICAgIG9yZGVySWQ6IEludDsKICAgIHJlY2VpdmU6IEludDsKICAgIHRyeElkOiBJbnQgYXMgdWludDY0Owp9CgptZXNzYWdlIENvbXBlbnNhdGVSQkZQb3NpdGlvbk9yZGVyIHsKICAgIG9yZGVySWQ6IEludDsKICAgIHRyeElkOiBJbnQ7CiAgICBuZWVkUmVmdW5kOiBCb29sOwogICAgaXNFeGVjdXRlOiBCb29sOwogICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3M/OwogICAgcHJpY2VzTGVuZ3RoOiBJbnQ7CiAgICBwcmljZXM6IG1hcDxJbnQsIFVwZGF0ZVByaWNlPjsKfQovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IExQID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCm1lc3NhZ2UgQ3JlYXRlRGVjcmVhc2VMUFBvc2l0aW9uT3JkZXIgewogICAgZXhlY3V0aW9uRmVlOiBJbnQ7CiAgICBtYXJnaW5EZWx0YTogSW50OwogICAgbGlxdWlkaXR5RGVsdGE6IEludDsKfQoKbWVzc2FnZSBDYW5jZWxMUFBvc2l0aW9uT3JkZXIgewogICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3M/OwogICAgb3JkZXJJZDogSW50OwogICAgdHJ4SWQ6IEludDsKfQoKbWVzc2FnZSBFeGVjdXRlTFBQb3NpdGlvbk9yZGVyIHsKICAgIGV4ZWN1dGlvbkZlZVJlY2VpdmVyOiBBZGRyZXNzPzsKICAgIG9yZGVySWQ6IEludDsKICAgIHRyeElkOiBJbnQ7CiAgICBwcmljZXNMZW5ndGg6IEludDsKICAgIHByaWNlczogbWFwPEludCwgVXBkYXRlUHJpY2U+Owp9CgptZXNzYWdlIExpcXVpZGF0ZUxQUG9zaXRpb25PcmRlciB7CiAgICBleGVjdXRpb25GZWVSZWNlaXZlcjogQWRkcmVzcz87CiAgICBhY2NvdW50OiBBZGRyZXNzOwogICAgdHJ4SWQ6IEludDsKICAgIHByaWNlc0xlbmd0aDogSW50OwogICAgcHJpY2VzOiBtYXA8SW50LCBVcGRhdGVQcmljZT47Cn0KCm1lc3NhZ2UoMHhmZWEzNmI3MSkgVXBkYXRlTFBQb3NpdGlvbiB7CiAgICBvcmRlcklkOiBJbnQgYXMgdWludDY0OwogICAgb3BUeXBlOiBJbnQgYXMgdWludDg7CiAgICBhY2NvdW50OiBBZGRyZXNzOwogICAgbWFyZ2luRGVsdGE6IEludDsKICAgIGxpcXVpZGl0eURlbHRhOiBJbnQ7CiAgICB0cnhJZDogSW50IGFzIHVpbnQ2NDsKICAgIHByaWNlc0xlbmd0aDogSW50OwogICAgcHJpY2VzOiBtYXA8SW50LCBVcGRhdGVQcmljZT47Cn0KCm1lc3NhZ2UoMHg0OTg5YzdjMSkgVXBkYXRlTFBQb3NpdGlvblN1Y2Nlc3MgewogICAgb3JkZXJJZDogSW50OwogICAgcmVjZWl2ZTogSW50OwogICAgdHJ4SWQ6IEludCBhcyB1aW50NjQ7Cn0KCm1lc3NhZ2UgQ29tcGVuc2F0ZUxQUG9zaXRpb25PcmRlciB7CiAgICBvcmRlcklkOiBJbnQ7CiAgICB0cnhJZDogSW50OwogICAgbmVlZFJlZnVuZDogQm9vbDsKICAgIGlzRXhlY3V0ZTogQm9vbDsKICAgIGV4ZWN1dGlvbkZlZVJlY2VpdmVyOiBBZGRyZXNzPzsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBQZXJwID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCm1lc3NhZ2UgQ3JlYXRlRGVjcmVhc2VQZXJwUG9zaXRpb25PcmRlciB7CiAgICBleGVjdXRpb25GZWU6IEludDsKICAgIG9wVHlwZTogSW50OwogICAgdG9rZW5JZDogSW50OwogICAgaXNMb25nOiBCb29sOwogICAgbWFyZ2luRGVsdGE6IEludDsKICAgIHNpemVEZWx0YTogSW50OwogICAgdHJpZ2dlclByaWNlOiBJbnQ7Cn0KCm1lc3NhZ2UgQ2FuY2VsUGVycFBvc2l0aW9uT3JkZXIgewogICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3M/OwogICAgb3JkZXJJZDogSW50OwogICAgdHJ4SWQ6IEludDsKfQoKbWVzc2FnZSBFeGVjdXRlUGVycFBvc2l0aW9uT3JkZXIgewogICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3M/OwogICAgb3JkZXJJZDogSW50OwogICAgdHJ4SWQ6IEludDsKICAgIHByaWNlc0xlbmd0aDogSW50OwogICAgcHJpY2VzOiBtYXA8SW50LCBVcGRhdGVQcmljZT47Cn0KCm1lc3NhZ2UgTGlxdWlkYXRlT3JBRExQZXJwUG9zaXRpb24gewogICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3M/OwogICAgdG9rZW5JZDogSW50OwogICAgYWNjb3VudDogQWRkcmVzczsKICAgIGlzTG9uZzogQm9vbDsKICAgIC8vIGFkbFNpemU6IEludDsKICAgIHRyeElkOiBJbnQ7CiAgICBwcmljZXNMZW5ndGg6IEludDsKICAgIHByaWNlczogbWFwPEludCwgVXBkYXRlUHJpY2U+Owp9CgptZXNzYWdlKDB4ZmY1N2U1NTcpIFVwZGF0ZVBlcnBQb3NpdGlvbiB7CiAgICBvcmRlcklkOiBJbnQgYXMgdWludDY0OwogICAgb3BUeXBlOiBJbnQgYXMgdWludDg7CiAgICB0b2tlbklkOiBJbnQ7CiAgICBhY2NvdW50OiBBZGRyZXNzOwogICAgaXNMb25nOiBCb29sOwogICAgbWFyZ2luRGVsdGE6IEludDsKICAgIHNpemVEZWx0YTogSW50OwogICAgdHJpZ2dlclByaWNlOiBJbnQ7CiAgICB0cmlnZ2VyQWJvdmU6IEJvb2w7CiAgICB0cnhJZDogSW50IGFzIHVpbnQ2NDsKICAgIHByaWNlc0xlbmd0aDogSW50OwogICAgcHJpY2VzOiBtYXA8SW50LCBVcGRhdGVQcmljZT47Cn0KCm1lc3NhZ2UoMHhlZjAxYzJiNCkgVXBkYXRlUGVycFBvc2l0aW9uU3VjY2VzcyB7CiAgICBvcmRlcklkOiBJbnQ7CiAgICByZWNlaXZlOiBJbnQ7CiAgICB0cnhJZDogSW50IGFzIHVpbnQ2NDsKfQoKbWVzc2FnZSBDb21wZW5zYXRlUGVycFBvc2l0aW9uT3JkZXIgewogICAgb3JkZXJJZDogSW50OwogICAgdHJ4SWQ6IEludDsKICAgIG5lZWRSZWZ1bmQ6IEJvb2w7CiAgICBpc0V4ZWN1dGU6IEJvb2w7CiAgICBleGVjdXRpb25GZWVSZWNlaXZlcjogQWRkcmVzcz87Cn0=","contracts/order/events.tact":"Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBSQkYgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KLy8gaW5jcmVhc2UgUkJGCm1lc3NhZ2UgUkJGUG9zaXRpb25PcmRlckNyZWF0ZWRFdmVudCB7CiAgICBvcFR5cGU6IEludCBhcyB1aW50ODsKICAgIGFjY291bnQ6IEFkZHJlc3M7CiAgICBsaXF1aWRpdHlEZWx0YTogSW50OwogICAgZXhlY3V0aW9uRmVlOiBJbnQ7CiAgICBvcmRlcklkOiBJbnQ7Cn0KCm1lc3NhZ2UgUkJGUG9zaXRpb25PcmRlckNhbmNlbGxlZEV2ZW50IHsKICAgIG9wVHlwZTogSW50IGFzIHVpbnQ4OwogICAgb3JkZXJJZDogSW50OwogICAgdHJ4SWQ6IEludDsKfQoKbWVzc2FnZSBSQkZQb3NpdGlvbk9yZGVyRXhlY3V0ZWRFdmVudCB7CiAgICBvcFR5cGU6IEludCBhcyB1aW50ODsKICAgIG9yZGVySWQ6IEludDsKICAgIHRyeElkOiBJbnQ7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gTFAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KbWVzc2FnZSBMUFBvc2l0aW9uT3JkZXJDcmVhdGVkRXZlbnQgewogICAgb3BUeXBlOiBJbnQgYXMgdWludDg7CiAgICBhY2NvdW50OiBBZGRyZXNzOwogICAgbWFyZ2luRGVsdGE6IEludDsKICAgIGxpcXVpZGl0eURlbHRhOiBJbnQ7CiAgICBleGVjdXRpb25GZWU6IEludDsKICAgIG9yZGVySWQ6IEludDsKfQoKbWVzc2FnZSBMUFBvc2l0aW9uT3JkZXJDYW5jZWxsZWRFdmVudCB7CiAgICBvcFR5cGU6IEludCBhcyB1aW50ODsKICAgIG9yZGVySWQ6IEludDsKICAgIHRyeElkOiBJbnQ7Cn0KCm1lc3NhZ2UgTFBQb3NpdGlvbk9yZGVyRXhlY3V0ZWRFdmVudCB7CiAgICBvcFR5cGU6IEludCBhcyB1aW50ODsKICAgIG9yZGVySWQ6IEludDsKICAgIHRyeElkOiBJbnQ7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gUGVycCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwptZXNzYWdlIFBlcnBQb3NpdGlvbk9yZGVyQ3JlYXRlZEV2ZW50IHsKICAgIG9wVHlwZTogSW50IGFzIHVpbnQ4OwogICAgdG9rZW5JZDogSW50OwogICAgYWNjb3VudDogQWRkcmVzczsKICAgIGlzTG9uZzogQm9vbDsKICAgIG1hcmdpbkRlbHRhOiBJbnQ7CiAgICBzaXplRGVsdGE6IEludDsKICAgIHRyaWdnZXJQcmljZTogSW50OwogICAgdHJpZ2dlckFib3ZlOiBCb29sOwogICAgdHBTaXplOiBJbnQ7CiAgICB0cFByaWNlOiBJbnQ7CiAgICBzbFNpemU6IEludDsKICAgIHNsUHJpY2U6IEludDsKICAgIGV4ZWN1dGlvbkZlZTogSW50OwogICAgb3JkZXJJZDogSW50Owp9CgptZXNzYWdlIFBlcnBQb3NpdGlvbk9yZGVyQ2FuY2VsbGVkRXZlbnQgewogICAgb3BUeXBlOiBJbnQgYXMgdWludDg7CiAgICBvcmRlcklkOiBJbnQ7CiAgICB0cnhJZDogSW50Owp9CgptZXNzYWdlIFBlcnBQb3NpdGlvbk9yZGVyRXhlY3V0ZWRFdmVudCB7CiAgICBvcFR5cGU6IEludCBhcyB1aW50ODsKICAgIG9yZGVySWQ6IEludDsKICAgIHRyeElkOiBJbnQ7Cn0=","contracts/order/structs.tact":"Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBDb25maWcgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KLy8gc3RydWN0IFRva2VuQ29uZmlnIHsKLy8gICAgIG5hbWU6IFN0cmluZzsKLy8gICAgIGVuYWJsZTogQm9vbDsKLy8gfQoKc3RydWN0IENvbmZpZ0RhdGEgewogICAgaXNFeGVjdXRvcjogQm9vbD87CiAgICBtYXhUaW1lRGVsYXlFeGVjdXRvcjogSW50OwogICAgbWluVGltZURlbGF5VHJhZGVyOiBJbnQ7CiAgICBtaW5FeGVjdXRpb25GZWU6IEludDsKICAgIGdhc0NvbnN1bXB0aW9uOiBJbnQ7CiAgICBtaW5Ub25zRm9yU3RvcmFnZTogSW50OwogICAgdXNkdFdhbGxldDogQWRkcmVzczsKICAgIHBvb2w6IEFkZHJlc3M7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQ2FsbGJhY2sgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8Kc3RydWN0IEpldHRvbkNhbGxiYWNrIHsKICAgIG9yZGVyVHlwZTogSW50OwogICAgb3JkZXJJZDogSW50OwogICAgYW1vdW50OiBJbnQ7CiAgICByZWNlaXZlcjogQWRkcmVzczsKICAgIHRyeElkOiBJbnQ7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gUkJGID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCnN0cnVjdCBSQkZQb3NpdGlvbk9yZGVyIHsKICAgIGlzSW5jcmVhc2U6IEJvb2w7CiAgICBhY2NvdW50OiBBZGRyZXNzOwogICAgbGlxdWlkaXR5RGVsdGE6IEludDsKICAgIGV4ZWN1dGlvbkZlZTogSW50OwogICAgYmxvY2tUaW1lOiBJbnQ7CiAgICBpc1BlbmRpbmc6IEJvb2w7CiAgICBjYWxsYmFja0lkOiBJbnQ/OwogICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3M/OwogICAgbGFzdE9wZXJhdG9yOiBBZGRyZXNzPzsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBMUCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwpzdHJ1Y3QgTFBQb3NpdGlvbk9yZGVyIHsKICAgIG9wVHlwZTogSW50IGFzIHVpbnQ4OwogICAgYWNjb3VudDogQWRkcmVzczsKICAgIG1hcmdpbkRlbHRhOiBJbnQ7CiAgICBsaXF1aWRpdHlEZWx0YTogSW50OwogICAgZXhlY3V0aW9uRmVlOiBJbnQ7CiAgICBibG9ja1RpbWU6IEludDsKICAgIGlzUGVuZGluZzogQm9vbDsKICAgIGNhbGxiYWNrSWQ6IEludD87CiAgICBleGVjdXRpb25GZWVSZWNlaXZlcjogQWRkcmVzcz87CiAgICBsYXN0T3BlcmF0b3I6IEFkZHJlc3M/Owp9CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IFBlcnAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8Kc3RydWN0IFBlcnBQb3NpdGlvbk9yZGVyIHsKICAgIG9wVHlwZTogSW50IGFzIHVpbnQ4OwogICAgdG9rZW5JZDogSW50OwogICAgYWNjb3VudDogQWRkcmVzczsKICAgIGlzTG9uZzogQm9vbDsKICAgIG1hcmdpbkRlbHRhOiBJbnQ7CiAgICBzaXplRGVsdGE6IEludDsKICAgIHRyaWdnZXJQcmljZTogSW50OwogICAgdHJpZ2dlckFib3ZlOiBCb29sOwogICAgZXhlY3V0aW9uRmVlOiBJbnQ7CiAgICBibG9ja1RpbWU6IEludDsKICAgIGlzUGVuZGluZzogQm9vbDsKICAgIGNhbGxiYWNrSWQ6IEludD87CiAgICBleGVjdXRpb25GZWVSZWNlaXZlcjogQWRkcmVzcz87CiAgICBsYXN0T3BlcmF0b3I6IEFkZHJlc3M/Owp9CgpzdHJ1Y3QgUGVycFBvc2l0aW9uT3JkZXJFeCB7CiAgICB0cFNpemU6IEludDsKICAgIHRwUHJpY2U6IEludDsKICAgIHNsU2l6ZTogSW50OwogICAgc2xQcmljZTogSW50Owp9CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IFByaWNlID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCnN0cnVjdCBVcGRhdGVQcmljZSB7CiAgICB0b2tlbklkOiBJbnQ7CiAgICBwcmljZTogSW50Owp9Cg==","contracts/order/constants.tact":"Y29uc3QgT1BfQ1JFQVRFX0lOQ1JFQVNFX1JCRl9QT1NJVElPTl9PUkRFUjogSW50ID0gMTsKY29uc3QgT1BfQ1JFQVRFX0lOQ1JFQVNFX0xQX1BPU0lUSU9OX09SREVSOiBJbnQgPSAyOwpjb25zdCBPUF9DUkVBVEVfSU5DUkVBU0VfUEVSUF9QT1NJVElPTl9PUkRFUjogSW50ID0gMzsKCmNvbnN0IE9QX0NBTkNFTF9JTkNSRUFTRV9SQkZfUE9TSVRJT05fT1JERVI6IEludCA9IDEwOwpjb25zdCBPUF9DQU5DRUxfREVDUkVBU0VfUkJGX1BPU0lUSU9OX09SREVSOiBJbnQgPSAxMTsKY29uc3QgT1BfQ0FOQ0VMX0lOQ1JFQVNFX0xQX1BPU0lUSU9OX09SREVSOiBJbnQgPSAxMjsKY29uc3QgT1BfQ0FOQ0VMX0RFQ1JFQVNFX0xQX1BPU0lUSU9OX09SREVSOiBJbnQgPSAxMzsKCmNvbnN0IE9SREVSX1RZUEVfUkJGOiBJbnQgPSAxOwpjb25zdCBPUkRFUl9UWVBFX0xQOiBJbnQgPSAyOwpjb25zdCBPUkRFUl9UWVBFX1BFUlA6IEludCA9IDM7Cgpjb25zdCBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFOiBJbnQgPSAxOwpjb25zdCBPUkRFUl9PUF9UWVBFX0RFQ1JFQVNFOiBJbnQgPSAyOwpjb25zdCBPUkRFUl9PUF9UWVBFX0xJUVVJREFUSU9OOiBJbnQgPSAzOwpjb25zdCBPUkRFUl9PUF9UWVBFX0FETDogSW50ID0gNDsKCmNvbnN0IE9SREVSX09QX1RZUEVfSU5DUkVBU0VfTUFSS0VUOiBJbnQgPSAxMDsKY29uc3QgT1JERVJfT1BfVFlQRV9JTkNSRUFTRV9MSU1JVDogSW50ID0gMTE7CmNvbnN0IE9SREVSX09QX1RZUEVfREVDUkVBU0VfTUFSS0VUOiBJbnQgPSAxMjsKY29uc3QgT1JERVJfT1BfVFlQRV9ERUNSRUFTRV9UUDogSW50ID0gMTM7CmNvbnN0IE9SREVSX09QX1RZUEVfREVDUkVBU0VfU0w6IEludCA9IDE0Owo=","contracts/order/order_book.tact":"aW1wb3J0ICJAc3RkbGliL2RlcGxveSI7CmltcG9ydCAiQHN0ZGxpYi9vd25hYmxlIjsKaW1wb3J0ICIuL21lc3NhZ2VzIjsKaW1wb3J0ICIuL2V2ZW50cyI7CmltcG9ydCAiLi9zdHJ1Y3RzIjsKaW1wb3J0ICIuL2NvbnN0YW50cyI7Cgpjb250cmFjdCBPcmRlckJvb2sgd2l0aCBEZXBsb3lhYmxlLCBPd25hYmxlIHsKICAgIAogICAgLy8gY29uZmlnCiAgICBtYXhUaW1lRGVsYXlFeGVjdXRvcjogSW50ID0gMzAgKiA2MDsgLy8gZXhlY3V0b3IgZXhlY3V0ZSBiZWZvcmUgMzBtaW4KICAgIG1pblRpbWVEZWxheVRyYWRlcjogSW50ID0gMyAqIDYwOyAvLyB0cmFkZXIgZXhlY3V0ZSBhZnRlciAzbWluCgogICAgLy8gVE9ETyBnYXMKICAgIG1pbkV4ZWN1dGlvbkZlZTogSW50ID0gdG9uKCIwLjEiKTsgLy8gZmVlIGZvciBldmVyeSBvcGVyYXRpb24KICAgIGdhc0NvbnN1bXB0aW9uOiBJbnQgPSB0b24oIjAuMDUiKTsgLy8gbWluIGNvbnN1bXB0aW9uIGdhcwogICAgbWluVG9uc0ZvclN0b3JhZ2U6IEludCA9IHRvbigiMC4wMyIpOyAvLyBtaW4gc3RvcmFnZSBnYXMKCiAgICB1c2R0V2FsbGV0OiBBZGRyZXNzOyAvLyBvcmRlciBib29rIFVTRFQgamV0dG9uIHdhbGxldCBhZGRyZXNzCiAgICBwb29sOiBBZGRyZXNzOyAvLyBwb29sIGFkZHJlc3MKCiAgICAvLyB0b2tlbkNvbmZpZ3M6IG1hcDxJbnQsIFRva2VuQ29uZmlnPjsgLy8gdG9rZW5JbmRleCA9PiB0b2tlbkNvbmZpZwogICAgLy8gdG9rZW5JbmRleE5leHQ6IEludCBhcyB1aW50NjQgPSAxOwoKICAgIC8vIGFkbWluCiAgICBvd25lcjogQWRkcmVzczsKICAgIGV4ZWN1dG9yczogbWFwPEFkZHJlc3MsIEJvb2w+OyAvLyBhY2NvdW50ID0+IGVuYWJsZWQKICAgIC8vIGNvbXBlbnNhdG9yczogbWFwPEFkZHJlc3MsIEJvb2w+OyAvLyBhY2NvdW50ID0+IGVuYWJsZWQKCiAgICBqZXR0b25DYWxsYmFja3M6IG1hcDxJbnQsIEpldHRvbkNhbGxiYWNrPjsgLy8gcXVlcnlJZCA9PiBjYWxsYmFjawogICAgamV0dG9uQ2FsbGJhY2tRdWVyeUlkTmV4dDogSW50IGFzIHVpbnQ2NCA9IDE7CgogICAgLy8gUkJGCiAgICByYmZQb3NpdGlvbk9yZGVyczogbWFwPEludCwgUkJGUG9zaXRpb25PcmRlcj47IC8vIG9yZGVySWQgPT4gb3JkZXIKICAgIHJiZlBvc2l0aW9uT3JkZXJJbmRleE5leHQ6IEludCBhcyB1aW50NjQgPSAxOwoKICAgIC8vIExQCiAgICBscFBvc2l0aW9uT3JkZXJzOiBtYXA8SW50LCBMUFBvc2l0aW9uT3JkZXI+OyAvLyBvcmRlcklkID0+IG9yZGVyCiAgICBscFBvc2l0aW9uT3JkZXJJbmRleE5leHQ6IEludCBhcyB1aW50NjQgPSAxOwoKICAgIC8vIFBlcnAKICAgIHBlcnBQb3NpdGlvbk9yZGVyczogbWFwPEludCwgUGVycFBvc2l0aW9uT3JkZXI+OyAvLyBvcmRlcklkID0+IG9yZGVyCiAgICBwZXJwUG9zaXRpb25PcmRlckV4czogbWFwPEludCwgUGVycFBvc2l0aW9uT3JkZXJFeD47IC8vIG9yZGVySWQgPT4gb3JkZXJFeAogICAgcGVycFBvc2l0aW9uT3JkZXJJbmRleE5leHQ6IEludCBhcyB1aW50NjQgPSAxOwoKICAgIGluaXQoZGVwbG95SWQ6IEludCkgewogICAgICAgIHNlbGYub3duZXIgPSBzZW5kZXIoKTsKCiAgICAgICAgc2VsZi5leGVjdXRvcnMuc2V0KHNlbmRlcigpLCB0cnVlKTsKICAgICAgICAvLyBzZWxmLmNvbXBlbnNhdG9ycy5zZXQoc2VuZGVyKCksIHRydWUpOwoKICAgICAgICBzZWxmLnVzZHRXYWxsZXQgPSBuZXdBZGRyZXNzKDAsIDApOwogICAgICAgIHNlbGYucG9vbCA9IG5ld0FkZHJlc3MoMCwgMCk7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQWRtaW4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgcmVjZWl2ZShtc2c6IFVwZGF0ZUNvbmZpZykgewogICAgICAgIHNlbGYucmVxdWlyZU93bmVyKCk7CiAgICAgICAgLy8gYXV0aAogICAgICAgIGlmIChtc2cuZXhlY3V0b3IgIT0gbnVsbCAmJiBtc2cuZW5hYmxlRXhlY3V0b3IgIT0gbnVsbCkgewogICAgICAgICAgICBzZWxmLmV4ZWN1dG9ycy5zZXQobXNnLmV4ZWN1dG9yISEsIG1zZy5lbmFibGVFeGVjdXRvciEhKTsKICAgICAgICB9CgogICAgICAgIC8vIGNvbmZpZwogICAgICAgIHNlbGYubWF4VGltZURlbGF5RXhlY3V0b3IgPSBtc2cubWF4VGltZURlbGF5RXhlY3V0b3I7CiAgICAgICAgc2VsZi5taW5UaW1lRGVsYXlUcmFkZXIgPSBtc2cubWluVGltZURlbGF5VHJhZGVyOwogICAgICAgIHNlbGYubWluRXhlY3V0aW9uRmVlID0gbXNnLm1pbkV4ZWN1dGlvbkZlZTsKICAgICAgICBzZWxmLmdhc0NvbnN1bXB0aW9uID0gbXNnLmdhc0NvbnN1bXB0aW9uOwogICAgICAgIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UgPSBtc2cubWluVG9uc0ZvclN0b3JhZ2U7CiAgICAgICAgc2VsZi51c2R0V2FsbGV0ID0gbXNnLnVzZHRXYWxsZXQ7CiAgICAgICAgc2VsZi5wb29sID0gbXNnLnBvb2w7CiAgICAgICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICAgICAgdG86IHNlbmRlcigpLAogICAgICAgICAgICBib3VuY2U6IGZhbHNlLAogICAgICAgICAgICB2YWx1ZTogMCwKICAgICAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlCiAgICAgICAgfSk7CiAgICB9CgogICAgZ2V0IGZ1biBjb25maWdEYXRhKGV4ZWN1dG9yOiBBZGRyZXNzPyk6IENvbmZpZ0RhdGEgewogICAgICAgIGxldCBpc0V4ZWN1dG9yOiBCb29sPyA9IG51bGw7CiAgICAgICAgaWYgKGV4ZWN1dG9yICE9IG51bGwpIHsKICAgICAgICAgICAgaXNFeGVjdXRvciA9IHNlbGYuZXhlY3V0b3JzLmdldChleGVjdXRvciEhKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBDb25maWdEYXRhewogICAgICAgICAgICBpc0V4ZWN1dG9yOiBpc0V4ZWN1dG9yLAogICAgICAgICAgICBtYXhUaW1lRGVsYXlFeGVjdXRvcjogc2VsZi5tYXhUaW1lRGVsYXlFeGVjdXRvciwKICAgICAgICAgICAgbWluVGltZURlbGF5VHJhZGVyOiBzZWxmLm1pblRpbWVEZWxheVRyYWRlciwKICAgICAgICAgICAgbWluRXhlY3V0aW9uRmVlOiBzZWxmLm1pbkV4ZWN1dGlvbkZlZSwKICAgICAgICAgICAgZ2FzQ29uc3VtcHRpb246IHNlbGYuZ2FzQ29uc3VtcHRpb24sCiAgICAgICAgICAgIG1pblRvbnNGb3JTdG9yYWdlOiBzZWxmLm1pblRvbnNGb3JTdG9yYWdlLAogICAgICAgICAgICB1c2R0V2FsbGV0OiBzZWxmLnVzZHRXYWxsZXQsCiAgICAgICAgICAgIHBvb2w6IHNlbGYucG9vbAogICAgICAgIH07CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gVG9rZW4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgLyoqCiAgICAqIEBkZXYgVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2hlbiB0aGUgY29udHJhY3QgcmVjZWl2ZXMgYSBUb2tlbk5vdGlmaWNhdGlvbiBtZXNzYWdlLgogICAgKiBJdCBjaGVja3MgdGhlIHRva2VuIGFuZCBoYW5kbGVzIHRoZSBjb3JyZXNwb25kaW5nIG9wZXJhdGlvbiBjb2RlLgogICAgKiBAcGFyYW0gbXNnIFRoZSBUb2tlbk5vdGlmaWNhdGlvbiBtZXNzYWdlIHJlY2VpdmVkLgogICAgKi8KICAgIHJlY2VpdmUobXNnOiBUb2tlbk5vdGlmaWNhdGlvbikgewogICAgICAgIC8vIGp1c3QgcmVmdW5kIG90aGVyIHRva2VuCiAgICAgICAgaWYgKHNlbmRlcigpICE9IHNlbGYudXNkdFdhbGxldCkgewogICAgICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgICAgICAgICAgdG86IHNlbmRlcigpLCAKICAgICAgICAgICAgICAgIHZhbHVlOiAwLAogICAgICAgICAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLCAKICAgICAgICAgICAgICAgIGJvdW5jZTogZmFsc2UsCiAgICAgICAgICAgICAgICBib2R5OiBzZWxmLmNyZWF0ZUpldHRvblRyYW5zZmVyQm9keShtc2cucXVlcnlJZCwgbXNnLmFtb3VudCwgbXNnLmZyb20sIG1zZy5mcm9tKQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8gZ2V0IG9wIGNvZGUKICAgICAgICBsZXQgb3BlcmF0aW9uOiBTbGljZSA9IG1zZy5mb3J3YXJkUGF5bG9hZC5sb2FkUmVmKCkuYXNTbGljZSgpOwogICAgICAgIGxldCBvcENvZGU6IEludCA9IG9wZXJhdGlvbi5sb2FkSW50KDMyKTsKICAgICAgICBpZiAob3BDb2RlID09IE9QX0NSRUFURV9JTkNSRUFTRV9SQkZfUE9TSVRJT05fT1JERVIpIHsKICAgICAgICAgICAgbGV0IGxpcXVpZGl0eURlbHRhOiBJbnQgPSBvcGVyYXRpb24ubG9hZEludCgxMjgpOwogICAgICAgICAgICBsZXQgZXhlY3V0aW9uRmVlOiBJbnQgPSBvcGVyYXRpb24ubG9hZENvaW5zKCk7CgogICAgICAgICAgICBzZWxmLmhhbmRsZUNyZWF0ZUluY3JlYXNlUkJGUG9zaXRpb25PcmRlcihtc2cucXVlcnlJZCwgbXNnLmFtb3VudCwgbXNnLmZyb20sIGV4ZWN1dGlvbkZlZSwgbGlxdWlkaXR5RGVsdGEpOwogICAgICAgIH0gCiAgICAgICAgZWxzZSBpZiAob3BDb2RlID09IE9QX0NSRUFURV9JTkNSRUFTRV9MUF9QT1NJVElPTl9PUkRFUikgewogICAgICAgICAgICBsZXQgbWFyZ2luRGVsdGE6IEludCA9IG9wZXJhdGlvbi5sb2FkSW50KDEyOCk7CiAgICAgICAgICAgIGxldCBsaXF1aWRpdHlEZWx0YTogSW50ID0gb3BlcmF0aW9uLmxvYWRJbnQoMTI4KTsKICAgICAgICAgICAgbGV0IGV4ZWN1dGlvbkZlZTogSW50ID0gb3BlcmF0aW9uLmxvYWRDb2lucygpOwoKICAgICAgICAgICAgc2VsZi5oYW5kbGVDcmVhdGVJbmNyZWFzZUxQUG9zaXRpb25PcmRlcihtc2cucXVlcnlJZCwgbXNnLmFtb3VudCwgbXNnLmZyb20sIGV4ZWN1dGlvbkZlZSwgbWFyZ2luRGVsdGEsIGxpcXVpZGl0eURlbHRhKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAob3BDb2RlID09IE9QX0NSRUFURV9JTkNSRUFTRV9QRVJQX1BPU0lUSU9OX09SREVSKSB7CiAgICAgICAgICAgIGxldCBleGVjdXRpb25GZWU6IEludCA9IG9wZXJhdGlvbi5sb2FkQ29pbnMoKTsKICAgICAgICAgICAgbGV0IGlzTWFya2V0OiBCb29sID0gb3BlcmF0aW9uLmxvYWRJbnQoMSkgPT0gLTE7CiAgICAgICAgICAgIGxldCB0b2tlbklkOiBJbnQgPSBvcGVyYXRpb24ubG9hZEludCg2NCk7CiAgICAgICAgICAgIGxldCBpc0xvbmc6IEJvb2wgPSBvcGVyYXRpb24ubG9hZEludCgxKSA9PSAtMTsKICAgICAgICAgICAgbGV0IG1hcmdpbkRlbHRhOiBJbnQgPSBvcGVyYXRpb24ubG9hZEludCgxMjgpOwogICAgICAgICAgICBsZXQgc2l6ZURlbHRhOiBJbnQgPSBvcGVyYXRpb24ubG9hZEludCgxMjgpOwogICAgICAgICAgICBsZXQgdHJpZ2dlclByaWNlOiBJbnQgPSBvcGVyYXRpb24ubG9hZEludCgyNTYpOwogICAgICAgICAgICBsZXQgdHBTbDogU2xpY2UgPSBvcGVyYXRpb24ubG9hZFJlZigpLmFzU2xpY2UoKTsKICAgICAgICAgICAgbGV0IHRwU2l6ZTogSW50ID0gdHBTbC5sb2FkSW50KDEyOCk7CiAgICAgICAgICAgIGxldCB0cFByaWNlOiBJbnQgPSB0cFNsLmxvYWRJbnQoMjU2KTsKICAgICAgICAgICAgbGV0IHNsU2l6ZTogSW50ID0gdHBTbC5sb2FkSW50KDEyOCk7CiAgICAgICAgICAgIGxldCBzbFByaWNlOiBJbnQgPSB0cFNsLmxvYWRJbnQoMjU2KTsKCiAgICAgICAgICAgIHNlbGYuaGFuZGxlQ3JlYXRlSW5jcmVhc2VQZXJwUG9zaXRpb25PcmRlcihtc2cucXVlcnlJZCwgbXNnLmFtb3VudCwgbXNnLmZyb20sIGV4ZWN1dGlvbkZlZSwgaXNNYXJrZXQsIHRva2VuSWQsIGlzTG9uZywgbWFyZ2luRGVsdGEsIAogICAgICAgICAgICAgICAgc2l6ZURlbHRhLCB0cmlnZ2VyUHJpY2UsIHRwU2l6ZSwgdHBQcmljZSwgc2xTaXplLCBzbFByaWNlKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8vIHRyYW5zZmVyIGpldHRvbiBzdWNjZXNzIGNhbGxiYWNrCiAgICByZWNlaXZlKG1zZzogVG9rZW5FeGNlc3NlcykgewogICAgICAgIC8vIGdldCBjYWxsYmFjawogICAgICAgIGxldCBqZXR0b25DYWxsYmFja09wdDogSmV0dG9uQ2FsbGJhY2s/ID0gc2VsZi5qZXR0b25DYWxsYmFja3MuZ2V0KG1zZy5xdWVyeUlkKTsKICAgICAgICBpZiAoamV0dG9uQ2FsbGJhY2tPcHQgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGxldCBqZXR0b25DYWxsYmFjazogSmV0dG9uQ2FsbGJhY2sgPSBqZXR0b25DYWxsYmFja09wdCEhOwoKICAgICAgICAvLyBkZWxldGUgY2FsbGJhY2sKICAgICAgICBzZWxmLmpldHRvbkNhbGxiYWNrcy5zZXQobXNnLnF1ZXJ5SWQsIG51bGwpOwoKICAgICAgICAvLyBvcmRlciB0eXBlCiAgICAgICAgaWYgKGpldHRvbkNhbGxiYWNrLm9yZGVyVHlwZSA9PSBPUkRFUl9UWVBFX1JCRikgewogICAgICAgICAgICBzZWxmLmhhbmRlbFJCRlBvc2l0aW9uT3JkZXJDYWxsYmFjayhqZXR0b25DYWxsYmFjay5vcmRlcklkLCBqZXR0b25DYWxsYmFjay50cnhJZCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGpldHRvbkNhbGxiYWNrLm9yZGVyVHlwZSA9PSBPUkRFUl9UWVBFX0xQKSB7CiAgICAgICAgICAgIHNlbGYuaGFuZGVsTFBQb3NpdGlvbk9yZGVyQ2FsbGJhY2soamV0dG9uQ2FsbGJhY2sub3JkZXJJZCwgamV0dG9uQ2FsbGJhY2sudHJ4SWQpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChqZXR0b25DYWxsYmFjay5vcmRlclR5cGUgPT0gT1JERVJfVFlQRV9QRVJQKSB7CiAgICAgICAgICAgIHNlbGYuaGFuZGVsUGVycFBvc2l0aW9uT3JkZXJDYWxsYmFjayhqZXR0b25DYWxsYmFjay5vcmRlcklkLCBqZXR0b25DYWxsYmFjay50cnhJZCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1biByZWZ1bmRKZXR0b24ocXVlcnlJZDogSW50LCBhbW91bnQ6IEludCwgdG86IEFkZHJlc3MsIHJlc3BvbnNlOiBBZGRyZXNzKSB7CiAgICAgICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICAgICAgdG86IHNlbGYudXNkdFdhbGxldCwgCiAgICAgICAgICAgIHZhbHVlOiAwLAogICAgICAgICAgICBtb2RlOiBTZW5kUmVtYWluaW5nVmFsdWUsIAogICAgICAgICAgICBib3VuY2U6IGZhbHNlLAogICAgICAgICAgICBib2R5OiBzZWxmLmNyZWF0ZUpldHRvblRyYW5zZmVyQm9keShxdWVyeUlkLCBhbW91bnQsIHRvLCByZXNwb25zZSkKICAgICAgICB9KTsKICAgIH0KCiAgICAvLyB0cmFuc2ZlciBleGVjZXNzIHRvbgogICAgZnVuIHJlZnVuZEV4ZWNlc3NUb24odG86IEFkZHJlc3MsIGV4ZWN1dGlvbkZlZTogSW50KSB7CiAgICAgICAgbGV0IHJlZnVuZFZhbHVlOiBJbnQgPSBjb250ZXh0KCkudmFsdWUgLSBleGVjdXRpb25GZWUgLSBzZWxmLmdhc0NvbnN1bXB0aW9uIC0gc2VsZi5taW5Ub25zRm9yU3RvcmFnZTsKICAgICAgICBpZiAocmVmdW5kVmFsdWUgPiAwKSB7CiAgICAgICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgICAgICB0bzogdG8sCiAgICAgICAgICAgICAgICBib3VuY2U6IGZhbHNlLAogICAgICAgICAgICAgICAgdmFsdWU6IHJlZnVuZFZhbHVlLAogICAgICAgICAgICAgICAgbW9kZTogU2VuZElnbm9yZUVycm9ycwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9CgogICAgZnVuIGdldFBvb2xHYXMoKTogSW50IHsKICAgICAgICByZXR1cm4gY29udGV4dCgpLnJlYWRGb3J3YXJkRmVlKCkgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICogMiArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2U7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gUkJGID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQ3JlYXRlIEluY3JlYXNlID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCiAgICBmdW4gaGFuZGxlQ3JlYXRlSW5jcmVhc2VSQkZQb3NpdGlvbk9yZGVyKHF1ZXJ5SWQ6IEludCwgamV0dG9uRnJvbUFtb3VudDogSW50LCBhY2NvdW50OiBBZGRyZXNzLCBleGVjdXRpb25GZWU6IEludCwgbGlxdWlkaXR5RGVsdGE6IEludCkgewogICAgICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CgogICAgICAgIGlmIChjdHgudmFsdWUgPCBleGVjdXRpb25GZWUgKyBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDIgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICsgc2VsZi5taW5Ub25zRm9yU3RvcmFnZSkgewogICAgICAgICAgICBzZWxmLnJlZnVuZEpldHRvbihxdWVyeUlkLCBqZXR0b25Gcm9tQW1vdW50LCBhY2NvdW50LCBhY2NvdW50KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGpldHRvbkZyb21BbW91bnQgPCBsaXF1aWRpdHlEZWx0YSkgewogICAgICAgICAgICBzZWxmLnJlZnVuZEpldHRvbihxdWVyeUlkLCBqZXR0b25Gcm9tQW1vdW50LCBhY2NvdW50LCBhY2NvdW50KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGV4ZWN1dGlvbkZlZSA8IHNlbGYubWluRXhlY3V0aW9uRmVlKSB7CiAgICAgICAgICAgIHNlbGYucmVmdW5kSmV0dG9uKHF1ZXJ5SWQsIGpldHRvbkZyb21BbW91bnQsIGFjY291bnQsIGFjY291bnQpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvLyBhZGQgbmV3IG9yZGVyCiAgICAgICAgbGV0IG9yZGVySWQ6IEludCA9IHNlbGYucmJmUG9zaXRpb25PcmRlckluZGV4TmV4dDsKICAgICAgICBzZWxmLnJiZlBvc2l0aW9uT3JkZXJJbmRleE5leHQgPSBvcmRlcklkICsgMTsKICAgICAgICBzZWxmLnJiZlBvc2l0aW9uT3JkZXJzLnNldChvcmRlcklkLCBSQkZQb3NpdGlvbk9yZGVyewogICAgICAgICAgICBpc0luY3JlYXNlOiB0cnVlLAogICAgICAgICAgICBhY2NvdW50OiBhY2NvdW50LAogICAgICAgICAgICBsaXF1aWRpdHlEZWx0YTogbGlxdWlkaXR5RGVsdGEsCiAgICAgICAgICAgIGV4ZWN1dGlvbkZlZTogZXhlY3V0aW9uRmVlLAogICAgICAgICAgICBibG9ja1RpbWU6IG5vdygpLAogICAgICAgICAgICBpc1BlbmRpbmc6IGZhbHNlLAogICAgICAgICAgICBjYWxsYmFja0lkOiBudWxsLAogICAgICAgICAgICBleGVjdXRpb25GZWVSZWNlaXZlcjogbnVsbCwKICAgICAgICAgICAgbGFzdE9wZXJhdG9yOiBudWxsCiAgICAgICAgfSk7CgogICAgICAgIC8vIGV2ZW50CiAgICAgICAgZW1pdChSQkZQb3NpdGlvbk9yZGVyQ3JlYXRlZEV2ZW50ewogICAgICAgICAgICBvcFR5cGU6IE9SREVSX09QX1RZUEVfSU5DUkVBU0UsCiAgICAgICAgICAgIGFjY291bnQ6IGFjY291bnQsCiAgICAgICAgICAgIGxpcXVpZGl0eURlbHRhOiBsaXF1aWRpdHlEZWx0YSwKICAgICAgICAgICAgZXhlY3V0aW9uRmVlOiBleGVjdXRpb25GZWUsCiAgICAgICAgICAgIG9yZGVySWQ6IG9yZGVySWQKICAgICAgICB9LnRvQ2VsbCgpKTsKCiAgICAgICAgc2VsZi5yZWZ1bmRFeGVjZXNzVG9uKGFjY291bnQsIGV4ZWN1dGlvbkZlZSk7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBDcmVhdGUgRGVjcmVhc2UgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIHJlY2VpdmUobXNnOiBDcmVhdGVEZWNyZWFzZVJCRlBvc2l0aW9uT3JkZXIpIHsKICAgICAgICBsZXQgY3R4OiBDb250ZXh0ID0gY29udGV4dCgpOwogICAgICAgIC8vIGNoZWNrIGdhcwogICAgICAgIHJlcXVpcmUoY3R4LnZhbHVlIC0gbXNnLmV4ZWN1dGlvbkZlZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDIgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICsgc2VsZi5taW5Ub25zRm9yU3RvcmFnZSwgImdhcyBub3QgZW5vdWdoIik7CiAgICAgICAgLy8gY2hlY2sgZXhlY3V0aW9uIGZlZQogICAgICAgIHJlcXVpcmUobXNnLmV4ZWN1dGlvbkZlZSA+PSBzZWxmLm1pbkV4ZWN1dGlvbkZlZSwgImV4ZWN1dGlvbiBmZWUgbm90IGVub3VnaCIpOwoKICAgICAgICAvLyBhZGQgbmV3IG9yZGVyCiAgICAgICAgbGV0IG9yZGVySWQ6IEludCA9IHNlbGYucmJmUG9zaXRpb25PcmRlckluZGV4TmV4dDsKICAgICAgICBzZWxmLnJiZlBvc2l0aW9uT3JkZXJJbmRleE5leHQgPSBzZWxmLnJiZlBvc2l0aW9uT3JkZXJJbmRleE5leHQgKyAxOwogICAgICAgIHNlbGYucmJmUG9zaXRpb25PcmRlcnMuc2V0KG9yZGVySWQsIFJCRlBvc2l0aW9uT3JkZXJ7CiAgICAgICAgICAgIGlzSW5jcmVhc2U6IGZhbHNlLAogICAgICAgICAgICBhY2NvdW50OiBzZW5kZXIoKSwKICAgICAgICAgICAgbGlxdWlkaXR5RGVsdGE6IG1zZy5saXF1aWRpdHlEZWx0YSwKICAgICAgICAgICAgZXhlY3V0aW9uRmVlOiBtc2cuZXhlY3V0aW9uRmVlLAogICAgICAgICAgICBibG9ja1RpbWU6IG5vdygpLAogICAgICAgICAgICBpc1BlbmRpbmc6IGZhbHNlLAogICAgICAgICAgICBjYWxsYmFja0lkOiBudWxsLAogICAgICAgICAgICBleGVjdXRpb25GZWVSZWNlaXZlcjogbnVsbCwKICAgICAgICAgICAgbGFzdE9wZXJhdG9yOiBudWxsCiAgICAgICAgfSk7CgogICAgICAgIC8vIGV2ZW50CiAgICAgICAgZW1pdChSQkZQb3NpdGlvbk9yZGVyQ3JlYXRlZEV2ZW50ewogICAgICAgICAgICBvcFR5cGU6IE9SREVSX09QX1RZUEVfREVDUkVBU0UsCiAgICAgICAgICAgIGFjY291bnQ6IHNlbmRlcigpLAogICAgICAgICAgICBsaXF1aWRpdHlEZWx0YTogbXNnLmxpcXVpZGl0eURlbHRhLAogICAgICAgICAgICBleGVjdXRpb25GZWU6IG1zZy5leGVjdXRpb25GZWUsCiAgICAgICAgICAgIG9yZGVySWQ6IG9yZGVySWQKICAgICAgICB9LnRvQ2VsbCgpKTsKCiAgICAgICAgLy8gdHJhbnNmZXIgZXhlY2VzcyBnYXMKICAgICAgICBzZWxmLnJlZnVuZEV4ZWNlc3NUb24oc2VuZGVyKCksIG1zZy5leGVjdXRpb25GZWUpOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQ2FuY2VsIEluY3JlYXNlIC8gRGVjcmVhc2UgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIC8vIGNhbmNlbCBpbmNyZWFzZSA9PiBvcmRlckJvb2sgd2FsbGV0ID0+IHVzZXIgd2FsbGV0ID0+IHRva2VuIGV4Y2VzcyBoYW5kZWwgY2FuY2VsID0+IGV4Y2VzcyBnYXMKICAgIC8vIGNhbmNlbCBkZWNyZWFzZSA9PiBleGNlc3MgZ2FzCiAgICByZWNlaXZlKG1zZzogQ2FuY2VsUkJGUG9zaXRpb25PcmRlcikgewogICAgICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CiAgICAgICAgLy8gY2hlY2sgb3JkZXIKICAgICAgICBsZXQgb3JkZXJPcHQ6IFJCRlBvc2l0aW9uT3JkZXI/ID0gc2VsZi5yYmZQb3NpdGlvbk9yZGVycy5nZXQobXNnLm9yZGVySWQpOwogICAgICAgIHJlcXVpcmUob3JkZXJPcHQgIT0gbnVsbCwgIm9yZGVyIG5vdCBleGlzdCIpOwogICAgICAgIGxldCBvcmRlcjogUkJGUG9zaXRpb25PcmRlciA9IG9yZGVyT3B0ISE7CgogICAgICAgIC8vIGNoZWNrIGdhcwogICAgICAgIGlmIChvcmRlci5pc0luY3JlYXNlKSB7CiAgICAgICAgICAgIHJlcXVpcmUoY3R4LnZhbHVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICogNCArIHNlbGYuZ2FzQ29uc3VtcHRpb24gKiAyICsgc2VsZi5taW5Ub25zRm9yU3RvcmFnZSArIHRvbigiMC4wMzIiKSwgImdhcyBub3QgZW5vdWdoIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiAyICsgc2VsZi5nYXNDb25zdW1wdGlvbiArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UsICJnYXMgbm90IGVub3VnaCIpOwogICAgICAgIH0KCiAgICAgICAgc2VsZi5zaG91bGRDYW5jZWwob3JkZXIuYmxvY2tUaW1lLCBzZW5kZXIoKSwgb3JkZXIuaXNQZW5kaW5nKTsKCiAgICAgICAgaWYgKG9yZGVyLmlzSW5jcmVhc2UpIHsKICAgICAgICAgICAgLy8gYWRkIGNhbGxiYWNrCiAgICAgICAgICAgIGxldCBjYWxsYmFja0lkOiBJbnQgPSBzZWxmLmpldHRvbkNhbGxiYWNrUXVlcnlJZE5leHQ7CiAgICAgICAgICAgIHNlbGYuamV0dG9uQ2FsbGJhY2tRdWVyeUlkTmV4dCA9IGNhbGxiYWNrSWQgKyAxOwogICAgICAgICAgICBzZWxmLmpldHRvbkNhbGxiYWNrcy5zZXQoY2FsbGJhY2tJZCwgSmV0dG9uQ2FsbGJhY2t7CiAgICAgICAgICAgICAgICBvcmRlclR5cGU6IE9SREVSX1RZUEVfUkJGLAogICAgICAgICAgICAgICAgb3JkZXJJZDogbXNnLm9yZGVySWQsCiAgICAgICAgICAgICAgICBhbW91bnQ6IG9yZGVyLmxpcXVpZGl0eURlbHRhLAogICAgICAgICAgICAgICAgcmVjZWl2ZXI6IG9yZGVyLmFjY291bnQsCiAgICAgICAgICAgICAgICB0cnhJZDogbXNnLnRyeElkCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gdXBkYXRlIG9yZGVyCiAgICAgICAgICAgIGlmIChtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgb3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgPSBtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIhITsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyID0gc2VuZGVyKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb3JkZXIubGFzdE9wZXJhdG9yID0gc2VuZGVyKCk7CiAgICAgICAgICAgIG9yZGVyLmlzUGVuZGluZyA9IHRydWU7CiAgICAgICAgICAgIG9yZGVyLmNhbGxiYWNrSWQgPSBjYWxsYmFja0lkOwogICAgICAgICAgICBzZWxmLnJiZlBvc2l0aW9uT3JkZXJzLnNldChtc2cub3JkZXJJZCwgb3JkZXIpOwoKICAgICAgICAgICAgLy8gdHJhbnNmZXIgamV0dG9uCiAgICAgICAgICAgIHNlbGYucmVmdW5kSmV0dG9uKGNhbGxiYWNrSWQsIG9yZGVyLmxpcXVpZGl0eURlbHRhLCBvcmRlci5hY2NvdW50LCBteUFkZHJlc3MoKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gZ2V0IGZlZSByZWNlaXZlcgogICAgICAgICAgICBsZXQgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3MgPSBzZW5kZXIoKTsKICAgICAgICAgICAgaWYgKG1zZy5leGVjdXRpb25GZWVSZWNlaXZlciAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBleGVjdXRpb25GZWVSZWNlaXZlciA9IG1zZy5leGVjdXRpb25GZWVSZWNlaXZlciEhOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBkZWxldGUgb3JkZXIKICAgICAgICAgICAgc2VsZi5yYmZQb3NpdGlvbk9yZGVycy5zZXQobXNnLm9yZGVySWQsIG51bGwpOwogICAgICAgICAgICAvLyBldmVudAogICAgICAgICAgICBlbWl0KFJCRlBvc2l0aW9uT3JkZXJDYW5jZWxsZWRFdmVudHsKICAgICAgICAgICAgICAgIG9wVHlwZTogT1JERVJfT1BfVFlQRV9ERUNSRUFTRSwKICAgICAgICAgICAgICAgIG9yZGVySWQ6IG1zZy5vcmRlcklkLAogICAgICAgICAgICAgICAgdHJ4SWQ6IG1zZy50cnhJZAogICAgICAgICAgICB9LnRvQ2VsbCgpKTsKCiAgICAgICAgICAgIC8vIHRyYW5zZmVyIGV4ZWN1dGlvbiBmZWUKICAgICAgICAgICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICAgICAgICAgIHRvOiBleGVjdXRpb25GZWVSZWNlaXZlciwKICAgICAgICAgICAgICAgIGJvdW5jZTogdHJ1ZSwKICAgICAgICAgICAgICAgIHZhbHVlOiBvcmRlci5leGVjdXRpb25GZWUsCiAgICAgICAgICAgICAgICBtb2RlOiBTZW5kUGF5R2FzU2VwYXJhdGVseQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIHRyYW5zZmVyIGV4ZWNlc3MgZ2FzCiAgICAgICAgICAgIHNlbGYucmVmdW5kRXhlY2Vzc1RvbihzZW5kZXIoKSwgMCk7CiAgICAgICAgfQogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gRXhlY3V0ZSBJbmNyZWFzZSAvIERlY3JlYXNlID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCiAgICAvLyBleGVjdXRlIGluY3JlYXNlID0+IGluY3JlYXNlIHBvc2l0aW9uIGZvciBwb29sID0+IGluY3JlYXNlIHN1Y2Nlc3MgLyBib3VuY2VkID0+IGV4Y2VzcyBnYXMKICAgIC8vIGV4ZWN1dGUgZGVjcmVhc2UgPT4gZGVjcmVhc2UgcG9zaXRpb24gZm9yIHBvb2wgPT4gZGVjcmVhc2Ugc3VjY2VzcyA9PiBvcmRlckJvb2sgd2FsbGV0ID0+IHVzZXIgd2FsbGV0ID0+IHRva2VuIGV4Y2Vzc2VzIGhhbmRlbCBjYW5jZWwgPT4gZXhjZXNzIGdhcwogICAgcmVjZWl2ZShtc2c6IEV4ZWN1dGVSQkZQb3NpdGlvbk9yZGVyKSB7CiAgICAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKCiAgICAgICAgLy8gY2hlY2sgb3JkZXIKICAgICAgICBsZXQgb3JkZXJPcHQ6IFJCRlBvc2l0aW9uT3JkZXI/ID0gc2VsZi5yYmZQb3NpdGlvbk9yZGVycy5nZXQobXNnLm9yZGVySWQpOwogICAgICAgIHJlcXVpcmUob3JkZXJPcHQgIT0gbnVsbCwgIm9yZGVyIG5vdCBleGlzdCIpOwoKICAgICAgICBsZXQgb3JkZXI6IFJCRlBvc2l0aW9uT3JkZXIgPSBvcmRlck9wdCEhOwoKICAgICAgICAvLyBjaGVjayBnYXMKICAgICAgICBpZiAob3JkZXIuaXNJbmNyZWFzZSkgewogICAgICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDMgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICogMiArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UgKyBzZWxmLmdldFBvb2xHYXMoKSwgImdhcyBub3QgZW5vdWdoIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiA2ICsgc2VsZi5nYXNDb25zdW1wdGlvbiAqIDMgKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlICsgc2VsZi5nZXRQb29sR2FzKCkgKyB0b24oIjAuMDMyIiksICJnYXMgbm90IGVub3VnaCIpOwogICAgICAgIH0KCiAgICAgICAgc2VsZi5zaG91bGRFeGVjdXRlKG9yZGVyLmJsb2NrVGltZSwgb3JkZXIuaXNQZW5kaW5nKTsKCiAgICAgICAgLy8gdXBkYXRlIG9yZGVyCiAgICAgICAgaWYgKG1zZy5leGVjdXRpb25GZWVSZWNlaXZlciAhPSBudWxsKSB7CiAgICAgICAgICAgIG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyID0gbXNnLmV4ZWN1dGlvbkZlZVJlY2VpdmVyISE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgb3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgPSBzZW5kZXIoKTsKICAgICAgICB9CiAgICAgICAgb3JkZXIuaXNQZW5kaW5nID0gdHJ1ZTsKICAgICAgICBzZWxmLnJiZlBvc2l0aW9uT3JkZXJzLnNldChtc2cub3JkZXJJZCwgb3JkZXIpOwoKICAgICAgICAvLyBzZW5kIHVwZGF0ZSBwb3NpdGlvbiBtc2cKICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgICAgICB0bzogc2VsZi5wb29sLAogICAgICAgICAgICB2YWx1ZTogMCwKICAgICAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLAogICAgICAgICAgICBib3VuY2U6IHRydWUsCiAgICAgICAgICAgIGJvZHk6IFVwZGF0ZVJCRlBvc2l0aW9uIHsKICAgICAgICAgICAgICAgIGlzSW5jcmVhc2U6IG9yZGVyLmlzSW5jcmVhc2UsCiAgICAgICAgICAgICAgICBvcmRlcklkOiBtc2cub3JkZXJJZCwKICAgICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQsCiAgICAgICAgICAgICAgICBhY2NvdW50OiBvcmRlci5hY2NvdW50LAogICAgICAgICAgICAgICAgbGlxdWlkaXR5RGVsdGE6IG9yZGVyLmxpcXVpZGl0eURlbHRhLAogICAgICAgICAgICAgICAgcHJpY2VzTGVuZ3RoOiBtc2cucHJpY2VzTGVuZ3RoLAogICAgICAgICAgICAgICAgcHJpY2VzOiBtc2cucHJpY2VzCiAgICAgICAgICAgIH0udG9DZWxsKCkKICAgICAgICB9KTsKICAgIH0KCiAgICAvLyBpbmNyZWFzZSBzdWNjZXNzIC8gYm91bmNlZCA9PiBleGNlc3MgZ2FzCiAgICAvLyBkZWNyZWFzZSBzdWNjZXNzID0+IG9yZGVyQm9vayB3YWxsZXQgPT4gdXNlciB3YWxsZXQgPT4gdG9rZW4gZXhjZXNzZXMgaGFuZGVsIGNhbmNlbCA9PiBleGNlc3MgZ2FzCiAgICByZWNlaXZlKG1zZzogVXBkYXRlUkJGUG9zaXRpb25TdWNjZXNzKSB7CiAgICAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKICAgICAgICByZXF1aXJlKHNlbmRlcigpID09IHNlbGYucG9vbCwgImludmFsaWQgc2VuZGVyIik7CgogICAgICAgIC8vIGdldCBvcmRlcgogICAgICAgIGxldCBvcmRlck9wdDogUkJGUG9zaXRpb25PcmRlcj8gPSBzZWxmLnJiZlBvc2l0aW9uT3JkZXJzLmdldChtc2cub3JkZXJJZCk7CiAgICAgICAgaWYgKG9yZGVyT3B0ID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBsZXQgb3JkZXI6IFJCRlBvc2l0aW9uT3JkZXIgPSBvcmRlck9wdCEhOwoKICAgICAgICAvLyBjaGVjayBnYXMKICAgICAgICBpZiAob3JkZXIuaXNJbmNyZWFzZSkgewogICAgICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDIgKyBzZWxmLmdhc0NvbnN1bXB0aW9uLCAiZ2FzIG5vdCBlbm91Z2giKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDQgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICogMiArIHRvbigiMC4wMzIiKSwgImdhcyBub3QgZW5vdWdoIik7CiAgICAgICAgfQoKICAgICAgICBpZiAob3JkZXIuaXNJbmNyZWFzZSkgewogICAgICAgICAgICAvLyBkZWxldGUgb3JkZXIKICAgICAgICAgICAgc2VsZi5yYmZQb3NpdGlvbk9yZGVycy5zZXQobXNnLm9yZGVySWQsIG51bGwpOwogICAgICAgICAgICAvLyBldmVudAogICAgICAgICAgICBlbWl0KFJCRlBvc2l0aW9uT3JkZXJFeGVjdXRlZEV2ZW50ewogICAgICAgICAgICAgICAgb3BUeXBlOiBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFLAogICAgICAgICAgICAgICAgb3JkZXJJZDogbXNnLm9yZGVySWQsCiAgICAgICAgICAgICAgICB0cnhJZDogbXNnLnRyeElkCiAgICAgICAgICAgIH0udG9DZWxsKCkpOwoKICAgICAgICAgICAgLy8gdHJhbnNmZXIgZXhlY3V0aW9uIGZlZQogICAgICAgICAgICBpZiAob3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICAgICAgICAgICAgICB0bzogb3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIhISwKICAgICAgICAgICAgICAgICAgICBib3VuY2U6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG9yZGVyLmV4ZWN1dGlvbkZlZSwKICAgICAgICAgICAgICAgICAgICBtb2RlOiBTZW5kUGF5R2FzU2VwYXJhdGVseQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIHRyYW5zZmVyIGV4ZWNlc3MgZ2FzCiAgICAgICAgICAgIGlmIChvcmRlci5sYXN0T3BlcmF0b3IgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgc2VsZi5yZWZ1bmRFeGVjZXNzVG9uKG9yZGVyLmxhc3RPcGVyYXRvciEhLCAwKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGFkZCBjYWxsYmFjawogICAgICAgICAgICBsZXQgY2FsbGJhY2tJZDogSW50ID0gc2VsZi5qZXR0b25DYWxsYmFja1F1ZXJ5SWROZXh0OwogICAgICAgICAgICBzZWxmLmpldHRvbkNhbGxiYWNrUXVlcnlJZE5leHQgPSBjYWxsYmFja0lkICsgMTsKICAgICAgICAgICAgc2VsZi5qZXR0b25DYWxsYmFja3Muc2V0KGNhbGxiYWNrSWQsIEpldHRvbkNhbGxiYWNrewogICAgICAgICAgICAgICAgb3JkZXJUeXBlOiBPUkRFUl9UWVBFX1JCRiwKICAgICAgICAgICAgICAgIG9yZGVySWQ6IG1zZy5vcmRlcklkLAogICAgICAgICAgICAgICAgYW1vdW50OiBtc2cucmVjZWl2ZSwKICAgICAgICAgICAgICAgIHJlY2VpdmVyOiBvcmRlci5hY2NvdW50LAogICAgICAgICAgICAgICAgdHJ4SWQ6IG1zZy50cnhJZAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIG9yZGVyLmNhbGxiYWNrSWQgPSBjYWxsYmFja0lkOwogICAgICAgICAgICBzZWxmLnJiZlBvc2l0aW9uT3JkZXJzLnNldChtc2cub3JkZXJJZCwgb3JkZXIpOwoKICAgICAgICAgICAgLy8gdHJhbnNmZXIgamV0dG9uCiAgICAgICAgICAgIHNlbGYucmVmdW5kSmV0dG9uKGNhbGxiYWNrSWQsIG1zZy5yZWNlaXZlLCBvcmRlci5hY2NvdW50LCBteUFkZHJlc3MoKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIHJlc2V0IG9yZGVyIHBlbmRpbmcKICAgIGJvdW5jZWQoc3JjOiBib3VuY2VkPFVwZGF0ZVJCRlBvc2l0aW9uPikgewoKICAgICAgICAvLyBnZXQgb3JkZXIKICAgICAgICBsZXQgb3JkZXJPcHQ6IFJCRlBvc2l0aW9uT3JkZXI/ID0gc2VsZi5yYmZQb3NpdGlvbk9yZGVycy5nZXQoc3JjLm9yZGVySWQpOwogICAgICAgIGlmIChvcmRlck9wdCA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbGV0IG9yZGVyOiBSQkZQb3NpdGlvbk9yZGVyID0gb3JkZXJPcHQhITsKCiAgICAgICAgLy8gdXBkYXRlIHBlbmRpbmcKICAgICAgICBvcmRlci5pc1BlbmRpbmcgPSBmYWxzZTsKICAgICAgICBzZWxmLnJiZlBvc2l0aW9uT3JkZXJzLnNldChzcmMub3JkZXJJZCwgb3JkZXIpOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQ2FsbGJhY2sgQ2FuY2VsIEluY3JlYXNlIC8gRXhlY3V0ZSBEZWNyZWFzZSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgZnVuIGhhbmRlbFJCRlBvc2l0aW9uT3JkZXJDYWxsYmFjayhvcmRlcklkOiBJbnQsIHRyeElkOiBJbnQpIHsKICAgICAgICBsZXQgY3R4OiBDb250ZXh0ID0gY29udGV4dCgpOwoKICAgICAgICAvLyBjaGVjayBnYXMKICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSArIHNlbGYuZ2FzQ29uc3VtcHRpb24sICJnYXMgbm90IGVub3VnaCIpOwoKICAgICAgICAvLyBnZXQgb3JkZXIKICAgICAgICBsZXQgb3JkZXJPcHQ6IFJCRlBvc2l0aW9uT3JkZXI/ID0gc2VsZi5yYmZQb3NpdGlvbk9yZGVycy5nZXQob3JkZXJJZCk7CiAgICAgICAgaWYgKG9yZGVyT3B0ID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBsZXQgb3JkZXI6IFJCRlBvc2l0aW9uT3JkZXIgPSBvcmRlck9wdCEhOwoKICAgICAgICAvLyBkZWxldGUgb3JkZXIKICAgICAgICBzZWxmLnJiZlBvc2l0aW9uT3JkZXJzLnNldChvcmRlcklkLCBudWxsKTsKCiAgICAgICAgaWYgKG9yZGVyLmlzSW5jcmVhc2UpIHsKICAgICAgICAgICAgLy8gZXZlbnQKICAgICAgICAgICAgZW1pdChSQkZQb3NpdGlvbk9yZGVyQ2FuY2VsbGVkRXZlbnR7CiAgICAgICAgICAgICAgICBvcFR5cGU6IE9SREVSX09QX1RZUEVfSU5DUkVBU0UsCiAgICAgICAgICAgICAgICBvcmRlcklkOiBvcmRlcklkLAogICAgICAgICAgICAgICAgdHJ4SWQ6IHRyeElkCiAgICAgICAgICAgIH0udG9DZWxsKCkpOwoKICAgICAgICAgICAgLy8gdHJhbnNmZXIgZXhlY3V0aW9uIGZlZQogICAgICAgICAgICBpZiAob3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICAgICAgICAgICAgICB0bzogb3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIhISwKICAgICAgICAgICAgICAgICAgICBib3VuY2U6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG9yZGVyLmV4ZWN1dGlvbkZlZSwKICAgICAgICAgICAgICAgICAgICBtb2RlOiBTZW5kUGF5R2FzU2VwYXJhdGVseQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBldmVudAogICAgICAgICAgICBlbWl0KFJCRlBvc2l0aW9uT3JkZXJFeGVjdXRlZEV2ZW50ewogICAgICAgICAgICAgICAgb3BUeXBlOiBPUkRFUl9PUF9UWVBFX0RFQ1JFQVNFLAogICAgICAgICAgICAgICAgb3JkZXJJZDogb3JkZXJJZCwKICAgICAgICAgICAgICAgIHRyeElkOiB0cnhJZAogICAgICAgICAgICB9LnRvQ2VsbCgpKTsKCiAgICAgICAgICAgIC8vIHRyYW5zZmVyIGV4ZWN1dGlvbiBmZWUKICAgICAgICAgICAgaWYgKG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgICAgICAgICAgdG86IG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyISEsCiAgICAgICAgICAgICAgICAgICAgYm91bmNlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvcmRlci5leGVjdXRpb25GZWUsCiAgICAgICAgICAgICAgICAgICAgbW9kZTogU2VuZFBheUdhc1NlcGFyYXRlbHkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyB0cmFuc2ZlciBleGVjZXNzIGdhcwogICAgICAgIGlmIChvcmRlci5sYXN0T3BlcmF0b3IgIT0gbnVsbCkgewogICAgICAgICAgICBzZWxmLnJlZnVuZEV4ZWNlc3NUb24ob3JkZXIubGFzdE9wZXJhdG9yISEsIDApOwogICAgICAgIH0KICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IENvbXBlbnNhdGUgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIC8vIGNvbXBlbnNhdGUgUkJGCiAgICAvLyByZWNlaXZlKG1zZzogQ29tcGVuc2F0ZVJCRlBvc2l0aW9uT3JkZXIpIHsKICAgIC8vICAgICBsZXQgY3R4OiBDb250ZXh0ID0gY29udGV4dCgpOwoKICAgIC8vICAgICAvLyBjaGVjayBjb21wZW5zYXRvcgogICAgLy8gICAgIGxldCBpc0NvbXBlbnNhdG9yOiBCb29sID0gZmFsc2U7CiAgICAvLyAgICAgbGV0IGlzQ29tcGVuc2F0b3JPcHQ6IEJvb2w/ID0gc2VsZi5jb21wZW5zYXRvcnMuZ2V0KHNlbmRlcigpKTsKICAgIC8vICAgICBpZiAoaXNDb21wZW5zYXRvck9wdCAhPSBudWxsKSB7CiAgICAvLyAgICAgICAgIGlzQ29tcGVuc2F0b3IgPSBpc0NvbXBlbnNhdG9yT3B0ISE7CiAgICAvLyAgICAgfQogICAgLy8gICAgIHJlcXVpcmUoaXNDb21wZW5zYXRvciwgIm5vdCBjb21wZW5zYXRvciIpOwogICAgICAgIAogICAgLy8gICAgIC8vIGNoZWNrIG9yZGVyIHBlbmRpbmcKICAgIC8vICAgICBsZXQgb3JkZXJPcHQ6IFJCRlBvc2l0aW9uT3JkZXI/ID0gc2VsZi5yYmZQb3NpdGlvbk9yZGVycy5nZXQobXNnLm9yZGVySWQpOwogICAgLy8gICAgIHJlcXVpcmUob3JkZXJPcHQgIT0gbnVsbCwgIm9yZGVyIG5vdCBleGlzdCIpOwogICAgLy8gICAgIGxldCBvcmRlcjogUkJGUG9zaXRpb25PcmRlciA9IG9yZGVyT3B0ISE7CgogICAgLy8gICAgIC8vIGNoZWNrIGdhcwogICAgLy8gICAgIGlmIChvcmRlci5pc0luY3JlYXNlKSB7CiAgICAvLyAgICAgICAgIHJlcXVpcmUoY3R4LnZhbHVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICogMyArIHNlbGYuZ2FzQ29uc3VtcHRpb24gKiAyICsgc2VsZi5taW5Ub25zRm9yU3RvcmFnZSArIHNlbGYuZ2V0UG9vbEdhcygpLCAiZ2FzIG5vdCBlbm91Z2giKTsKICAgIC8vICAgICB9IGVsc2UgewogICAgLy8gICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDYgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICogMyArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UgKyBzZWxmLmdldFBvb2xHYXMoKSArIHRvbigiMC4wMzIiKSwgImdhcyBub3QgZW5vdWdoIik7CiAgICAvLyAgICAgfQoKICAgIC8vICAgICByZXF1aXJlKG9yZGVyLmlzUGVuZGluZywgIm9yZGVyIG5vdCBwZW5kaW5nIik7CgogICAgLy8gICAgIC8vIHJlZnVuZAogICAgLy8gICAgIGlmIChtc2cubmVlZFJlZnVuZCkgewogICAgLy8gICAgICAgICAvLyBpbmNyZWFzZSBwb3NpdGlvbiBmYWlsZWQsIGNhbmNlbCBvcmRlcgogICAgLy8gICAgICAgICAvLyByZWZ1bmQgamV0dG9uIGZhaWxlZAogICAgLy8gICAgICAgICAvLyBnZXQgY2FsbGJhY2sKICAgIC8vICAgICAgICAgcmVxdWlyZShvcmRlci5jYWxsYmFja0lkICE9IG51bGwsICJqZXR0b24gY2FsbGJhY2sgbm90IGV4aXN0Iik7CiAgICAvLyAgICAgICAgIGxldCBjYWxsYmFja0lkOiBJbnQgPSBvcmRlci5jYWxsYmFja0lkISE7CiAgICAvLyAgICAgICAgIGxldCBqZXR0b25DYWxsYmFja09wdDogSmV0dG9uQ2FsbGJhY2s/ID0gc2VsZi5qZXR0b25DYWxsYmFja3MuZ2V0KGNhbGxiYWNrSWQpOwogICAgLy8gICAgICAgICBpZiAoamV0dG9uQ2FsbGJhY2tPcHQgPT0gbnVsbCkgewogICAgLy8gICAgICAgICAgICAgcmV0dXJuOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICAgIGxldCBqZXR0b25DYWxsYmFjazogSmV0dG9uQ2FsbGJhY2sgPSBqZXR0b25DYWxsYmFja09wdCEhOwogICAgLy8gICAgICAgICAvLyB1cGRhdGUgdHJ4SWQKICAgIC8vICAgICAgICAgamV0dG9uQ2FsbGJhY2sudHJ4SWQgPSBtc2cudHJ4SWQ7CiAgICAvLyAgICAgICAgIHNlbGYuamV0dG9uQ2FsbGJhY2tzLnNldChjYWxsYmFja0lkLCBqZXR0b25DYWxsYmFjayk7CgogICAgLy8gICAgICAgICAvLyB1cGRhdGUgZXhlY3V0aW9uIGZlZSByZWNlaXZlcgogICAgLy8gICAgICAgICBpZiAobXNnLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwpIHsKICAgIC8vICAgICAgICAgICAgIG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyID0gbXNnLmV4ZWN1dGlvbkZlZVJlY2VpdmVyISE7CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgICAgb3JkZXIubGFzdE9wZXJhdG9yID0gc2VuZGVyKCk7CiAgICAvLyAgICAgICAgIHNlbGYucmJmUG9zaXRpb25PcmRlcnMuc2V0KG1zZy5vcmRlcklkLCBvcmRlcik7CgogICAgLy8gICAgICAgICAvLyB0cmFuc2ZlciBqZXR0b24KICAgIC8vICAgICAgICAgc2VsZi5yZWZ1bmRKZXR0b24oY2FsbGJhY2tJZCwgamV0dG9uQ2FsbGJhY2suYW1vdW50LCBqZXR0b25DYWxsYmFjay5yZWNlaXZlciwgbXlBZGRyZXNzKCkpOwogICAgLy8gICAgICAgICByZXR1cm47CiAgICAvLyAgICAgfQoKICAgIC8vICAgICBpZiAobXNnLmlzRXhlY3V0ZSkgewogICAgLy8gICAgICAgICAvLyBkZWxldGUgb3JkZXIKICAgIC8vICAgICAgICAgc2VsZi5yYmZQb3NpdGlvbk9yZGVycy5zZXQobXNnLm9yZGVySWQsIG51bGwpOwogICAgLy8gICAgICAgICAvLyBldmVudAogICAgLy8gICAgICAgICBlbWl0KFJCRlBvc2l0aW9uT3JkZXJFeGVjdXRlZEV2ZW50ewogICAgLy8gICAgICAgICAgICAgaXNJbmNyZWFzZTogdHJ1ZSwKICAgIC8vICAgICAgICAgICAgIG9yZGVySWQ6IG1zZy5vcmRlcklkLAogICAgLy8gICAgICAgICAgICAgdHJ4SWQ6IG1zZy50cnhJZAogICAgLy8gICAgICAgICB9LnRvQ2VsbCgpKTsKICAgIC8vICAgICB9IGVsc2UgewogICAgLy8gICAgICAgICBpZiAob3JkZXIuY2FsbGJhY2tJZCAhPSBudWxsKSB7CiAgICAvLyAgICAgICAgICAgICAvLyBkZWxldGUgY2FsbGJhY2sKICAgIC8vICAgICAgICAgICAgIHNlbGYuamV0dG9uQ2FsbGJhY2tzLnNldChvcmRlci5jYWxsYmFja0lkISEsIG51bGwpOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICAgIC8vIGRlbGV0ZSBvcmRlcgogICAgLy8gICAgICAgICBzZWxmLnJiZlBvc2l0aW9uT3JkZXJzLnNldChtc2cub3JkZXJJZCwgbnVsbCk7CiAgICAvLyAgICAgICAgIC8vIGV2ZW50CiAgICAvLyAgICAgICAgIGVtaXQoUkJGUG9zaXRpb25PcmRlckNhbmNlbGxlZEV2ZW50ewogICAgLy8gICAgICAgICAgICAgaXNJbmNyZWFzZTogdHJ1ZSwKICAgIC8vICAgICAgICAgICAgIG9yZGVySWQ6IG1zZy5vcmRlcklkLAogICAgLy8gICAgICAgICAgICAgdHJ4SWQ6IG1zZy50cnhJZAogICAgLy8gICAgICAgICB9LnRvQ2VsbCgpKTsKICAgIC8vICAgICB9CgogICAgLy8gICAgIC8vIHRyYW5zZmVyIGV4ZWN1dGlvbiBmZWUKICAgIC8vICAgICBpZiAob3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgIT0gbnVsbCkgewogICAgLy8gICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgLy8gICAgICAgICAgICAgdG86IG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyISEsCiAgICAvLyAgICAgICAgICAgICBib3VuY2U6IHRydWUsCiAgICAvLyAgICAgICAgICAgICB2YWx1ZTogb3JkZXIuZXhlY3V0aW9uRmVlLAogICAgLy8gICAgICAgICAgICAgbW9kZTogU2VuZFBheUdhc1NlcGFyYXRlbHkKICAgIC8vICAgICAgICAgfSk7CiAgICAvLyAgICAgfQoKICAgIC8vICAgICAvLyB0cmFuc2ZlciBleGVjZXNzIGdhcwogICAgLy8gICAgIHNlbGYucmVmdW5kRXhlY2Vzc1RvbihzZW5kZXIoKSwgb3JkZXIuZXhlY3V0aW9uRmVlKTsKICAgIC8vICAgICByZXR1cm47CiAgICAvLyB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBHZXR0ZXIgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIGdldCBmdW4gcmJmUG9zaXRpb25PcmRlcihvcmRlcklkOiBJbnQpOiBSQkZQb3NpdGlvbk9yZGVyPyB7CiAgICAgICAgcmV0dXJuIHNlbGYucmJmUG9zaXRpb25PcmRlcnMuZ2V0KG9yZGVySWQpOwogICAgfQoKICAgIGdldCBmdW4gcmJmUG9zaXRpb25PcmRlckluZGV4TmV4dCgpOiBJbnQgewogICAgICAgIHJldHVybiBzZWxmLnJiZlBvc2l0aW9uT3JkZXJJbmRleE5leHQ7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gTFAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBDcmVhdGUgSW5jcmVhc2UgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIGZ1biBoYW5kbGVDcmVhdGVJbmNyZWFzZUxQUG9zaXRpb25PcmRlcihxdWVyeUlkOiBJbnQsIGpldHRvbkZyb21BbW91bnQ6IEludCwgYWNjb3VudDogQWRkcmVzcywgZXhlY3V0aW9uRmVlOiBJbnQsIG1hcmdpbkRlbHRhOiBJbnQsIGxpcXVpZGl0eURlbHRhOiBJbnQpIHsKICAgICAgICBkdW1wKCJoYW5kbGVDcmVhdGVJbmNyZWFzZUxQUG9zaXRpb25PcmRlciIpOwogICAgICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CgogICAgICAgIGlmIChjdHgudmFsdWUgPCBleGVjdXRpb25GZWUgKyBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDIgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICsgc2VsZi5taW5Ub25zRm9yU3RvcmFnZSkgewogICAgICAgICAgICBkdW1wKCJnYXMgbm90IGVub3VnaCIpOwogICAgICAgICAgICBzZWxmLnJlZnVuZEpldHRvbihxdWVyeUlkLCBqZXR0b25Gcm9tQW1vdW50LCBhY2NvdW50LCBhY2NvdW50KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGpldHRvbkZyb21BbW91bnQgPCBtYXJnaW5EZWx0YSkgewogICAgICAgICAgICBzZWxmLnJlZnVuZEpldHRvbihxdWVyeUlkLCBqZXR0b25Gcm9tQW1vdW50LCBhY2NvdW50LCBhY2NvdW50KTsKICAgICAgICAgICAgZHVtcCgicmVmdW5kIGZyb20gbm90IGVub3VnaCBtYXJnaW4iKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGV4ZWN1dGlvbkZlZSA8IHNlbGYubWluRXhlY3V0aW9uRmVlKSB7CiAgICAgICAgICAgIHNlbGYucmVmdW5kSmV0dG9uKHF1ZXJ5SWQsIGpldHRvbkZyb21BbW91bnQsIGFjY291bnQsIGFjY291bnQpOwogICAgICAgICAgICBkdW1wKCJleGVjdXRpb24gZmVlIG5vdCBlbm91Z2giKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8gYWRkIG5ldyBvcmRlcgogICAgICAgIGxldCBvcmRlcklkOiBJbnQgPSBzZWxmLmxwUG9zaXRpb25PcmRlckluZGV4TmV4dDsKICAgICAgICBzZWxmLmxwUG9zaXRpb25PcmRlckluZGV4TmV4dCA9IG9yZGVySWQgKyAxOwogICAgICAgIHNlbGYubHBQb3NpdGlvbk9yZGVycy5zZXQob3JkZXJJZCwgTFBQb3NpdGlvbk9yZGVyewogICAgICAgICAgICBvcFR5cGU6IE9SREVSX09QX1RZUEVfSU5DUkVBU0UsCiAgICAgICAgICAgIGFjY291bnQ6IGFjY291bnQsCiAgICAgICAgICAgIG1hcmdpbkRlbHRhOiBtYXJnaW5EZWx0YSwKICAgICAgICAgICAgbGlxdWlkaXR5RGVsdGE6IGxpcXVpZGl0eURlbHRhLAogICAgICAgICAgICBleGVjdXRpb25GZWU6IGV4ZWN1dGlvbkZlZSwKICAgICAgICAgICAgYmxvY2tUaW1lOiBub3coKSwKICAgICAgICAgICAgaXNQZW5kaW5nOiBmYWxzZSwKICAgICAgICAgICAgY2FsbGJhY2tJZDogbnVsbCwKICAgICAgICAgICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IG51bGwsCiAgICAgICAgICAgIGxhc3RPcGVyYXRvcjogbnVsbAogICAgICAgIH0pOwoKICAgICAgICAvLyBldmVudAogICAgICAgIGVtaXQoTFBQb3NpdGlvbk9yZGVyQ3JlYXRlZEV2ZW50ewogICAgICAgICAgICBvcFR5cGU6IE9SREVSX09QX1RZUEVfSU5DUkVBU0UsCiAgICAgICAgICAgIGFjY291bnQ6IGFjY291bnQsCiAgICAgICAgICAgIG1hcmdpbkRlbHRhOiBtYXJnaW5EZWx0YSwKICAgICAgICAgICAgbGlxdWlkaXR5RGVsdGE6IGxpcXVpZGl0eURlbHRhLAogICAgICAgICAgICBleGVjdXRpb25GZWU6IGV4ZWN1dGlvbkZlZSwKICAgICAgICAgICAgb3JkZXJJZDogb3JkZXJJZAogICAgICAgIH0udG9DZWxsKCkpOwoKICAgICAgICBzZWxmLnJlZnVuZEV4ZWNlc3NUb24oYWNjb3VudCwgZXhlY3V0aW9uRmVlKTsKICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IENyZWF0ZSBEZWNyZWFzZSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgcmVjZWl2ZShtc2c6IENyZWF0ZURlY3JlYXNlTFBQb3NpdGlvbk9yZGVyKSB7CiAgICAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKICAgICAgICAvLyBjaGVjayBnYXMKICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSAtIG1zZy5leGVjdXRpb25GZWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiAyICsgc2VsZi5nYXNDb25zdW1wdGlvbiArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UsICJnYXMgbm90IGVub3VnaCIpOwogICAgICAgIC8vIGNoZWNrIGV4ZWN1dGlvbiBmZWUKICAgICAgICByZXF1aXJlKG1zZy5leGVjdXRpb25GZWUgPj0gc2VsZi5taW5FeGVjdXRpb25GZWUsICJleGVjdXRpb24gZmVlIG5vdCBlbm91Z2giKTsKCiAgICAgICAgLy8gYWRkIG5ldyBvcmRlcgogICAgICAgIGxldCBvcmRlcklkOiBJbnQgPSBzZWxmLmxwUG9zaXRpb25PcmRlckluZGV4TmV4dDsKICAgICAgICBzZWxmLmxwUG9zaXRpb25PcmRlckluZGV4TmV4dCA9IHNlbGYubHBQb3NpdGlvbk9yZGVySW5kZXhOZXh0ICsgMTsKICAgICAgICBzZWxmLmxwUG9zaXRpb25PcmRlcnMuc2V0KG9yZGVySWQsIExQUG9zaXRpb25PcmRlcnsKICAgICAgICAgICAgb3BUeXBlOiBPUkRFUl9PUF9UWVBFX0RFQ1JFQVNFLAogICAgICAgICAgICBhY2NvdW50OiBzZW5kZXIoKSwKICAgICAgICAgICAgbWFyZ2luRGVsdGE6IG1zZy5tYXJnaW5EZWx0YSwKICAgICAgICAgICAgbGlxdWlkaXR5RGVsdGE6IG1zZy5saXF1aWRpdHlEZWx0YSwKICAgICAgICAgICAgZXhlY3V0aW9uRmVlOiBtc2cuZXhlY3V0aW9uRmVlLAogICAgICAgICAgICBibG9ja1RpbWU6IG5vdygpLAogICAgICAgICAgICBpc1BlbmRpbmc6IGZhbHNlLAogICAgICAgICAgICBjYWxsYmFja0lkOiBudWxsLAogICAgICAgICAgICBleGVjdXRpb25GZWVSZWNlaXZlcjogbnVsbCwKICAgICAgICAgICAgbGFzdE9wZXJhdG9yOiBudWxsCiAgICAgICAgfSk7CgogICAgICAgIC8vIGV2ZW50CiAgICAgICAgZW1pdChMUFBvc2l0aW9uT3JkZXJDcmVhdGVkRXZlbnR7CiAgICAgICAgICAgIG9wVHlwZTogT1JERVJfT1BfVFlQRV9ERUNSRUFTRSwKICAgICAgICAgICAgYWNjb3VudDogc2VuZGVyKCksCiAgICAgICAgICAgIG1hcmdpbkRlbHRhOiBtc2cubWFyZ2luRGVsdGEsCiAgICAgICAgICAgIGxpcXVpZGl0eURlbHRhOiBtc2cubGlxdWlkaXR5RGVsdGEsCiAgICAgICAgICAgIGV4ZWN1dGlvbkZlZTogbXNnLmV4ZWN1dGlvbkZlZSwKICAgICAgICAgICAgb3JkZXJJZDogb3JkZXJJZAogICAgICAgIH0udG9DZWxsKCkpOwoKICAgICAgICAvLyB0cmFuc2ZlciBleGVjZXNzIGdhcwogICAgICAgIHNlbGYucmVmdW5kRXhlY2Vzc1RvbihzZW5kZXIoKSwgbXNnLmV4ZWN1dGlvbkZlZSk7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBDYW5jZWwgSW5jcmVhc2UgLyBEZWNyZWFzZSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgLy8gY2FuY2VsIGluY3JlYXNlID0+IG9yZGVyQm9vayB3YWxsZXQgPT4gdXNlciB3YWxsZXQgPT4gdG9rZW4gZXhjZXNzIGhhbmRlbCBjYW5jZWwgPT4gZXhjZXNzIGdhcwogICAgLy8gY2FuY2VsIGRlY3JlYXNlID0+IGV4Y2VzcyBnYXMKICAgIHJlY2VpdmUobXNnOiBDYW5jZWxMUFBvc2l0aW9uT3JkZXIpIHsKICAgICAgICBsZXQgY3R4OiBDb250ZXh0ID0gY29udGV4dCgpOwogICAgICAgIC8vIGNoZWNrIG9yZGVyCiAgICAgICAgbGV0IG9yZGVyT3B0OiBMUFBvc2l0aW9uT3JkZXI/ID0gc2VsZi5scFBvc2l0aW9uT3JkZXJzLmdldChtc2cub3JkZXJJZCk7CiAgICAgICAgcmVxdWlyZShvcmRlck9wdCAhPSBudWxsLCAib3JkZXIgbm90IGV4aXN0Iik7CiAgICAgICAgbGV0IG9yZGVyOiBMUFBvc2l0aW9uT3JkZXIgPSBvcmRlck9wdCEhOwoKICAgICAgICAvLyBjaGVjayBnYXMKICAgICAgICBpZiAob3JkZXIub3BUeXBlID09IE9SREVSX09QX1RZUEVfSU5DUkVBU0UpIHsKICAgICAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiA0ICsgc2VsZi5nYXNDb25zdW1wdGlvbiAqIDIgKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlICsgdG9uKCIwLjAzMiIpLCAiZ2FzIG5vdCBlbm91Z2giKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDIgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICsgc2VsZi5taW5Ub25zRm9yU3RvcmFnZSwgImdhcyBub3QgZW5vdWdoIik7CiAgICAgICAgfQoKICAgICAgICBzZWxmLnNob3VsZENhbmNlbChvcmRlci5ibG9ja1RpbWUsIHNlbmRlcigpLCBvcmRlci5pc1BlbmRpbmcpOwoKICAgICAgICBpZiAob3JkZXIub3BUeXBlID09IE9SREVSX09QX1RZUEVfSU5DUkVBU0UpIHsKICAgICAgICAgICAgLy8gYWRkIGNhbGxiYWNrCiAgICAgICAgICAgIGxldCBjYWxsYmFja0lkOiBJbnQgPSBzZWxmLmpldHRvbkNhbGxiYWNrUXVlcnlJZE5leHQ7CiAgICAgICAgICAgIHNlbGYuamV0dG9uQ2FsbGJhY2tRdWVyeUlkTmV4dCA9IGNhbGxiYWNrSWQgKyAxOwogICAgICAgICAgICBzZWxmLmpldHRvbkNhbGxiYWNrcy5zZXQoY2FsbGJhY2tJZCwgSmV0dG9uQ2FsbGJhY2t7CiAgICAgICAgICAgICAgICBvcmRlclR5cGU6IE9SREVSX1RZUEVfTFAsCiAgICAgICAgICAgICAgICBvcmRlcklkOiBtc2cub3JkZXJJZCwKICAgICAgICAgICAgICAgIGFtb3VudDogb3JkZXIubWFyZ2luRGVsdGEsCiAgICAgICAgICAgICAgICByZWNlaXZlcjogb3JkZXIuYWNjb3VudCwKICAgICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyB1cGRhdGUgb3JkZXIKICAgICAgICAgICAgaWYgKG1zZy5leGVjdXRpb25GZWVSZWNlaXZlciAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciA9IG1zZy5leGVjdXRpb25GZWVSZWNlaXZlciEhOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgb3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgPSBzZW5kZXIoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBvcmRlci5sYXN0T3BlcmF0b3IgPSBzZW5kZXIoKTsKICAgICAgICAgICAgb3JkZXIuaXNQZW5kaW5nID0gdHJ1ZTsKICAgICAgICAgICAgb3JkZXIuY2FsbGJhY2tJZCA9IGNhbGxiYWNrSWQ7CiAgICAgICAgICAgIHNlbGYubHBQb3NpdGlvbk9yZGVycy5zZXQobXNnLm9yZGVySWQsIG9yZGVyKTsKCiAgICAgICAgICAgIC8vIHRyYW5zZmVyIGpldHRvbgogICAgICAgICAgICBzZWxmLnJlZnVuZEpldHRvbihjYWxsYmFja0lkLCBvcmRlci5tYXJnaW5EZWx0YSwgb3JkZXIuYWNjb3VudCwgbXlBZGRyZXNzKCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGdldCBmZWUgcmVjZWl2ZXIKICAgICAgICAgICAgbGV0IGV4ZWN1dGlvbkZlZVJlY2VpdmVyOiBBZGRyZXNzID0gc2VuZGVyKCk7CiAgICAgICAgICAgIGlmIChtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXIgPSBtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIhITsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gZGVsZXRlIG9yZGVyCiAgICAgICAgICAgIHNlbGYubHBQb3NpdGlvbk9yZGVycy5zZXQobXNnLm9yZGVySWQsIG51bGwpOwogICAgICAgICAgICAvLyBldmVudAogICAgICAgICAgICBlbWl0KExQUG9zaXRpb25PcmRlckNhbmNlbGxlZEV2ZW50ewogICAgICAgICAgICAgICAgb3BUeXBlOiBvcmRlci5vcFR5cGUsCiAgICAgICAgICAgICAgICBvcmRlcklkOiBtc2cub3JkZXJJZCwKICAgICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQKICAgICAgICAgICAgfS50b0NlbGwoKSk7CgogICAgICAgICAgICAvLyB0cmFuc2ZlciBleGVjdXRpb24gZmVlCiAgICAgICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgICAgICB0bzogZXhlY3V0aW9uRmVlUmVjZWl2ZXIsCiAgICAgICAgICAgICAgICBib3VuY2U6IHRydWUsCiAgICAgICAgICAgICAgICB2YWx1ZTogb3JkZXIuZXhlY3V0aW9uRmVlLAogICAgICAgICAgICAgICAgbW9kZTogU2VuZFBheUdhc1NlcGFyYXRlbHkKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyB0cmFuc2ZlciBleGVjZXNzIGdhcwogICAgICAgICAgICBzZWxmLnJlZnVuZEV4ZWNlc3NUb24oc2VuZGVyKCksIDApOwogICAgICAgIH0KICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IEV4ZWN1dGUgSW5jcmVhc2UgLyBEZWNyZWFzZSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgLy8gZXhlY3V0ZSBpbmNyZWFzZSA9PiBpbmNyZWFzZSBwb3NpdGlvbiBmb3IgcG9vbCA9PiBpbmNyZWFzZSBzdWNjZXNzIC8gYm91bmNlZCA9PiBleGNlc3MgZ2FzCiAgICAvLyBleGVjdXRlIGRlY3JlYXNlID0+IGRlY3JlYXNlIHBvc2l0aW9uIGZvciBwb29sID0+IGRlY3JlYXNlIHN1Y2Nlc3MgPT4gb3JkZXJCb29rIHdhbGxldCA9PiB1c2VyIHdhbGxldCA9PiB0b2tlbiBleGNlc3NlcyBoYW5kZWwgY2FuY2VsID0+IGV4Y2VzcyBnYXMKICAgIHJlY2VpdmUobXNnOiBFeGVjdXRlTFBQb3NpdGlvbk9yZGVyKSB7CiAgICAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKCiAgICAgICAgLy8gY2hlY2sgb3JkZXIKICAgICAgICBsZXQgb3JkZXJPcHQ6IExQUG9zaXRpb25PcmRlcj8gPSBzZWxmLmxwUG9zaXRpb25PcmRlcnMuZ2V0KG1zZy5vcmRlcklkKTsKICAgICAgICByZXF1aXJlKG9yZGVyT3B0ICE9IG51bGwsICJvcmRlciBub3QgZXhpc3QiKTsKCiAgICAgICAgbGV0IG9yZGVyOiBMUFBvc2l0aW9uT3JkZXIgPSBvcmRlck9wdCEhOwoKICAgICAgICAvLyBjaGVjayBnYXMKICAgICAgICBpZiAob3JkZXIub3BUeXBlID09IE9SREVSX09QX1RZUEVfSU5DUkVBU0UpIHsKICAgICAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiAzICsgc2VsZi5nYXNDb25zdW1wdGlvbiAqIDIgKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlICsgc2VsZi5nZXRQb29sR2FzKCksICJnYXMgbm90IGVub3VnaCIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlcXVpcmUoY3R4LnZhbHVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICogNiArIHNlbGYuZ2FzQ29uc3VtcHRpb24gKiAzICsgc2VsZi5taW5Ub25zRm9yU3RvcmFnZSArIHNlbGYuZ2V0UG9vbEdhcygpICsgdG9uKCIwLjAzMiIpLCAiZ2FzIG5vdCBlbm91Z2giKTsKICAgICAgICB9CgogICAgICAgIHNlbGYuc2hvdWxkRXhlY3V0ZShvcmRlci5ibG9ja1RpbWUsIG9yZGVyLmlzUGVuZGluZyk7CgogICAgICAgIC8vIHVwZGF0ZSBvcmRlcgogICAgICAgIGlmIChtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgIT0gbnVsbCkgewogICAgICAgICAgICBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciA9IG1zZy5leGVjdXRpb25GZWVSZWNlaXZlciEhOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyID0gc2VuZGVyKCk7CiAgICAgICAgfQogICAgICAgIG9yZGVyLmlzUGVuZGluZyA9IHRydWU7CiAgICAgICAgc2VsZi5scFBvc2l0aW9uT3JkZXJzLnNldChtc2cub3JkZXJJZCwgb3JkZXIpOwoKICAgICAgICAvLyBzZW5kIHVwZGF0ZSBwb3NpdGlvbiBtc2cKICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgICAgICB0bzogc2VsZi5wb29sLAogICAgICAgICAgICB2YWx1ZTogMCwKICAgICAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLAogICAgICAgICAgICBib3VuY2U6IHRydWUsCiAgICAgICAgICAgIGJvZHk6IFVwZGF0ZUxQUG9zaXRpb24gewogICAgICAgICAgICAgICAgb3JkZXJJZDogbXNnLm9yZGVySWQsCiAgICAgICAgICAgICAgICBvcFR5cGU6IG9yZGVyLm9wVHlwZSwKICAgICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQsCiAgICAgICAgICAgICAgICBhY2NvdW50OiBvcmRlci5hY2NvdW50LAogICAgICAgICAgICAgICAgbWFyZ2luRGVsdGE6IG9yZGVyLm1hcmdpbkRlbHRhLAogICAgICAgICAgICAgICAgbGlxdWlkaXR5RGVsdGE6IG9yZGVyLmxpcXVpZGl0eURlbHRhLAogICAgICAgICAgICAgICAgcHJpY2VzTGVuZ3RoOiBtc2cucHJpY2VzTGVuZ3RoLAogICAgICAgICAgICAgICAgcHJpY2VzOiBtc2cucHJpY2VzCiAgICAgICAgICAgIH0udG9DZWxsKCkKICAgICAgICB9KTsKICAgICAgICBkdW1wKCJleGVjdXRlIExQIGluY3JlYXNlIG9yZGVyIHNlbmQgbXNnIHRvIHBvb2wiKTsKICAgIH0KCiAgICAvLyBpbmNyZWFzZSBzdWNjZXNzIC8gYm91bmNlZCA9PiBleGNlc3MgZ2FzCiAgICAvLyBkZWNyZWFzZSBzdWNjZXNzID0+IG9yZGVyQm9vayB3YWxsZXQgPT4gdXNlciB3YWxsZXQgPT4gdG9rZW4gZXhjZXNzZXMgaGFuZGVsIGNhbmNlbCA9PiBleGNlc3MgZ2FzCiAgICByZWNlaXZlKG1zZzogVXBkYXRlTFBQb3NpdGlvblN1Y2Nlc3MpIHsKICAgICAgICBkdW1wKCJyZWNlaXZlIHVwZGF0ZSBMUCBwb3NpdGlvbiBzdWNjZXNzIik7CiAgICAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKICAgICAgICByZXF1aXJlKHNlbmRlcigpID09IHNlbGYucG9vbCwgImludmFsaWQgc2VuZGVyIik7CgogICAgICAgIC8vIGdldCBvcmRlcgogICAgICAgIGxldCBvcmRlck9wdDogTFBQb3NpdGlvbk9yZGVyPyA9IHNlbGYubHBQb3NpdGlvbk9yZGVycy5nZXQobXNnLm9yZGVySWQpOwogICAgICAgIGlmIChvcmRlck9wdCA9PSBudWxsKSB7CiAgICAgICAgICAgIGR1bXAoIm9yZGVyIG5vdCBleGlzdCIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGxldCBvcmRlcjogTFBQb3NpdGlvbk9yZGVyID0gb3JkZXJPcHQhITsKCiAgICAgICAgLy8gY2hlY2sgZ2FzCiAgICAgICAgaWYgKG9yZGVyLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFKSB7CiAgICAgICAgICAgIHJlcXVpcmUoY3R4LnZhbHVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICogMiArIHNlbGYuZ2FzQ29uc3VtcHRpb24sICJnYXMgbm90IGVub3VnaCIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlcXVpcmUoY3R4LnZhbHVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICogNCArIHNlbGYuZ2FzQ29uc3VtcHRpb24gKiAyICsgdG9uKCIwLjAzMiIpLCAiZ2FzIG5vdCBlbm91Z2giKTsKICAgICAgICB9CgogICAgICAgIGlmIChvcmRlci5vcFR5cGUgPT0gT1JERVJfT1BfVFlQRV9JTkNSRUFTRSkgewogICAgICAgICAgICAvLyBkZWxldGUgb3JkZXIKICAgICAgICAgICAgc2VsZi5scFBvc2l0aW9uT3JkZXJzLnNldChtc2cub3JkZXJJZCwgbnVsbCk7CiAgICAgICAgICAgIC8vIGV2ZW50CiAgICAgICAgICAgIGVtaXQoTFBQb3NpdGlvbk9yZGVyRXhlY3V0ZWRFdmVudHsKICAgICAgICAgICAgICAgIG9wVHlwZTogb3JkZXIub3BUeXBlLAogICAgICAgICAgICAgICAgb3JkZXJJZDogbXNnLm9yZGVySWQsCiAgICAgICAgICAgICAgICB0cnhJZDogbXNnLnRyeElkCiAgICAgICAgICAgIH0udG9DZWxsKCkpOwoKICAgICAgICAgICAgLy8gdHJhbnNmZXIgZXhlY3V0aW9uIGZlZQogICAgICAgICAgICBpZiAob3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICAgICAgICAgICAgICB0bzogb3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIhISwKICAgICAgICAgICAgICAgICAgICBib3VuY2U6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG9yZGVyLmV4ZWN1dGlvbkZlZSwKICAgICAgICAgICAgICAgICAgICBtb2RlOiBTZW5kUGF5R2FzU2VwYXJhdGVseQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIHRyYW5zZmVyIGV4ZWNlc3MgZ2FzCiAgICAgICAgICAgIGlmIChvcmRlci5sYXN0T3BlcmF0b3IgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgc2VsZi5yZWZ1bmRFeGVjZXNzVG9uKG9yZGVyLmxhc3RPcGVyYXRvciEhLCAwKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxldCByZWNlaXZlcjogQWRkcmVzcyA9IG9yZGVyLmFjY291bnQ7CiAgICAgICAgICAgIGlmIChvcmRlci5vcFR5cGUgPT0gT1JERVJfT1BfVFlQRV9MSVFVSURBVElPTikgewogICAgICAgICAgICAgICAgcmVjZWl2ZXIgPSBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciEhOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGFkZCBjYWxsYmFjawogICAgICAgICAgICBsZXQgY2FsbGJhY2tJZDogSW50ID0gc2VsZi5qZXR0b25DYWxsYmFja1F1ZXJ5SWROZXh0OwogICAgICAgICAgICBzZWxmLmpldHRvbkNhbGxiYWNrUXVlcnlJZE5leHQgPSBjYWxsYmFja0lkICsgMTsKICAgICAgICAgICAgc2VsZi5qZXR0b25DYWxsYmFja3Muc2V0KGNhbGxiYWNrSWQsIEpldHRvbkNhbGxiYWNrewogICAgICAgICAgICAgICAgb3JkZXJUeXBlOiBPUkRFUl9UWVBFX0xQLAogICAgICAgICAgICAgICAgb3JkZXJJZDogbXNnLm9yZGVySWQsCiAgICAgICAgICAgICAgICBhbW91bnQ6IG1zZy5yZWNlaXZlLAogICAgICAgICAgICAgICAgcmVjZWl2ZXI6IHJlY2VpdmVyLAogICAgICAgICAgICAgICAgdHJ4SWQ6IG1zZy50cnhJZAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIG9yZGVyLmNhbGxiYWNrSWQgPSBjYWxsYmFja0lkOwogICAgICAgICAgICBzZWxmLmxwUG9zaXRpb25PcmRlcnMuc2V0KG1zZy5vcmRlcklkLCBvcmRlcik7CgogICAgICAgICAgICAvLyB0cmFuc2ZlciBqZXR0b24KICAgICAgICAgICAgc2VsZi5yZWZ1bmRKZXR0b24oY2FsbGJhY2tJZCwgbXNnLnJlY2VpdmUsIHJlY2VpdmVyLCBteUFkZHJlc3MoKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIHJlc2V0IG9yZGVyIHBlbmRpbmcKICAgIGJvdW5jZWQoc3JjOiBib3VuY2VkPFVwZGF0ZUxQUG9zaXRpb24+KSB7CiAgICAgICAgZHVtcCgiaW5jcmVhc2UgbHAgcG9zaXRpb24gZmFpbGVkIik7CgogICAgICAgIC8vIGdldCBvcmRlcgogICAgICAgIGxldCBvcmRlck9wdDogTFBQb3NpdGlvbk9yZGVyPyA9IHNlbGYubHBQb3NpdGlvbk9yZGVycy5nZXQoc3JjLm9yZGVySWQpOwogICAgICAgIGlmIChvcmRlck9wdCA9PSBudWxsKSB7CiAgICAgICAgICAgIGR1bXAoIm9yZGVyIG5vdCBleGlzdCIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGxldCBvcmRlcjogTFBQb3NpdGlvbk9yZGVyID0gb3JkZXJPcHQhITsKICAgICAgICBpZiAob3JkZXIub3BUeXBlID09IE9SREVSX09QX1RZUEVfTElRVUlEQVRJT04pIHsKICAgICAgICAgICAgLy8gZGVsZXRlCiAgICAgICAgICAgIHNlbGYubHBQb3NpdGlvbk9yZGVycy5zZXQoc3JjLm9yZGVySWQsIG51bGwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIHVwZGF0ZSBwZW5kaW5nCiAgICAgICAgICAgIG9yZGVyLmlzUGVuZGluZyA9IGZhbHNlOwogICAgICAgICAgICBzZWxmLmxwUG9zaXRpb25PcmRlcnMuc2V0KHNyYy5vcmRlcklkLCBvcmRlcik7CiAgICAgICAgfQogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gTGlxdWlkYXRpb24gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIHJlY2VpdmUobXNnOiBMaXF1aWRhdGVMUFBvc2l0aW9uT3JkZXIpIHsKICAgICAgICBsZXQgY3R4OiBDb250ZXh0ID0gY29udGV4dCgpOwoKICAgICAgICAvLyBjaGVjayBnYXMKICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDYgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICogMyArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UgKyBzZWxmLmdldFBvb2xHYXMoKSArIHRvbigiMC4wMzIiKSwgImdhcyBub3QgZW5vdWdoIik7CgogICAgICAgIC8vIGNoZWNrIHNlbmRlcgogICAgICAgIGxldCBpc0V4ZWN1dG9yOiBCb29sID0gZmFsc2U7CiAgICAgICAgbGV0IGlzRXhlY3V0b3JPcHQ6IEJvb2w/ID0gc2VsZi5leGVjdXRvcnMuZ2V0KHNlbmRlcigpKTsKICAgICAgICBpZiAoaXNFeGVjdXRvck9wdCAhPSBudWxsKSB7CiAgICAgICAgICAgIGlzRXhlY3V0b3IgPSBpc0V4ZWN1dG9yT3B0ISE7CiAgICAgICAgfQogICAgICAgIHJlcXVpcmUoaXNFeGVjdXRvciwgImludmFsaWQgc2VuZGVyIik7CgogICAgICAgIC8vIGZlZSByZWNlaXZlcgogICAgICAgIGxldCBleGVjdXRpb25GZWVSZWNlaXZlcjogQWRkcmVzcyA9IHNlbmRlcigpOwogICAgICAgIGlmIChtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgIT0gbnVsbCkgewogICAgICAgICAgICBleGVjdXRpb25GZWVSZWNlaXZlciA9IG1zZy5leGVjdXRpb25GZWVSZWNlaXZlciEhOwogICAgICAgIH0KCiAgICAgICAgLy8gYWRkIG5ldyBvcmRlcgogICAgICAgIGxldCBvcmRlcklkOiBJbnQgPSBzZWxmLmxwUG9zaXRpb25PcmRlckluZGV4TmV4dDsKICAgICAgICBzZWxmLmxwUG9zaXRpb25PcmRlckluZGV4TmV4dCA9IHNlbGYubHBQb3NpdGlvbk9yZGVySW5kZXhOZXh0ICsgMTsKICAgICAgICBzZWxmLmxwUG9zaXRpb25PcmRlcnMuc2V0KG9yZGVySWQsIExQUG9zaXRpb25PcmRlcnsKICAgICAgICAgICAgb3BUeXBlOiBPUkRFUl9PUF9UWVBFX0xJUVVJREFUSU9OLAogICAgICAgICAgICBhY2NvdW50OiBtc2cuYWNjb3VudCwKICAgICAgICAgICAgbWFyZ2luRGVsdGE6IDAsCiAgICAgICAgICAgIGxpcXVpZGl0eURlbHRhOiAwLAogICAgICAgICAgICBleGVjdXRpb25GZWU6IDAsCiAgICAgICAgICAgIGJsb2NrVGltZTogbm93KCksCiAgICAgICAgICAgIGlzUGVuZGluZzogdHJ1ZSwKICAgICAgICAgICAgY2FsbGJhY2tJZDogbnVsbCwKICAgICAgICAgICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IGV4ZWN1dGlvbkZlZVJlY2VpdmVyLAogICAgICAgICAgICBsYXN0T3BlcmF0b3I6IHNlbmRlcigpCiAgICAgICAgfSk7CgogICAgICAgIC8vIHNlbmQgdXBkYXRlIHBvc2l0aW9uIG1zZwogICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgIHRvOiBzZWxmLnBvb2wsCiAgICAgICAgICAgIHZhbHVlOiAwLAogICAgICAgICAgICBtb2RlOiBTZW5kUmVtYWluaW5nVmFsdWUsCiAgICAgICAgICAgIGJvdW5jZTogdHJ1ZSwKICAgICAgICAgICAgYm9keTogVXBkYXRlTFBQb3NpdGlvbiB7CiAgICAgICAgICAgICAgICBvcFR5cGU6IE9SREVSX09QX1RZUEVfTElRVUlEQVRJT04sCiAgICAgICAgICAgICAgICBvcmRlcklkOiBvcmRlcklkLAogICAgICAgICAgICAgICAgdHJ4SWQ6IG1zZy50cnhJZCwKICAgICAgICAgICAgICAgIGFjY291bnQ6IG1zZy5hY2NvdW50LAogICAgICAgICAgICAgICAgbWFyZ2luRGVsdGE6IDAsCiAgICAgICAgICAgICAgICBsaXF1aWRpdHlEZWx0YTogMCwKICAgICAgICAgICAgICAgIHByaWNlc0xlbmd0aDogbXNnLnByaWNlc0xlbmd0aCwKICAgICAgICAgICAgICAgIHByaWNlczogbXNnLnByaWNlcwogICAgICAgICAgICB9LnRvQ2VsbCgpCiAgICAgICAgfSk7CiAgICAgICAgZHVtcCgibGlxdWlkYXRlIExQIHNlbmQgbXNnIHRvIHBvb2wiKTsKICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IENhbGxiYWNrIENhbmNlbCBJbmNyZWFzZSAvIEV4ZWN1dGUgRGVjcmVhc2UgLyBFeGVjdXRlIExpcXVpZGF0aW9uID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCiAgICBmdW4gaGFuZGVsTFBQb3NpdGlvbk9yZGVyQ2FsbGJhY2sob3JkZXJJZDogSW50LCB0cnhJZDogSW50KSB7CiAgICAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKCiAgICAgICAgLy8gY2hlY2sgZ2FzCiAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKyBzZWxmLmdhc0NvbnN1bXB0aW9uLCAiZ2FzIG5vdCBlbm91Z2giKTsKCiAgICAgICAgLy8gZ2V0IG9yZGVyCiAgICAgICAgbGV0IG9yZGVyT3B0OiBMUFBvc2l0aW9uT3JkZXI/ID0gc2VsZi5scFBvc2l0aW9uT3JkZXJzLmdldChvcmRlcklkKTsKICAgICAgICBpZiAob3JkZXJPcHQgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGxldCBvcmRlcjogTFBQb3NpdGlvbk9yZGVyID0gb3JkZXJPcHQhITsKCiAgICAgICAgLy8gZGVsZXRlIG9yZGVyCiAgICAgICAgc2VsZi5scFBvc2l0aW9uT3JkZXJzLnNldChvcmRlcklkLCBudWxsKTsKCiAgICAgICAgaWYgKG9yZGVyLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFKSB7CiAgICAgICAgICAgIC8vIGV2ZW50CiAgICAgICAgICAgIGVtaXQoTFBQb3NpdGlvbk9yZGVyQ2FuY2VsbGVkRXZlbnR7CiAgICAgICAgICAgICAgICBvcFR5cGU6IG9yZGVyLm9wVHlwZSwKICAgICAgICAgICAgICAgIG9yZGVySWQ6IG9yZGVySWQsCiAgICAgICAgICAgICAgICB0cnhJZDogdHJ4SWQKICAgICAgICAgICAgfS50b0NlbGwoKSk7CgogICAgICAgICAgICAvLyB0cmFuc2ZlciBleGVjdXRpb24gZmVlCiAgICAgICAgICAgIGlmIChvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgICAgICAgICAgICAgIHRvOiBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciEhLAogICAgICAgICAgICAgICAgICAgIGJvdW5jZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb3JkZXIuZXhlY3V0aW9uRmVlLAogICAgICAgICAgICAgICAgICAgIG1vZGU6IFNlbmRQYXlHYXNTZXBhcmF0ZWx5CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBkdW1wKCJjYW5jZWwgTFAgaW5jcmVhc2Ugb3JkZXIgc3VjY2VzcyIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGV2ZW50CiAgICAgICAgICAgIGVtaXQoTFBQb3NpdGlvbk9yZGVyRXhlY3V0ZWRFdmVudHsKICAgICAgICAgICAgICAgIG9wVHlwZTogb3JkZXIub3BUeXBlLAogICAgICAgICAgICAgICAgb3JkZXJJZDogb3JkZXJJZCwKICAgICAgICAgICAgICAgIHRyeElkOiB0cnhJZAogICAgICAgICAgICB9LnRvQ2VsbCgpKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIHRyYW5zZmVyIGV4ZWN1dGlvbiBmZWUKICAgICAgICAgICAgaWYgKG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwgJiYgb3JkZXIuZXhlY3V0aW9uRmVlICE9IDApIHsKICAgICAgICAgICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgICAgICAgICAgdG86IG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyISEsCiAgICAgICAgICAgICAgICAgICAgYm91bmNlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvcmRlci5leGVjdXRpb25GZWUsCiAgICAgICAgICAgICAgICAgICAgbW9kZTogU2VuZFBheUdhc1NlcGFyYXRlbHkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyB0cmFuc2ZlciBleGVjZXNzIGdhcwogICAgICAgIGlmIChvcmRlci5sYXN0T3BlcmF0b3IgIT0gbnVsbCkgewogICAgICAgICAgICBzZWxmLnJlZnVuZEV4ZWNlc3NUb24ob3JkZXIubGFzdE9wZXJhdG9yISEsIDApOwogICAgICAgIH0KICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IENvbXBlbnNhdGUgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIC8vIHJlY2VpdmUobXNnOiBDb21wZW5zYXRlTFBQb3NpdGlvbk9yZGVyKSB7CiAgICAvLyAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKCiAgICAvLyAgICAgLy8gY2hlY2sgY29tcGVuc2F0b3IKICAgIC8vICAgICBsZXQgaXNDb21wZW5zYXRvcjogQm9vbCA9IGZhbHNlOwogICAgLy8gICAgIGxldCBpc0NvbXBlbnNhdG9yT3B0OiBCb29sPyA9IHNlbGYuY29tcGVuc2F0b3JzLmdldChzZW5kZXIoKSk7CiAgICAvLyAgICAgaWYgKGlzQ29tcGVuc2F0b3JPcHQgIT0gbnVsbCkgewogICAgLy8gICAgICAgICBpc0NvbXBlbnNhdG9yID0gaXNDb21wZW5zYXRvck9wdCEhOwogICAgLy8gICAgIH0KICAgIC8vICAgICByZXF1aXJlKGlzQ29tcGVuc2F0b3IsICJub3QgY29tcGVuc2F0b3IiKTsKICAgICAgICAKICAgIC8vICAgICAvLyBjaGVjayBvcmRlciBwZW5kaW5nCiAgICAvLyAgICAgbGV0IG9yZGVyT3B0OiBMUFBvc2l0aW9uT3JkZXI/ID0gc2VsZi5scFBvc2l0aW9uT3JkZXJzLmdldChtc2cub3JkZXJJZCk7CiAgICAvLyAgICAgcmVxdWlyZShvcmRlck9wdCAhPSBudWxsLCAib3JkZXIgbm90IGV4aXN0Iik7CiAgICAvLyAgICAgbGV0IG9yZGVyOiBMUFBvc2l0aW9uT3JkZXIgPSBvcmRlck9wdCEhOwoKICAgIC8vICAgICAvLyBjaGVjayBnYXMKICAgIC8vICAgICBpZiAob3JkZXIub3BUeXBlID09IE9SREVSX09QX1RZUEVfSU5DUkVBU0UpIHsKICAgIC8vICAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiAzICsgc2VsZi5nYXNDb25zdW1wdGlvbiAqIDIgKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlICsgc2VsZi5nZXRQb29sR2FzKCksICJnYXMgbm90IGVub3VnaCIpOwogICAgLy8gICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICAgIHJlcXVpcmUoY3R4LnZhbHVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICogNiArIHNlbGYuZ2FzQ29uc3VtcHRpb24gKiAzICsgc2VsZi5taW5Ub25zRm9yU3RvcmFnZSArIHNlbGYuZ2V0UG9vbEdhcygpICsgdG9uKCIwLjAzMiIpLCAiZ2FzIG5vdCBlbm91Z2giKTsKICAgIC8vICAgICB9CgogICAgLy8gICAgIHJlcXVpcmUob3JkZXIuaXNQZW5kaW5nLCAib3JkZXIgbm90IHBlbmRpbmciKTsKCiAgICAvLyAgICAgLy8gcmVmdW5kCiAgICAvLyAgICAgaWYgKG1zZy5uZWVkUmVmdW5kKSB7CiAgICAvLyAgICAgICAgIC8vIGluY3JlYXNlIHBvc2l0aW9uIGZhaWxlZCwgY2FuY2VsIG9yZGVyCiAgICAvLyAgICAgICAgIC8vIHJlZnVuZCBqZXR0b24gZmFpbGVkCiAgICAvLyAgICAgICAgIC8vIGdldCBjYWxsYmFjawogICAgLy8gICAgICAgICByZXF1aXJlKG9yZGVyLmNhbGxiYWNrSWQgIT0gbnVsbCwgImpldHRvbiBjYWxsYmFjayBub3QgZXhpc3QiKTsKICAgIC8vICAgICAgICAgbGV0IGNhbGxiYWNrSWQ6IEludCA9IG9yZGVyLmNhbGxiYWNrSWQhITsKICAgIC8vICAgICAgICAgbGV0IGpldHRvbkNhbGxiYWNrT3B0OiBKZXR0b25DYWxsYmFjaz8gPSBzZWxmLmpldHRvbkNhbGxiYWNrcy5nZXQoY2FsbGJhY2tJZCk7CiAgICAvLyAgICAgICAgIGlmIChqZXR0b25DYWxsYmFja09wdCA9PSBudWxsKSB7CiAgICAvLyAgICAgICAgICAgICByZXR1cm47CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgICAgbGV0IGpldHRvbkNhbGxiYWNrOiBKZXR0b25DYWxsYmFjayA9IGpldHRvbkNhbGxiYWNrT3B0ISE7CiAgICAvLyAgICAgICAgIC8vIHVwZGF0ZSB0cnhJZAogICAgLy8gICAgICAgICBqZXR0b25DYWxsYmFjay50cnhJZCA9IG1zZy50cnhJZDsKICAgIC8vICAgICAgICAgc2VsZi5qZXR0b25DYWxsYmFja3Muc2V0KGNhbGxiYWNrSWQsIGpldHRvbkNhbGxiYWNrKTsKCiAgICAvLyAgICAgICAgIC8vIHVwZGF0ZSBleGVjdXRpb24gZmVlIHJlY2VpdmVyCiAgICAvLyAgICAgICAgIGlmIChtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgIT0gbnVsbCkgewogICAgLy8gICAgICAgICAgICAgb3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgPSBtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIhITsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgICBvcmRlci5sYXN0T3BlcmF0b3IgPSBzZW5kZXIoKTsKICAgIC8vICAgICAgICAgc2VsZi5scFBvc2l0aW9uT3JkZXJzLnNldChtc2cub3JkZXJJZCwgb3JkZXIpOwoKICAgIC8vICAgICAgICAgLy8gdHJhbnNmZXIgamV0dG9uCiAgICAvLyAgICAgICAgIHNlbGYucmVmdW5kSmV0dG9uKGNhbGxiYWNrSWQsIGpldHRvbkNhbGxiYWNrLmFtb3VudCwgamV0dG9uQ2FsbGJhY2sucmVjZWl2ZXIsIG15QWRkcmVzcygpKTsKICAgIC8vICAgICAgICAgcmV0dXJuOwogICAgLy8gICAgIH0KCiAgICAvLyAgICAgaWYgKG1zZy5pc0V4ZWN1dGUpIHsKICAgIC8vICAgICAgICAgLy8gZGVsZXRlIG9yZGVyCiAgICAvLyAgICAgICAgIHNlbGYubHBQb3NpdGlvbk9yZGVycy5zZXQobXNnLm9yZGVySWQsIG51bGwpOwogICAgLy8gICAgICAgICAvLyBldmVudAogICAgLy8gICAgICAgICBlbWl0KExQUG9zaXRpb25PcmRlckV4ZWN1dGVkRXZlbnR7CiAgICAvLyAgICAgICAgICAgICBvcFR5cGU6IG9yZGVyLm9wVHlwZSwKICAgIC8vICAgICAgICAgICAgIG9yZGVySWQ6IG1zZy5vcmRlcklkLAogICAgLy8gICAgICAgICAgICAgdHJ4SWQ6IG1zZy50cnhJZAogICAgLy8gICAgICAgICB9LnRvQ2VsbCgpKTsKICAgIC8vICAgICB9IGVsc2UgewogICAgLy8gICAgICAgICBpZiAob3JkZXIuY2FsbGJhY2tJZCAhPSBudWxsKSB7CiAgICAvLyAgICAgICAgICAgICAvLyBkZWxldGUgY2FsbGJhY2sKICAgIC8vICAgICAgICAgICAgIHNlbGYuamV0dG9uQ2FsbGJhY2tzLnNldChvcmRlci5jYWxsYmFja0lkISEsIG51bGwpOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICAgIC8vIGRlbGV0ZSBvcmRlcgogICAgLy8gICAgICAgICBzZWxmLmxwUG9zaXRpb25PcmRlcnMuc2V0KG1zZy5vcmRlcklkLCBudWxsKTsKICAgIC8vICAgICAgICAgLy8gZXZlbnQKICAgIC8vICAgICAgICAgZW1pdChMUFBvc2l0aW9uT3JkZXJDYW5jZWxsZWRFdmVudHsKICAgIC8vICAgICAgICAgICAgIG9wVHlwZTogb3JkZXIub3BUeXBlLAogICAgLy8gICAgICAgICAgICAgb3JkZXJJZDogbXNnLm9yZGVySWQsCiAgICAvLyAgICAgICAgICAgICB0cnhJZDogbXNnLnRyeElkCiAgICAvLyAgICAgICAgIH0udG9DZWxsKCkpOwogICAgLy8gICAgIH0KCiAgICAvLyAgICAgLy8gdHJhbnNmZXIgZXhlY3V0aW9uIGZlZQogICAgLy8gICAgIGlmIChvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciAhPSBudWxsICYmIG9yZGVyLmV4ZWN1dGlvbkZlZSAhPSAwKSB7CiAgICAvLyAgICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAvLyAgICAgICAgICAgICB0bzogb3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIhISwKICAgIC8vICAgICAgICAgICAgIGJvdW5jZTogdHJ1ZSwKICAgIC8vICAgICAgICAgICAgIHZhbHVlOiBvcmRlci5leGVjdXRpb25GZWUsCiAgICAvLyAgICAgICAgICAgICBtb2RlOiBTZW5kUGF5R2FzU2VwYXJhdGVseQogICAgLy8gICAgICAgICB9KTsKICAgIC8vICAgICB9CgogICAgLy8gICAgIC8vIHRyYW5zZmVyIGV4ZWNlc3MgZ2FzCiAgICAvLyAgICAgc2VsZi5yZWZ1bmRFeGVjZXNzVG9uKHNlbmRlcigpLCBvcmRlci5leGVjdXRpb25GZWUpOwogICAgLy8gICAgIHJldHVybjsKICAgIC8vIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IEdldHRlciA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgZ2V0IGZ1biBscFBvc2l0aW9uT3JkZXIob3JkZXJJZDogSW50KTogTFBQb3NpdGlvbk9yZGVyPyB7CiAgICAgICAgcmV0dXJuIHNlbGYubHBQb3NpdGlvbk9yZGVycy5nZXQob3JkZXJJZCk7CiAgICB9CgogICAgZ2V0IGZ1biBscFBvc2l0aW9uT3JkZXJJbmRleE5leHQoKTogSW50IHsKICAgICAgICByZXR1cm4gc2VsZi5scFBvc2l0aW9uT3JkZXJJbmRleE5leHQ7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBQZXJwID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IENyZWF0ZSBJbmNyZWFzZSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgZnVuIGhhbmRsZUNyZWF0ZUluY3JlYXNlUGVycFBvc2l0aW9uT3JkZXIocXVlcnlJZDogSW50LCBqZXR0b25Gcm9tQW1vdW50OiBJbnQsIGFjY291bnQ6IEFkZHJlc3MsIGV4ZWN1dGlvbkZlZTogSW50LCBpc01hcmtldDogQm9vbCwKICAgICAgICB0b2tlbklkOiBJbnQsIGlzTG9uZzogQm9vbCwgbWFyZ2luRGVsdGE6IEludCwgc2l6ZURlbHRhOiBJbnQsIHRyaWdnZXJQcmljZTogSW50LCB0cFNpemU6IEludCwgdHBQcmljZTogSW50LCBzbFNpemU6IEludCwgc2xQcmljZTogSW50KSB7CiAgICAgICAgZHVtcCgiaGFuZGxlQ3JlYXRlSW5jcmVhc2VQZXJwUG9zaXRpb25PcmRlciIpOwogICAgICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CgogICAgICAgIGlmIChjdHgudmFsdWUgPCBleGVjdXRpb25GZWUgKyBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDIgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICsgc2VsZi5taW5Ub25zRm9yU3RvcmFnZSkgewogICAgICAgICAgICBkdW1wKCJnYXMgbm90IGVub3VnaCIpOwogICAgICAgICAgICBzZWxmLnJlZnVuZEpldHRvbihxdWVyeUlkLCBqZXR0b25Gcm9tQW1vdW50LCBhY2NvdW50LCBhY2NvdW50KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGpldHRvbkZyb21BbW91bnQgPCBtYXJnaW5EZWx0YSkgewogICAgICAgICAgICBkdW1wKCJyZWZ1bmQgZnJvbSBub3QgZW5vdWdoIG1hcmdpbiIpOwogICAgICAgICAgICBzZWxmLnJlZnVuZEpldHRvbihxdWVyeUlkLCBqZXR0b25Gcm9tQW1vdW50LCBhY2NvdW50LCBhY2NvdW50KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGV4ZWN1dGlvbkZlZSA8IHNlbGYubWluRXhlY3V0aW9uRmVlKSB7CiAgICAgICAgICAgIGR1bXAoImV4ZWN1dGlvbiBmZWUgbm90IGVub3VnaCIpOwogICAgICAgICAgICBzZWxmLnJlZnVuZEpldHRvbihxdWVyeUlkLCBqZXR0b25Gcm9tQW1vdW50LCBhY2NvdW50LCBhY2NvdW50KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8gYWRkIG5ldyBvcmRlcgogICAgICAgIGxldCBvcFR5cGU6IEludCA9IDA7CiAgICAgICAgaWYgKGlzTWFya2V0KSB7CiAgICAgICAgICAgIG9wVHlwZSA9IE9SREVSX09QX1RZUEVfSU5DUkVBU0VfTUFSS0VUOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9wVHlwZSA9IE9SREVSX09QX1RZUEVfSU5DUkVBU0VfTElNSVQ7CiAgICAgICAgfQogICAgICAgIHNlbGYuY3JlYXRlUGVycE9yZGVyKG9wVHlwZSwgYWNjb3VudCwgdG9rZW5JZCwgaXNMb25nLCBtYXJnaW5EZWx0YSwgc2l6ZURlbHRhLCB0cmlnZ2VyUHJpY2UsIAogICAgICAgICAgICB0cFNpemUsIHRwUHJpY2UsIHNsU2l6ZSwgc2xQcmljZSwgZXhlY3V0aW9uRmVlKTsKCiAgICAgICAgc2VsZi5yZWZ1bmRFeGVjZXNzVG9uKGFjY291bnQsIGV4ZWN1dGlvbkZlZSk7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBDcmVhdGUgRGVjcmVhc2UgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIHJlY2VpdmUobXNnOiBDcmVhdGVEZWNyZWFzZVBlcnBQb3NpdGlvbk9yZGVyKSB7CiAgICAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKICAgICAgICAvLyBjaGVjayBnYXMKICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSAtIG1zZy5leGVjdXRpb25GZWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiAyICsgc2VsZi5nYXNDb25zdW1wdGlvbiArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UsICJnYXMgbm90IGVub3VnaCIpOwogICAgICAgIC8vIGNoZWNrIGV4ZWN1dGlvbiBmZWUgVE9ETyB0cC9zbAogICAgICAgIHJlcXVpcmUobXNnLmV4ZWN1dGlvbkZlZSA+PSBzZWxmLm1pbkV4ZWN1dGlvbkZlZSwgImV4ZWN1dGlvbiBmZWUgbm90IGVub3VnaCIpOwogICAgICAgIHJlcXVpcmUobXNnLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0RFQ1JFQVNFX01BUktFVCB8fCBtc2cub3BUeXBlID09IE9SREVSX09QX1RZUEVfREVDUkVBU0VfVFAgfHwgbXNnLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0RFQ1JFQVNFX1NMLCAiaW52YWxpZCBvcCB0eXBlIik7CgogICAgICAgIC8vIGFkZCBuZXcgb3JkZXIKICAgICAgICBzZWxmLmNyZWF0ZVBlcnBPcmRlcihtc2cub3BUeXBlLCBzZW5kZXIoKSwgbXNnLnRva2VuSWQsIG1zZy5pc0xvbmcsIG1zZy5tYXJnaW5EZWx0YSwgbXNnLnNpemVEZWx0YSwgbXNnLnRyaWdnZXJQcmljZSwgCiAgICAgICAgICAgICAgICAwLCAwLCAwLCAwLCBtc2cuZXhlY3V0aW9uRmVlKTsKCiAgICAgICAgLy8gdHJhbnNmZXIgZXhlY2VzcyBnYXMKICAgICAgICBzZWxmLnJlZnVuZEV4ZWNlc3NUb24oc2VuZGVyKCksIG1zZy5leGVjdXRpb25GZWUpOwogICAgfQoKICAgIGZ1biBjcmVhdGVQZXJwT3JkZXIob3BUeXBlOiBJbnQsIGFjY291bnQ6IEFkZHJlc3MsIHRva2VuSWQ6IEludCwgaXNMb25nOiBCb29sLCBtYXJnaW5EZWx0YTogSW50LCBzaXplRGVsdGE6IEludCwgdHJpZ2dlclByaWNlOiBJbnQsIAogICAgICAgIHRwU2l6ZTogSW50LCB0cFByaWNlOiBJbnQsIHNsU2l6ZTogSW50LCBzbFByaWNlOiBJbnQsIGV4ZWN1dGlvbkZlZTogSW50KTogSW50IHsKICAgICAgICBsZXQgdHJpZ2dlckFib3ZlOiBCb29sID0gZmFsc2U7CgogICAgICAgIGxldCBvcmRlcklkOiBJbnQgPSBzZWxmLnBlcnBQb3NpdGlvbk9yZGVySW5kZXhOZXh0OwogICAgICAgIHNlbGYucGVycFBvc2l0aW9uT3JkZXJJbmRleE5leHQgPSBvcmRlcklkICsgMTsKCiAgICAgICAgaWYgKG9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFX01BUktFVCB8fCBvcFR5cGUgPT0gT1JERVJfT1BfVFlQRV9JTkNSRUFTRV9MSU1JVCkgewogICAgICAgICAgICAvLyBpbmNyZWFzZSBmb3IgbG9uZyBvcmRlciwgbXVzdCB0cmlnZ2VyIGJlbG93IHRoZSBwcmljZQogICAgICAgICAgICB0cmlnZ2VyQWJvdmUgPSAhaXNMb25nOwogICAgICAgICAgICBzZWxmLnBlcnBQb3NpdGlvbk9yZGVyRXhzLnNldChvcmRlcklkLCBQZXJwUG9zaXRpb25PcmRlckV4ewogICAgICAgICAgICAgICAgdHBTaXplOiB0cFNpemUsCiAgICAgICAgICAgICAgICB0cFByaWNlOiB0cFByaWNlLAogICAgICAgICAgICAgICAgc2xTaXplOiBzbFNpemUsCiAgICAgICAgICAgICAgICBzbFByaWNlOiBzbFByaWNlCiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChvcFR5cGUgPT0gT1JERVJfT1BfVFlQRV9ERUNSRUFTRV9NQVJLRVQpIHsKICAgICAgICAgICAgICAgIC8vIGRlY3JlYXNlIGZvciBsb25nIG1hcmtldCBvcmRlciwgbXVzdCB0cmlnZ2VyIGFib3ZlIHRoZSBwcmljZQogICAgICAgICAgICAgICAgdHJpZ2dlckFib3ZlID0gaXNMb25nOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYgKG9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0RFQ1JFQVNFX1RQKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gdHAgZm9yIGxvbmcgbGltaXQgb3JkZXIsIG11c3QgdHJpZ2dlciBhYm92ZSB0aGUgcHJpY2UKICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyQWJvdmUgPSBpc0xvbmc7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRyaWdnZXJBYm92ZSA9ICFpc0xvbmc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHNlbGYucGVycFBvc2l0aW9uT3JkZXJzLnNldChvcmRlcklkLCBQZXJwUG9zaXRpb25PcmRlcnsKICAgICAgICAgICAgb3BUeXBlOiBvcFR5cGUsCiAgICAgICAgICAgIHRva2VuSWQ6IHRva2VuSWQsCiAgICAgICAgICAgIGFjY291bnQ6IGFjY291bnQsCiAgICAgICAgICAgIGlzTG9uZzogaXNMb25nLAogICAgICAgICAgICBtYXJnaW5EZWx0YTogbWFyZ2luRGVsdGEsCiAgICAgICAgICAgIHNpemVEZWx0YTogc2l6ZURlbHRhLAogICAgICAgICAgICB0cmlnZ2VyUHJpY2U6IHRyaWdnZXJQcmljZSwKICAgICAgICAgICAgdHJpZ2dlckFib3ZlOiB0cmlnZ2VyQWJvdmUsCiAgICAgICAgICAgIGV4ZWN1dGlvbkZlZTogZXhlY3V0aW9uRmVlLAogICAgICAgICAgICBibG9ja1RpbWU6IG5vdygpLAogICAgICAgICAgICBpc1BlbmRpbmc6IGZhbHNlLAogICAgICAgICAgICBjYWxsYmFja0lkOiBudWxsLAogICAgICAgICAgICBleGVjdXRpb25GZWVSZWNlaXZlcjogbnVsbCwKICAgICAgICAgICAgbGFzdE9wZXJhdG9yOiBudWxsCiAgICAgICAgfSk7CiAgICAgICAgLy8gZXZlbnQKICAgICAgICBlbWl0KFBlcnBQb3NpdGlvbk9yZGVyQ3JlYXRlZEV2ZW50ewogICAgICAgICAgICBvcFR5cGU6IG9wVHlwZSwKICAgICAgICAgICAgdG9rZW5JZDogdG9rZW5JZCwKICAgICAgICAgICAgYWNjb3VudDogYWNjb3VudCwKICAgICAgICAgICAgaXNMb25nOiBpc0xvbmcsCiAgICAgICAgICAgIG1hcmdpbkRlbHRhOiBtYXJnaW5EZWx0YSwKICAgICAgICAgICAgc2l6ZURlbHRhOiBzaXplRGVsdGEsCiAgICAgICAgICAgIGV4ZWN1dGlvbkZlZTogZXhlY3V0aW9uRmVlLAogICAgICAgICAgICBvcmRlcklkOiBvcmRlcklkLAogICAgICAgICAgICB0cmlnZ2VyUHJpY2U6IHRyaWdnZXJQcmljZSwKICAgICAgICAgICAgdHJpZ2dlckFib3ZlOiB0cmlnZ2VyQWJvdmUsCiAgICAgICAgICAgIHRwU2l6ZTogdHBTaXplLAogICAgICAgICAgICB0cFByaWNlOiB0cFByaWNlLAogICAgICAgICAgICBzbFNpemU6IHNsU2l6ZSwKICAgICAgICAgICAgc2xQcmljZTogc2xQcmljZQogICAgICAgIH0udG9DZWxsKCkpOwogICAgICAgIHJldHVybiBvcmRlcklkOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQ2FuY2VsIEluY3JlYXNlIC8gRGVjcmVhc2UgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIC8vIGNhbmNlbCBpbmNyZWFzZSA9PiBvcmRlckJvb2sgd2FsbGV0ID0+IHVzZXIgd2FsbGV0ID0+IHRva2VuIGV4Y2VzcyBoYW5kZWwgY2FuY2VsID0+IGV4Y2VzcyBnYXMKICAgIC8vIGNhbmNlbCBkZWNyZWFzZSA9PiBleGNlc3MgZ2FzCiAgICByZWNlaXZlKG1zZzogQ2FuY2VsUGVycFBvc2l0aW9uT3JkZXIpIHsKICAgICAgICBsZXQgY3R4OiBDb250ZXh0ID0gY29udGV4dCgpOwogICAgICAgIC8vIGNoZWNrIG9yZGVyCiAgICAgICAgbGV0IG9yZGVyT3B0OiBQZXJwUG9zaXRpb25PcmRlcj8gPSBzZWxmLnBlcnBQb3NpdGlvbk9yZGVycy5nZXQobXNnLm9yZGVySWQpOwogICAgICAgIHJlcXVpcmUob3JkZXJPcHQgIT0gbnVsbCwgIm9yZGVyIG5vdCBleGlzdCIpOwogICAgICAgIGxldCBvcmRlcjogUGVycFBvc2l0aW9uT3JkZXIgPSBvcmRlck9wdCEhOwoKICAgICAgICAvLyBjaGVjayBnYXMKICAgICAgICBpZiAob3JkZXIub3BUeXBlID09IE9SREVSX09QX1RZUEVfSU5DUkVBU0VfTUFSS0VUIHx8IG9yZGVyLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFX0xJTUlUKSB7CiAgICAgICAgICAgIHJlcXVpcmUoY3R4LnZhbHVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICogNCArIHNlbGYuZ2FzQ29uc3VtcHRpb24gKiAyICsgc2VsZi5taW5Ub25zRm9yU3RvcmFnZSArIHRvbigiMC4wMzIiKSwgImdhcyBub3QgZW5vdWdoIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiAyICsgc2VsZi5nYXNDb25zdW1wdGlvbiArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UsICJnYXMgbm90IGVub3VnaCIpOwogICAgICAgIH0KCiAgICAgICAgc2VsZi5zaG91bGRDYW5jZWwob3JkZXIuYmxvY2tUaW1lLCBzZW5kZXIoKSwgb3JkZXIuaXNQZW5kaW5nKTsKCiAgICAgICAgaWYgKG9yZGVyLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFX01BUktFVCB8fCBvcmRlci5vcFR5cGUgPT0gT1JERVJfT1BfVFlQRV9JTkNSRUFTRV9MSU1JVCkgewogICAgICAgICAgICAvLyBhZGQgY2FsbGJhY2sKICAgICAgICAgICAgbGV0IGNhbGxiYWNrSWQ6IEludCA9IHNlbGYuamV0dG9uQ2FsbGJhY2tRdWVyeUlkTmV4dDsKICAgICAgICAgICAgc2VsZi5qZXR0b25DYWxsYmFja1F1ZXJ5SWROZXh0ID0gY2FsbGJhY2tJZCArIDE7CiAgICAgICAgICAgIHNlbGYuamV0dG9uQ2FsbGJhY2tzLnNldChjYWxsYmFja0lkLCBKZXR0b25DYWxsYmFja3sKICAgICAgICAgICAgICAgIG9yZGVyVHlwZTogT1JERVJfVFlQRV9QRVJQLAogICAgICAgICAgICAgICAgb3JkZXJJZDogbXNnLm9yZGVySWQsCiAgICAgICAgICAgICAgICBhbW91bnQ6IG9yZGVyLm1hcmdpbkRlbHRhLAogICAgICAgICAgICAgICAgcmVjZWl2ZXI6IG9yZGVyLmFjY291bnQsCiAgICAgICAgICAgICAgICB0cnhJZDogbXNnLnRyeElkCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gdXBkYXRlIG9yZGVyCiAgICAgICAgICAgIGlmIChtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgb3JkZXIuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgPSBtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIhITsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyID0gc2VuZGVyKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb3JkZXIubGFzdE9wZXJhdG9yID0gc2VuZGVyKCk7CiAgICAgICAgICAgIG9yZGVyLmlzUGVuZGluZyA9IHRydWU7CiAgICAgICAgICAgIG9yZGVyLmNhbGxiYWNrSWQgPSBjYWxsYmFja0lkOwogICAgICAgICAgICBzZWxmLnBlcnBQb3NpdGlvbk9yZGVycy5zZXQobXNnLm9yZGVySWQsIG9yZGVyKTsKICAgICAgICAgICAgZHVtcCgiY2FuY2VsIHBlcnAgb3JkZXIiKTsKICAgICAgICAgICAgLy8gdHJhbnNmZXIgamV0dG9uCiAgICAgICAgICAgIHNlbGYucmVmdW5kSmV0dG9uKGNhbGxiYWNrSWQsIG9yZGVyLm1hcmdpbkRlbHRhLCBvcmRlci5hY2NvdW50LCBteUFkZHJlc3MoKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gZ2V0IGZlZSByZWNlaXZlcgogICAgICAgICAgICBsZXQgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3MgPSBzZW5kZXIoKTsKICAgICAgICAgICAgaWYgKG1zZy5leGVjdXRpb25GZWVSZWNlaXZlciAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBleGVjdXRpb25GZWVSZWNlaXZlciA9IG1zZy5leGVjdXRpb25GZWVSZWNlaXZlciEhOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBkZWxldGUgb3JkZXIKICAgICAgICAgICAgc2VsZi5wZXJwUG9zaXRpb25PcmRlcnMuc2V0KG1zZy5vcmRlcklkLCBudWxsKTsKICAgICAgICAgICAgLy8gZXZlbnQKICAgICAgICAgICAgZW1pdChQZXJwUG9zaXRpb25PcmRlckNhbmNlbGxlZEV2ZW50ewogICAgICAgICAgICAgICAgb3BUeXBlOiBvcmRlci5vcFR5cGUsCiAgICAgICAgICAgICAgICBvcmRlcklkOiBtc2cub3JkZXJJZCwKICAgICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQKICAgICAgICAgICAgfS50b0NlbGwoKSk7CgogICAgICAgICAgICAvLyB0cmFuc2ZlciBleGVjdXRpb24gZmVlCiAgICAgICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgICAgICB0bzogZXhlY3V0aW9uRmVlUmVjZWl2ZXIsCiAgICAgICAgICAgICAgICBib3VuY2U6IHRydWUsCiAgICAgICAgICAgICAgICB2YWx1ZTogb3JkZXIuZXhlY3V0aW9uRmVlLAogICAgICAgICAgICAgICAgbW9kZTogU2VuZFBheUdhc1NlcGFyYXRlbHkKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyB0cmFuc2ZlciBleGVjZXNzIGdhcwogICAgICAgICAgICBzZWxmLnJlZnVuZEV4ZWNlc3NUb24oc2VuZGVyKCksIDApOwogICAgICAgIH0KICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IEV4ZWN1dGUgSW5jcmVhc2UgLyBEZWNyZWFzZSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgLy8gZXhlY3V0ZSBpbmNyZWFzZSA9PiBpbmNyZWFzZSBwb3NpdGlvbiBmb3IgcG9vbCA9PiBpbmNyZWFzZSBzdWNjZXNzIC8gYm91bmNlZCA9PiBleGNlc3MgZ2FzCiAgICAvLyBleGVjdXRlIGRlY3JlYXNlID0+IGRlY3JlYXNlIHBvc2l0aW9uIGZvciBwb29sID0+IGRlY3JlYXNlIHN1Y2Nlc3MgPT4gb3JkZXJCb29rIHdhbGxldCA9PiB1c2VyIHdhbGxldCA9PiB0b2tlbiBleGNlc3NlcyBoYW5kZWwgY2FuY2VsID0+IGV4Y2VzcyBnYXMKICAgIHJlY2VpdmUobXNnOiBFeGVjdXRlUGVycFBvc2l0aW9uT3JkZXIpIHsKICAgICAgICBsZXQgY3R4OiBDb250ZXh0ID0gY29udGV4dCgpOwoKICAgICAgICAvLyBjaGVjayBvcmRlcgogICAgICAgIGxldCBvcmRlck9wdDogUGVycFBvc2l0aW9uT3JkZXI/ID0gc2VsZi5wZXJwUG9zaXRpb25PcmRlcnMuZ2V0KG1zZy5vcmRlcklkKTsKICAgICAgICByZXF1aXJlKG9yZGVyT3B0ICE9IG51bGwsICJvcmRlciBub3QgZXhpc3QiKTsKCiAgICAgICAgbGV0IG9yZGVyOiBQZXJwUG9zaXRpb25PcmRlciA9IG9yZGVyT3B0ISE7CgogICAgICAgIC8vIGNoZWNrIGdhcwogICAgICAgIGlmIChvcmRlci5vcFR5cGUgPT0gT1JERVJfT1BfVFlQRV9JTkNSRUFTRV9NQVJLRVQgfHwgb3JkZXIub3BUeXBlID09IE9SREVSX09QX1RZUEVfSU5DUkVBU0VfTElNSVQpIHsKICAgICAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiAzICsgc2VsZi5nYXNDb25zdW1wdGlvbiAqIDIgKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlICsgc2VsZi5nZXRQb29sR2FzKCksICJnYXMgbm90IGVub3VnaCIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlcXVpcmUoY3R4LnZhbHVlID49IGN0eC5yZWFkRm9yd2FyZEZlZSgpICogNiArIHNlbGYuZ2FzQ29uc3VtcHRpb24gKiAzICsgc2VsZi5taW5Ub25zRm9yU3RvcmFnZSArIHNlbGYuZ2V0UG9vbEdhcygpICsgdG9uKCIwLjAzMiIpLCAiZ2FzIG5vdCBlbm91Z2giKTsKICAgICAgICB9CgogICAgICAgIHNlbGYuc2hvdWxkRXhlY3V0ZShvcmRlci5ibG9ja1RpbWUsIG9yZGVyLmlzUGVuZGluZyk7CgogICAgICAgIC8vIHVwZGF0ZSBvcmRlcgogICAgICAgIGlmIChtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIgIT0gbnVsbCkgewogICAgICAgICAgICBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciA9IG1zZy5leGVjdXRpb25GZWVSZWNlaXZlciEhOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyID0gc2VuZGVyKCk7CiAgICAgICAgfQogICAgICAgIG9yZGVyLmlzUGVuZGluZyA9IHRydWU7CiAgICAgICAgc2VsZi5wZXJwUG9zaXRpb25PcmRlcnMuc2V0KG1zZy5vcmRlcklkLCBvcmRlcik7CgogICAgICAgIC8vIHNlbmQgdXBkYXRlIHBvc2l0aW9uIG1zZwogICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgIHRvOiBzZWxmLnBvb2wsCiAgICAgICAgICAgIHZhbHVlOiAwLAogICAgICAgICAgICBtb2RlOiBTZW5kUmVtYWluaW5nVmFsdWUsCiAgICAgICAgICAgIGJvdW5jZTogdHJ1ZSwKICAgICAgICAgICAgYm9keTogVXBkYXRlUGVycFBvc2l0aW9uIHsKICAgICAgICAgICAgICAgIG9yZGVySWQ6IG1zZy5vcmRlcklkLAogICAgICAgICAgICAgICAgb3BUeXBlOiBvcmRlci5vcFR5cGUsCiAgICAgICAgICAgICAgICB0cnhJZDogbXNnLnRyeElkLAogICAgICAgICAgICAgICAgYWNjb3VudDogb3JkZXIuYWNjb3VudCwKICAgICAgICAgICAgICAgIHRva2VuSWQ6IG9yZGVyLnRva2VuSWQsCiAgICAgICAgICAgICAgICBpc0xvbmc6IG9yZGVyLmlzTG9uZywKICAgICAgICAgICAgICAgIG1hcmdpbkRlbHRhOiBvcmRlci5tYXJnaW5EZWx0YSwKICAgICAgICAgICAgICAgIHNpemVEZWx0YTogb3JkZXIuc2l6ZURlbHRhLAogICAgICAgICAgICAgICAgdHJpZ2dlclByaWNlOiBvcmRlci50cmlnZ2VyUHJpY2UsCiAgICAgICAgICAgICAgICB0cmlnZ2VyQWJvdmU6IG9yZGVyLnRyaWdnZXJBYm92ZSwKICAgICAgICAgICAgICAgIHByaWNlc0xlbmd0aDogbXNnLnByaWNlc0xlbmd0aCwKICAgICAgICAgICAgICAgIHByaWNlczogbXNnLnByaWNlcwogICAgICAgICAgICB9LnRvQ2VsbCgpCiAgICAgICAgfSk7CiAgICAgICAgZHVtcCgiZXhlY3V0ZSBQZXJwIGluY3JlYXNlIG9yZGVyIHNlbmQgbXNnIHRvIHBvb2wiKTsKICAgIH0KCiAgICAvLyBpbmNyZWFzZSBzdWNjZXNzIC8gYm91bmNlZCA9PiBleGNlc3MgZ2FzCiAgICAvLyBkZWNyZWFzZSBzdWNjZXNzID0+IG9yZGVyQm9vayB3YWxsZXQgPT4gdXNlciB3YWxsZXQgPT4gdG9rZW4gZXhjZXNzZXMgaGFuZGVsIGNhbmNlbCA9PiBleGNlc3MgZ2FzCiAgICByZWNlaXZlKG1zZzogVXBkYXRlUGVycFBvc2l0aW9uU3VjY2VzcykgewogICAgICAgIGR1bXAoInJlY2VpdmUgdXBkYXRlIFBlcnAgcG9zaXRpb24gc3VjY2VzcyIpOwogICAgICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CiAgICAgICAgcmVxdWlyZShzZW5kZXIoKSA9PSBzZWxmLnBvb2wsICJpbnZhbGlkIHNlbmRlciIpOwoKICAgICAgICAvLyBnZXQgb3JkZXIKICAgICAgICBsZXQgb3JkZXJPcHQ6IFBlcnBQb3NpdGlvbk9yZGVyPyA9IHNlbGYucGVycFBvc2l0aW9uT3JkZXJzLmdldChtc2cub3JkZXJJZCk7CiAgICAgICAgaWYgKG9yZGVyT3B0ID09IG51bGwpIHsKICAgICAgICAgICAgZHVtcCgib3JkZXIgbm90IGV4aXN0Iik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbGV0IG9yZGVyOiBQZXJwUG9zaXRpb25PcmRlciA9IG9yZGVyT3B0ISE7CgogICAgICAgIC8vIGNoZWNrIGdhcwogICAgICAgIGlmIChvcmRlci5vcFR5cGUgPT0gT1JERVJfT1BfVFlQRV9JTkNSRUFTRV9NQVJLRVQgfHwgb3JkZXIub3BUeXBlID09IE9SREVSX09QX1RZUEVfSU5DUkVBU0VfTElNSVQpIHsKICAgICAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiAyICsgc2VsZi5nYXNDb25zdW1wdGlvbiwgImdhcyBub3QgZW5vdWdoIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiA0ICsgc2VsZi5nYXNDb25zdW1wdGlvbiAqIDIgKyB0b24oIjAuMDMyIiksICJnYXMgbm90IGVub3VnaCIpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG9yZGVyLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFX01BUktFVCB8fCBvcmRlci5vcFR5cGUgPT0gT1JERVJfT1BfVFlQRV9JTkNSRUFTRV9MSU1JVCkgewogICAgICAgICAgICBsZXQgb3JkZXJFeE9wdDogUGVycFBvc2l0aW9uT3JkZXJFeD8gPSBzZWxmLnBlcnBQb3NpdGlvbk9yZGVyRXhzLmdldChtc2cub3JkZXJJZCk7CiAgICAgICAgICAgIGlmIChvcmRlckV4T3B0ICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGxldCBvcmRlckV4OiBQZXJwUG9zaXRpb25PcmRlckV4ID0gb3JkZXJFeE9wdCEhOwoKICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSB0cC9zbAogICAgICAgICAgICAgICAgaWYgKG9yZGVyRXgudHBTaXplID4gMCAmJiBvcmRlckV4LnRwUHJpY2UgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5jcmVhdGVQZXJwT3JkZXIoT1JERVJfT1BfVFlQRV9ERUNSRUFTRV9UUCwgc2VuZGVyKCksIG9yZGVyLnRva2VuSWQsIG9yZGVyLmlzTG9uZywgMCwgb3JkZXJFeC50cFNpemUsIG9yZGVyRXgudHBQcmljZSwgCiAgICAgICAgICAgICAgICAgICAgICAgIDAsIDAsIDAsIDAsIDApOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChvcmRlckV4LnNsU2l6ZSA+IDAgJiYgb3JkZXJFeC5zbFByaWNlID4gMCkgewogICAgICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlUGVycE9yZGVyKE9SREVSX09QX1RZUEVfREVDUkVBU0VfU0wsIHNlbmRlcigpLCBvcmRlci50b2tlbklkLCBvcmRlci5pc0xvbmcsIDAsIG9yZGVyRXguc2xTaXplLCBvcmRlckV4LnNsUHJpY2UsIAogICAgICAgICAgICAgICAgICAgICAgICAwLCAwLCAwLCAwLCAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gZGVsZXRlIG9yZGVyCiAgICAgICAgICAgIHNlbGYucGVycFBvc2l0aW9uT3JkZXJzLnNldChtc2cub3JkZXJJZCwgbnVsbCk7CiAgICAgICAgICAgIC8vIGV2ZW50CiAgICAgICAgICAgIGVtaXQoUGVycFBvc2l0aW9uT3JkZXJFeGVjdXRlZEV2ZW50ewogICAgICAgICAgICAgICAgb3BUeXBlOiBvcmRlci5vcFR5cGUsCiAgICAgICAgICAgICAgICBvcmRlcklkOiBtc2cub3JkZXJJZCwKICAgICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQKICAgICAgICAgICAgfS50b0NlbGwoKSk7CgogICAgICAgICAgICAvLyB0cmFuc2ZlciBleGVjdXRpb24gZmVlCiAgICAgICAgICAgIGlmIChvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgICAgICAgICAgICAgIHRvOiBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciEhLAogICAgICAgICAgICAgICAgICAgIGJvdW5jZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb3JkZXIuZXhlY3V0aW9uRmVlLAogICAgICAgICAgICAgICAgICAgIG1vZGU6IFNlbmRQYXlHYXNTZXBhcmF0ZWx5CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gdHJhbnNmZXIgZXhlY2VzcyBnYXMKICAgICAgICAgICAgaWYgKG9yZGVyLmxhc3RPcGVyYXRvciAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBzZWxmLnJlZnVuZEV4ZWNlc3NUb24ob3JkZXIubGFzdE9wZXJhdG9yISEsIDApOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGV0IHJlY2VpdmVyOiBBZGRyZXNzID0gb3JkZXIuYWNjb3VudDsKICAgICAgICAgICAgaWYgKG9yZGVyLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0xJUVVJREFUSU9OKSB7CiAgICAgICAgICAgICAgICByZWNlaXZlciA9IG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyISE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gYWRkIGNhbGxiYWNrCiAgICAgICAgICAgIGxldCBjYWxsYmFja0lkOiBJbnQgPSBzZWxmLmpldHRvbkNhbGxiYWNrUXVlcnlJZE5leHQ7CiAgICAgICAgICAgIHNlbGYuamV0dG9uQ2FsbGJhY2tRdWVyeUlkTmV4dCA9IGNhbGxiYWNrSWQgKyAxOwogICAgICAgICAgICBzZWxmLmpldHRvbkNhbGxiYWNrcy5zZXQoY2FsbGJhY2tJZCwgSmV0dG9uQ2FsbGJhY2t7CiAgICAgICAgICAgICAgICBvcmRlclR5cGU6IE9SREVSX1RZUEVfUEVSUCwKICAgICAgICAgICAgICAgIG9yZGVySWQ6IG1zZy5vcmRlcklkLAogICAgICAgICAgICAgICAgYW1vdW50OiBtc2cucmVjZWl2ZSwKICAgICAgICAgICAgICAgIHJlY2VpdmVyOiByZWNlaXZlciwKICAgICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBvcmRlci5jYWxsYmFja0lkID0gY2FsbGJhY2tJZDsKICAgICAgICAgICAgc2VsZi5wZXJwUG9zaXRpb25PcmRlcnMuc2V0KG1zZy5vcmRlcklkLCBvcmRlcik7CgogICAgICAgICAgICAvLyB0cmFuc2ZlciBqZXR0b24KICAgICAgICAgICAgc2VsZi5yZWZ1bmRKZXR0b24oY2FsbGJhY2tJZCwgbXNnLnJlY2VpdmUsIHJlY2VpdmVyLCBteUFkZHJlc3MoKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIHJlc2V0IG9yZGVyIHBlbmRpbmcKICAgIGJvdW5jZWQoc3JjOiBib3VuY2VkPFVwZGF0ZVBlcnBQb3NpdGlvbj4pIHsKICAgICAgICBkdW1wKCJpbmNyZWFzZSBwZXJwIHBvc2l0aW9uIGZhaWxlZCIpOwoKICAgICAgICAvLyBnZXQgb3JkZXIKICAgICAgICBsZXQgb3JkZXJPcHQ6IFBlcnBQb3NpdGlvbk9yZGVyPyA9IHNlbGYucGVycFBvc2l0aW9uT3JkZXJzLmdldChzcmMub3JkZXJJZCk7CiAgICAgICAgaWYgKG9yZGVyT3B0ID09IG51bGwpIHsKICAgICAgICAgICAgZHVtcCgib3JkZXIgbm90IGV4aXN0Iik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbGV0IG9yZGVyOiBQZXJwUG9zaXRpb25PcmRlciA9IG9yZGVyT3B0ISE7CiAgICAgICAgaWYgKG9yZGVyLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0xJUVVJREFUSU9OKSB7CiAgICAgICAgICAgIC8vIGRlbGV0ZQogICAgICAgICAgICBzZWxmLnBlcnBQb3NpdGlvbk9yZGVycy5zZXQoc3JjLm9yZGVySWQsIG51bGwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIHVwZGF0ZSBwZW5kaW5nCiAgICAgICAgICAgIG9yZGVyLmlzUGVuZGluZyA9IGZhbHNlOwogICAgICAgICAgICBzZWxmLnBlcnBQb3NpdGlvbk9yZGVycy5zZXQoc3JjLm9yZGVySWQsIG9yZGVyKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBMaXF1aWRhdGlvbiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgcmVjZWl2ZShtc2c6IExpcXVpZGF0ZU9yQURMUGVycFBvc2l0aW9uKSB7CiAgICAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKCiAgICAgICAgLy8gY2hlY2sgZ2FzCiAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiA2ICsgc2VsZi5nYXNDb25zdW1wdGlvbiAqIDMgKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlICsgc2VsZi5nZXRQb29sR2FzKCkgKyB0b24oIjAuMDMyIiksICJnYXMgbm90IGVub3VnaCIpOwoKICAgICAgICAvLyBjaGVjayBzZW5kZXIKICAgICAgICBsZXQgaXNFeGVjdXRvcjogQm9vbCA9IGZhbHNlOwogICAgICAgIGxldCBpc0V4ZWN1dG9yT3B0OiBCb29sPyA9IHNlbGYuZXhlY3V0b3JzLmdldChzZW5kZXIoKSk7CiAgICAgICAgaWYgKGlzRXhlY3V0b3JPcHQgIT0gbnVsbCkgewogICAgICAgICAgICBpc0V4ZWN1dG9yID0gaXNFeGVjdXRvck9wdCEhOwogICAgICAgIH0KICAgICAgICByZXF1aXJlKGlzRXhlY3V0b3IsICJpbnZhbGlkIHNlbmRlciIpOwoKICAgICAgICAvLyBmZWUgcmVjZWl2ZXIKICAgICAgICBsZXQgZXhlY3V0aW9uRmVlUmVjZWl2ZXI6IEFkZHJlc3MgPSBzZW5kZXIoKTsKICAgICAgICBpZiAobXNnLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwpIHsKICAgICAgICAgICAgZXhlY3V0aW9uRmVlUmVjZWl2ZXIgPSBtc2cuZXhlY3V0aW9uRmVlUmVjZWl2ZXIhITsKICAgICAgICB9CgogICAgICAgIC8vIGFkZCBuZXcgb3JkZXIKICAgICAgICBsZXQgb3JkZXJJZDogSW50ID0gc2VsZi5wZXJwUG9zaXRpb25PcmRlckluZGV4TmV4dDsKICAgICAgICBzZWxmLnBlcnBQb3NpdGlvbk9yZGVySW5kZXhOZXh0ID0gc2VsZi5wZXJwUG9zaXRpb25PcmRlckluZGV4TmV4dCArIDE7CiAgICAgICAgc2VsZi5wZXJwUG9zaXRpb25PcmRlcnMuc2V0KG9yZGVySWQsIFBlcnBQb3NpdGlvbk9yZGVyewogICAgICAgICAgICBvcFR5cGU6IE9SREVSX09QX1RZUEVfTElRVUlEQVRJT04sCiAgICAgICAgICAgIHRva2VuSWQ6IG1zZy50b2tlbklkLAogICAgICAgICAgICBhY2NvdW50OiBtc2cuYWNjb3VudCwKICAgICAgICAgICAgaXNMb25nOiBtc2cuaXNMb25nLAogICAgICAgICAgICBtYXJnaW5EZWx0YTogMCwKICAgICAgICAgICAgc2l6ZURlbHRhOiAwLAogICAgICAgICAgICB0cmlnZ2VyUHJpY2U6IDAsCiAgICAgICAgICAgIHRyaWdnZXJBYm92ZTogZmFsc2UsCiAgICAgICAgICAgIGV4ZWN1dGlvbkZlZTogMCwKICAgICAgICAgICAgYmxvY2tUaW1lOiBub3coKSwKICAgICAgICAgICAgaXNQZW5kaW5nOiB0cnVlLAogICAgICAgICAgICBjYWxsYmFja0lkOiBudWxsLAogICAgICAgICAgICBleGVjdXRpb25GZWVSZWNlaXZlcjogZXhlY3V0aW9uRmVlUmVjZWl2ZXIsCiAgICAgICAgICAgIGxhc3RPcGVyYXRvcjogc2VuZGVyKCkKICAgICAgICB9KTsKCiAgICAgICAgLy8gc2VuZCB1cGRhdGUgcG9zaXRpb24gbXNnCiAgICAgICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICAgICAgdG86IHNlbGYucG9vbCwKICAgICAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgICAgIG1vZGU6IFNlbmRSZW1haW5pbmdWYWx1ZSwKICAgICAgICAgICAgYm91bmNlOiB0cnVlLAogICAgICAgICAgICBib2R5OiBVcGRhdGVQZXJwUG9zaXRpb24gewogICAgICAgICAgICAgICAgb3BUeXBlOiBPUkRFUl9PUF9UWVBFX0xJUVVJREFUSU9OLAogICAgICAgICAgICAgICAgb3JkZXJJZDogb3JkZXJJZCwKICAgICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQsCiAgICAgICAgICAgICAgICBhY2NvdW50OiBtc2cuYWNjb3VudCwKICAgICAgICAgICAgICAgIHRva2VuSWQ6IG1zZy50b2tlbklkLAogICAgICAgICAgICAgICAgaXNMb25nOiBtc2cuaXNMb25nLAogICAgICAgICAgICAgICAgbWFyZ2luRGVsdGE6IDAsCiAgICAgICAgICAgICAgICBzaXplRGVsdGE6IDAsCiAgICAgICAgICAgICAgICB0cmlnZ2VyUHJpY2U6IDAsCiAgICAgICAgICAgICAgICB0cmlnZ2VyQWJvdmU6IGZhbHNlLAogICAgICAgICAgICAgICAgcHJpY2VzTGVuZ3RoOiBtc2cucHJpY2VzTGVuZ3RoLAogICAgICAgICAgICAgICAgcHJpY2VzOiBtc2cucHJpY2VzCiAgICAgICAgICAgIH0udG9DZWxsKCkKICAgICAgICB9KTsKICAgICAgICBkdW1wKCJsaXF1aWRhdGUgcGVycCBzZW5kIG1zZyB0byBwb29sIik7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBDYWxsYmFjayBDYW5jZWwgSW5jcmVhc2UgLyBFeGVjdXRlIERlY3JlYXNlIC8gRXhlY3V0ZSBMaXF1aWRhdGlvbiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwogICAgZnVuIGhhbmRlbFBlcnBQb3NpdGlvbk9yZGVyQ2FsbGJhY2sob3JkZXJJZDogSW50LCB0cnhJZDogSW50KSB7CiAgICAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKCiAgICAgICAgLy8gY2hlY2sgZ2FzCiAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKyBzZWxmLmdhc0NvbnN1bXB0aW9uLCAiZ2FzIG5vdCBlbm91Z2giKTsKCiAgICAgICAgLy8gZ2V0IG9yZGVyCiAgICAgICAgbGV0IG9yZGVyT3B0OiBQZXJwUG9zaXRpb25PcmRlcj8gPSBzZWxmLnBlcnBQb3NpdGlvbk9yZGVycy5nZXQob3JkZXJJZCk7CiAgICAgICAgaWYgKG9yZGVyT3B0ID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBsZXQgb3JkZXI6IFBlcnBQb3NpdGlvbk9yZGVyID0gb3JkZXJPcHQhITsKCiAgICAgICAgLy8gZGVsZXRlIG9yZGVyCiAgICAgICAgc2VsZi5wZXJwUG9zaXRpb25PcmRlcnMuc2V0KG9yZGVySWQsIG51bGwpOwogICAgICAgIHNlbGYucGVycFBvc2l0aW9uT3JkZXJFeHMuc2V0KG9yZGVySWQsIG51bGwpOwoKICAgICAgICBpZiAob3JkZXIub3BUeXBlID09IE9SREVSX09QX1RZUEVfSU5DUkVBU0VfTUFSS0VUIHx8IG9yZGVyLm9wVHlwZSA9PSBPUkRFUl9PUF9UWVBFX0lOQ1JFQVNFX0xJTUlUKSB7CiAgICAgICAgICAgIC8vIGV2ZW50CiAgICAgICAgICAgIGVtaXQoUGVycFBvc2l0aW9uT3JkZXJDYW5jZWxsZWRFdmVudHsKICAgICAgICAgICAgICAgIG9wVHlwZTogb3JkZXIub3BUeXBlLAogICAgICAgICAgICAgICAgb3JkZXJJZDogb3JkZXJJZCwKICAgICAgICAgICAgICAgIHRyeElkOiB0cnhJZAogICAgICAgICAgICB9LnRvQ2VsbCgpKTsKCiAgICAgICAgICAgIC8vIHRyYW5zZmVyIGV4ZWN1dGlvbiBmZWUKICAgICAgICAgICAgaWYgKG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgICAgICAgICAgdG86IG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyISEsCiAgICAgICAgICAgICAgICAgICAgYm91bmNlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvcmRlci5leGVjdXRpb25GZWUsCiAgICAgICAgICAgICAgICAgICAgbW9kZTogU2VuZFBheUdhc1NlcGFyYXRlbHkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGR1bXAoImNhbmNlbCBQZXJwIGluY3JlYXNlIG9yZGVyIHN1Y2Nlc3MiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBldmVudAogICAgICAgICAgICBlbWl0KFBlcnBQb3NpdGlvbk9yZGVyRXhlY3V0ZWRFdmVudHsKICAgICAgICAgICAgICAgIG9wVHlwZTogb3JkZXIub3BUeXBlLAogICAgICAgICAgICAgICAgb3JkZXJJZDogb3JkZXJJZCwKICAgICAgICAgICAgICAgIHRyeElkOiB0cnhJZAogICAgICAgICAgICB9LnRvQ2VsbCgpKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIHRyYW5zZmVyIGV4ZWN1dGlvbiBmZWUKICAgICAgICAgICAgaWYgKG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwgJiYgb3JkZXIuZXhlY3V0aW9uRmVlICE9IDApIHsKICAgICAgICAgICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgICAgICAgICAgdG86IG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyISEsCiAgICAgICAgICAgICAgICAgICAgYm91bmNlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvcmRlci5leGVjdXRpb25GZWUsCiAgICAgICAgICAgICAgICAgICAgbW9kZTogU2VuZFBheUdhc1NlcGFyYXRlbHkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyB0cmFuc2ZlciBleGVjZXNzIGdhcwogICAgICAgIGlmIChvcmRlci5sYXN0T3BlcmF0b3IgIT0gbnVsbCkgewogICAgICAgICAgICBzZWxmLnJlZnVuZEV4ZWNlc3NUb24ob3JkZXIubGFzdE9wZXJhdG9yISEsIDApOwogICAgICAgIH0KICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IENvbXBlbnNhdGUgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KICAgIC8vIHJlY2VpdmUobXNnOiBDb21wZW5zYXRlUGVycFBvc2l0aW9uT3JkZXIpIHsKICAgIC8vICAgICBsZXQgY3R4OiBDb250ZXh0ID0gY29udGV4dCgpOwoKICAgIC8vICAgICAvLyBjaGVjayBjb21wZW5zYXRvcgogICAgLy8gICAgIGxldCBpc0NvbXBlbnNhdG9yOiBCb29sID0gZmFsc2U7CiAgICAvLyAgICAgbGV0IGlzQ29tcGVuc2F0b3JPcHQ6IEJvb2w/ID0gc2VsZi5jb21wZW5zYXRvcnMuZ2V0KHNlbmRlcigpKTsKICAgIC8vICAgICBpZiAoaXNDb21wZW5zYXRvck9wdCAhPSBudWxsKSB7CiAgICAvLyAgICAgICAgIGlzQ29tcGVuc2F0b3IgPSBpc0NvbXBlbnNhdG9yT3B0ISE7CiAgICAvLyAgICAgfQogICAgLy8gICAgIHJlcXVpcmUoaXNDb21wZW5zYXRvciwgIm5vdCBjb21wZW5zYXRvciIpOwogICAgICAgIAogICAgLy8gICAgIC8vIGNoZWNrIG9yZGVyIHBlbmRpbmcKICAgIC8vICAgICBsZXQgb3JkZXJPcHQ6IExQUG9zaXRpb25PcmRlcj8gPSBzZWxmLmxwUG9zaXRpb25PcmRlcnMuZ2V0KG1zZy5vcmRlcklkKTsKICAgIC8vICAgICByZXF1aXJlKG9yZGVyT3B0ICE9IG51bGwsICJvcmRlciBub3QgZXhpc3QiKTsKICAgIC8vICAgICBsZXQgb3JkZXI6IExQUG9zaXRpb25PcmRlciA9IG9yZGVyT3B0ISE7CgogICAgLy8gICAgIC8vIGNoZWNrIGdhcwogICAgLy8gICAgIGlmIChvcmRlci5vcFR5cGUgPT0gT1JERVJfT1BfVFlQRV9JTkNSRUFTRSkgewogICAgLy8gICAgICAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSBjdHgucmVhZEZvcndhcmRGZWUoKSAqIDMgKyBzZWxmLmdhc0NvbnN1bXB0aW9uICogMiArIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UgKyBzZWxmLmdldFBvb2xHYXMoKSwgImdhcyBub3QgZW5vdWdoIik7CiAgICAvLyAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgICAgcmVxdWlyZShjdHgudmFsdWUgPj0gY3R4LnJlYWRGb3J3YXJkRmVlKCkgKiA2ICsgc2VsZi5nYXNDb25zdW1wdGlvbiAqIDMgKyBzZWxmLm1pblRvbnNGb3JTdG9yYWdlICsgc2VsZi5nZXRQb29sR2FzKCkgKyB0b24oIjAuMDMyIiksICJnYXMgbm90IGVub3VnaCIpOwogICAgLy8gICAgIH0KCiAgICAvLyAgICAgcmVxdWlyZShvcmRlci5pc1BlbmRpbmcsICJvcmRlciBub3QgcGVuZGluZyIpOwoKICAgIC8vICAgICAvLyByZWZ1bmQKICAgIC8vICAgICBpZiAobXNnLm5lZWRSZWZ1bmQpIHsKICAgIC8vICAgICAgICAgLy8gaW5jcmVhc2UgcG9zaXRpb24gZmFpbGVkLCBjYW5jZWwgb3JkZXIKICAgIC8vICAgICAgICAgLy8gcmVmdW5kIGpldHRvbiBmYWlsZWQKICAgIC8vICAgICAgICAgLy8gZ2V0IGNhbGxiYWNrCiAgICAvLyAgICAgICAgIHJlcXVpcmUob3JkZXIuY2FsbGJhY2tJZCAhPSBudWxsLCAiamV0dG9uIGNhbGxiYWNrIG5vdCBleGlzdCIpOwogICAgLy8gICAgICAgICBsZXQgY2FsbGJhY2tJZDogSW50ID0gb3JkZXIuY2FsbGJhY2tJZCEhOwogICAgLy8gICAgICAgICBsZXQgamV0dG9uQ2FsbGJhY2tPcHQ6IEpldHRvbkNhbGxiYWNrPyA9IHNlbGYuamV0dG9uQ2FsbGJhY2tzLmdldChjYWxsYmFja0lkKTsKICAgIC8vICAgICAgICAgaWYgKGpldHRvbkNhbGxiYWNrT3B0ID09IG51bGwpIHsKICAgIC8vICAgICAgICAgICAgIHJldHVybjsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgICBsZXQgamV0dG9uQ2FsbGJhY2s6IEpldHRvbkNhbGxiYWNrID0gamV0dG9uQ2FsbGJhY2tPcHQhITsKICAgIC8vICAgICAgICAgLy8gdXBkYXRlIHRyeElkCiAgICAvLyAgICAgICAgIGpldHRvbkNhbGxiYWNrLnRyeElkID0gbXNnLnRyeElkOwogICAgLy8gICAgICAgICBzZWxmLmpldHRvbkNhbGxiYWNrcy5zZXQoY2FsbGJhY2tJZCwgamV0dG9uQ2FsbGJhY2spOwoKICAgIC8vICAgICAgICAgLy8gdXBkYXRlIGV4ZWN1dGlvbiBmZWUgcmVjZWl2ZXIKICAgIC8vICAgICAgICAgaWYgKG1zZy5leGVjdXRpb25GZWVSZWNlaXZlciAhPSBudWxsKSB7CiAgICAvLyAgICAgICAgICAgICBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciA9IG1zZy5leGVjdXRpb25GZWVSZWNlaXZlciEhOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICAgIG9yZGVyLmxhc3RPcGVyYXRvciA9IHNlbmRlcigpOwogICAgLy8gICAgICAgICBzZWxmLmxwUG9zaXRpb25PcmRlcnMuc2V0KG1zZy5vcmRlcklkLCBvcmRlcik7CgogICAgLy8gICAgICAgICAvLyB0cmFuc2ZlciBqZXR0b24KICAgIC8vICAgICAgICAgc2VsZi5yZWZ1bmRKZXR0b24oY2FsbGJhY2tJZCwgamV0dG9uQ2FsbGJhY2suYW1vdW50LCBqZXR0b25DYWxsYmFjay5yZWNlaXZlciwgbXlBZGRyZXNzKCkpOwogICAgLy8gICAgICAgICByZXR1cm47CiAgICAvLyAgICAgfQoKICAgIC8vICAgICBpZiAobXNnLmlzRXhlY3V0ZSkgewogICAgLy8gICAgICAgICAvLyBkZWxldGUgb3JkZXIKICAgIC8vICAgICAgICAgc2VsZi5scFBvc2l0aW9uT3JkZXJzLnNldChtc2cub3JkZXJJZCwgbnVsbCk7CiAgICAvLyAgICAgICAgIC8vIGV2ZW50CiAgICAvLyAgICAgICAgIGVtaXQoTFBQb3NpdGlvbk9yZGVyRXhlY3V0ZWRFdmVudHsKICAgIC8vICAgICAgICAgICAgIG9wVHlwZTogb3JkZXIub3BUeXBlLAogICAgLy8gICAgICAgICAgICAgb3JkZXJJZDogbXNnLm9yZGVySWQsCiAgICAvLyAgICAgICAgICAgICB0cnhJZDogbXNnLnRyeElkCiAgICAvLyAgICAgICAgIH0udG9DZWxsKCkpOwogICAgLy8gICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICAgIGlmIChvcmRlci5jYWxsYmFja0lkICE9IG51bGwpIHsKICAgIC8vICAgICAgICAgICAgIC8vIGRlbGV0ZSBjYWxsYmFjawogICAgLy8gICAgICAgICAgICAgc2VsZi5qZXR0b25DYWxsYmFja3Muc2V0KG9yZGVyLmNhbGxiYWNrSWQhISwgbnVsbCk7CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgICAgLy8gZGVsZXRlIG9yZGVyCiAgICAvLyAgICAgICAgIHNlbGYubHBQb3NpdGlvbk9yZGVycy5zZXQobXNnLm9yZGVySWQsIG51bGwpOwogICAgLy8gICAgICAgICAvLyBldmVudAogICAgLy8gICAgICAgICBlbWl0KExQUG9zaXRpb25PcmRlckNhbmNlbGxlZEV2ZW50ewogICAgLy8gICAgICAgICAgICAgb3BUeXBlOiBvcmRlci5vcFR5cGUsCiAgICAvLyAgICAgICAgICAgICBvcmRlcklkOiBtc2cub3JkZXJJZCwKICAgIC8vICAgICAgICAgICAgIHRyeElkOiBtc2cudHJ4SWQKICAgIC8vICAgICAgICAgfS50b0NlbGwoKSk7CiAgICAvLyAgICAgfQoKICAgIC8vICAgICAvLyB0cmFuc2ZlciBleGVjdXRpb24gZmVlCiAgICAvLyAgICAgaWYgKG9yZGVyLmV4ZWN1dGlvbkZlZVJlY2VpdmVyICE9IG51bGwgJiYgb3JkZXIuZXhlY3V0aW9uRmVlICE9IDApIHsKICAgIC8vICAgICAgICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgIC8vICAgICAgICAgICAgIHRvOiBvcmRlci5leGVjdXRpb25GZWVSZWNlaXZlciEhLAogICAgLy8gICAgICAgICAgICAgYm91bmNlOiB0cnVlLAogICAgLy8gICAgICAgICAgICAgdmFsdWU6IG9yZGVyLmV4ZWN1dGlvbkZlZSwKICAgIC8vICAgICAgICAgICAgIG1vZGU6IFNlbmRQYXlHYXNTZXBhcmF0ZWx5CiAgICAvLyAgICAgICAgIH0pOwogICAgLy8gICAgIH0KCiAgICAvLyAgICAgLy8gdHJhbnNmZXIgZXhlY2VzcyBnYXMKICAgIC8vICAgICBzZWxmLnJlZnVuZEV4ZWNlc3NUb24oc2VuZGVyKCksIG9yZGVyLmV4ZWN1dGlvbkZlZSk7CiAgICAvLyAgICAgcmV0dXJuOwogICAgLy8gfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gR2V0dGVyID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCiAgICBnZXQgZnVuIHBlcnBQb3NpdGlvbk9yZGVyKG9yZGVySWQ6IEludCk6IFBlcnBQb3NpdGlvbk9yZGVyPyB7CiAgICAgICAgcmV0dXJuIHNlbGYucGVycFBvc2l0aW9uT3JkZXJzLmdldChvcmRlcklkKTsKICAgIH0KCiAgICBnZXQgZnVuIHBlcnBQb3NpdGlvbk9yZGVySW5kZXhOZXh0KCk6IEludCB7CiAgICAgICAgcmV0dXJuIHNlbGYucGVycFBvc2l0aW9uT3JkZXJJbmRleE5leHQ7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gcHJpdmF0ZSBmdW5jdGlvbiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCiAgICBmdW4gc2hvdWxkQ2FuY2VsKGJsb2NrVGltZTogSW50LCBhY2NvdW50OiBBZGRyZXNzLCBpc1BlbmRpbmc6IEJvb2wpIHsKICAgICAgICByZXF1aXJlKCFpc1BlbmRpbmcsICJvcmRlciBpcyBwZW5kaW5nIik7CgogICAgICAgIC8vIGV4ZWN1dG9yIG9yIHRyYWRlcgogICAgICAgIGxldCBpc0V4ZWN1dG9yOiBCb29sID0gZmFsc2U7CiAgICAgICAgbGV0IGlzRXhlY3V0b3JPcHQ6IEJvb2w/ID0gc2VsZi5leGVjdXRvcnMuZ2V0KHNlbmRlcigpKTsKICAgICAgICBpZiAoaXNFeGVjdXRvck9wdCAhPSBudWxsKSB7CiAgICAgICAgICAgIGlzRXhlY3V0b3IgPSBpc0V4ZWN1dG9yT3B0ISE7CiAgICAgICAgfQoKICAgICAgICAvLyBjaGVjayBzZW5kZXIKICAgICAgICByZXF1aXJlKHNlbmRlcigpID09IGFjY291bnQgfHwgaXNFeGVjdXRvciwgImludmFsaWQgc2VuZGVyIik7CiAgICAgICAgLy8gdHJhZGVyIGNhbmNlbCBtdXN0IGFmdGVyIG1pblRpbWVEZWxheVRyYWRlcgogICAgICAgIGlmICghaXNFeGVjdXRvcikgewogICAgICAgICAgICByZXF1aXJlKGJsb2NrVGltZSArIHNlbGYubWluVGltZURlbGF5VHJhZGVyIDw9IG5vdygpLCAidG9vIGVhcmx5Iik7CiAgICAgICAgfQogICAgfQoKICAgIGZ1biBzaG91bGRFeGVjdXRlKGJsb2NrVGltZTogSW50LCBpc1BlbmRpbmc6IEJvb2wpIHsKICAgICAgICByZXF1aXJlKCFpc1BlbmRpbmcsICJvcmRlciBpcyBwZW5kaW5nIik7CgogICAgICAgIC8vIGV4ZWN1dG9yIG9yIHRyYWRlcgogICAgICAgIGxldCBpc0V4ZWN1dG9yOiBCb29sID0gZmFsc2U7CiAgICAgICAgbGV0IGlzRXhlY3V0b3JPcHQ6IEJvb2w/ID0gc2VsZi5leGVjdXRvcnMuZ2V0KHNlbmRlcigpKTsKICAgICAgICBpZiAoaXNFeGVjdXRvck9wdCAhPSBudWxsKSB7CiAgICAgICAgICAgIGlzRXhlY3V0b3IgPSBpc0V4ZWN1dG9yT3B0ISE7CiAgICAgICAgfQoKICAgICAgICAvLyBjaGVjayBzZW5kZXIKICAgICAgICByZXF1aXJlKGlzRXhlY3V0b3IsICJpbnZhbGlkIHNlbmRlciIpOwoKICAgICAgICAvLyBleGVjdXRvciBjYW5jZWwgbXVzdCBiZWZvcmUgbWF4VGltZURlbGF5RXhlY3V0b3IKICAgICAgICByZXF1aXJlKGJsb2NrVGltZSArIHNlbGYubWF4VGltZURlbGF5RXhlY3V0b3IgPiBub3coKSwgIm9yZGVyIGV4cGlyZWQiKTsKICAgIH0KCiAgICAvLyBmdW4gdG9rZW5FbmFibGVkKHRva2VuSW5kZXg6IEludCk6IEJvb2wgewogICAgLy8gICAgIGxldCB0b2tlbkNvbmZpZ09wdDogVG9rZW5Db25maWc/ID0gc2VsZi50b2tlbkNvbmZpZ3MuZ2V0KHRva2VuSW5kZXgpOwogICAgLy8gICAgIGlmICh0b2tlbkNvbmZpZ09wdCA9PSBudWxsKSB7CiAgICAvLyAgICAgICAgIHJldHVybiBmYWxzZTsKICAgIC8vICAgICB9CiAgICAvLyAgICAgcmV0dXJuICh0b2tlbkNvbmZpZ09wdCEhKS5lbmFibGU7CiAgICAvLyB9CgogICAgLy8gY3JlYXRlIGpldHRvbiB0cmFuc2ZlciBib2R5CiAgICBmdW4gY3JlYXRlSmV0dG9uVHJhbnNmZXJCb2R5KHF1ZXJ5SWQ6IEludCwgamV0dG9uQW1vdW50OiBJbnQsIHRvOiBBZGRyZXNzLCByZXNwb25zZURlc3RpbmF0aW9uOiBBZGRyZXNzKTogQ2VsbCB7CiAgICAgICAgcmV0dXJuIGJlZ2luQ2VsbCgpCiAgICAgICAgICAgIC5zdG9yZUludCgweGY4YTdlYTUsIDMyKQogICAgICAgICAgICAuc3RvcmVJbnQocXVlcnlJZCwgNjQpCiAgICAgICAgICAgIC5zdG9yZUNvaW5zKGpldHRvbkFtb3VudCkKICAgICAgICAgICAgLnN0b3JlQWRkcmVzcyh0bykgLy8gdG9fb3duZXJfYWRkcmVzcwogICAgICAgICAgICAuc3RvcmVBZGRyZXNzKHJlc3BvbnNlRGVzdGluYXRpb24pCiAgICAgICAgICAgIC5zdG9yZUludCgwLCAxKSAvLyBjdXN0b20gcGF5bG9hZAogICAgICAgICAgICAuc3RvcmVDb2lucygwKSAvLyBmb3J3YXJkX3Rvbl9hbW91bnQKICAgICAgICAgICAgLnN0b3JlU2xpY2UoYmVnaW5DZWxsKCkuZW5kQ2VsbCgpLmFzU2xpY2UoKSkgLy8gZm9yd2FyZCBwYXlsb2FkCiAgICAgICAgICAgIC5lbmRDZWxsKCk7CiAgICB9CgoKfQo="},"compiler":{"name":"tact","version":"1.2.0","parameters":"{\"entrypoint\":\"contracts/order/order_book.tact\",\"options\":{\"debug\":true}}"}}